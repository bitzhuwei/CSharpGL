/*! @amzn/apswebapstaglibrary - web-client-bundle - v25.510.1915 - 2025-05-10 19:15:48 */
!function(){"use strict";var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};function n(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var e=function(){return e=Object.assign||function(t){for(var n,e=1,i=arguments.length;e<i;e++)for(var r in n=arguments[e])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t},e.apply(this,arguments)};function i(t,n){var e={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(e[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)n.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(e[i[r]]=t[i[r]])}return e}function r(t,n,e,i){return new(e||(e=Promise))((function(r,o){function a(t){try{c(i.next(t))}catch(t){o(t)}}function u(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var n;t.done?r(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,u)}c((i=i.apply(t,n||[])).next())}))}function o(t,n){var e,i,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(e)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(o=0)),o;)try{if(e=1,i&&(r=2&u[0]?i.return:u[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,u[1])).done)return r;switch(i=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,i=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!r||u[1]>r[0]&&u[1]<r[3])){o.label=u[1];break}if(6===u[0]&&o.label<r[1]){o.label=r[1],r=u;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(u);break}r[2]&&o.ops.pop(),o.trys.pop();continue}u=n.call(t,o)}catch(t){u=[6,t],i=0}finally{e=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}function a(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var i,r,o=e.call(t),a=[];try{for(;(void 0===n||n-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}return a}function c(t,n,e){if(e||2===arguments.length)for(var i,r=0,o=n.length;r<o;r++)!i&&r in n||(i||(i=Array.prototype.slice.call(n,0,r)),i[r]=n[r]);return t.concat(i||Array.prototype.slice.call(n))}"function"==typeof SuppressedError&&SuppressedError;var s="25.510.1915",d="listeners",l="_internal/history",v="_internal/pageLoadID",f="_internal/externalEventCount";function h(){var t,n,e,i;try{return!!new URLSearchParams(null!==(n=null===(t=window.top)||void 0===t?void 0:t.location.search)&&void 0!==n?n:window.location.search).has("apscoredebug")||null!==(i=null===(e=window._aps)||void 0===e?void 0:e.get("_system").store.get("_internal/coreDebugMode"))&&void 0!==i&&i}catch(t){return!1}}var p,m=function(){function t(){this.t=300,this.i="https://prod.tahoe-analytics.publishers.advertising.a2z.com/logevent/putRecords",this.o="79db72eb0b5c7255afa54a253df24fb4a5ac916bf40b51c730df8850aa5665ca",this.l=5e3,this.v=new Map([["error",0],["feat",0]]),this.p=new Map([["error",[]],["feat",[]]]),this.clearAndUpdateEventProcessingInterval(5e3)}return t.prototype.logEvent=function(t){var n,i,r=t.eventCategory,o=t.eventName,a=t.eventProperties,u=t.eventSource,c="".concat(Date.now()),s={eventSource:null!==(n=u)&&void 0!==n?n:"aps_web_client_library",eventTime:c,eventCategory:r,eventName:o,eventProperties:e({},a)};try{var d={Data:s,PartitionKey:c};null===(i=this.p.get(s.eventCategory))||void 0===i||i.push(d)}catch(t){}},t.prototype.setSampleRates=function(t){var n=function(t){return t<0?0:t>=0&&t<=1?t:1};"number"==typeof(null==t?void 0:t.error)&&this.v.set("error",n(t.error)),"number"==typeof(null==t?void 0:t.feat)&&this.v.set("feat",n(t.feat))},t.prototype.clearAndUpdateEventProcessingInterval=function(t){var n=this;"number"!=typeof t||t<=0||t!==this.m&&(clearInterval(this._),this._=setInterval((function(){try{n.processEventRecords()}catch(t){}}),t),this.m=t)},t.prototype.processEventRecords=function(){for(var t=[],n=Array.from(this.p.keys()),e=function(e){var r=n[e],o=i.p.get(r),a=i.v.get(r);if(void 0===o||o.length<=0)return"continue";if(void 0===a||0===a)return o.length>=i.l&&(o.length=0,i.logEvent({eventCategory:r,eventName:"queue limit reached"})),"continue";var s=o.filter((function(t){return void 0!==t&&a>=Math.random()}));o.length=0,t.push.apply(t,c([],u(s),!1))},i=this,r=0;r<n.length;r+=1)e(r);if(0!==t.length)for(r=0;r<t.length;r+=this.t)this.sendRecords(t.slice(r,r+this.t)).catch((function(t){}))},t.prototype.encodeRecords=function(t){return t.forEach((function(t){t.Data=window.btoa(JSON.stringify(t.Data))})),t},t.prototype.sendRecords=function(t){return r(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,fetch("".concat(this.i,"?encoded=").concat(h()?"false":"true"),{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.o},body:JSON.stringify({Records:h()?t:this.encodeRecords(t)})})];case 1:return n.sent(),[2]}}))}))},t}(),w={key:"_config/requestViewer/countryCode",default:"unknown"},y=function(){function t(){this.STACK_MAX_LENGTH=500,this.S=new m}return t.prototype.fireReferencePixel=function(t){Math.random()<.01&&this.logCoreError({id:"REFERENCE-".concat(t),error:new Error("REFERENCE-".concat(t)),account:null})},t.prototype.logCoreError=function(t){this.logError(e(e({},t),{isCore:!0}))},t.prototype.logCoreFeature=function(t){this.logFeature(e(e({},t),{isCore:!0}))},t.prototype.logError=function(t){var n;void 0!==t&&this.S.logEvent({eventCategory:"error",eventName:null!==(n=t.id)&&void 0!==n?n:"unknown",eventSource:t.eventSource,eventProperties:e(e(e({},t.props),this.getSharedEventProperties(t)),{error:{name:this.getErrorName(t.error),message:this.getErrorMessage(t.error),stack:this.getStackTraceMessage(t.error),context:this.getErrorContext(t.error)}})})},t.prototype.logFeature=function(t){var n;void 0!==t&&this.S.logEvent({eventCategory:"feat",eventName:null!==(n=t.id)&&void 0!==n?n:"unknown",eventProperties:e(e(e({},t.props),this.getSharedEventProperties(t)),{status:t.feature})})},t.prototype.setEventProcessingInterval=function(t){if("number"!=typeof t)throw new Error("Event processing interval must be a number.");this.S.clearAndUpdateEventProcessingInterval(t)},t.prototype.setEventSamplingRates=function(t){"number"==typeof(null==t?void 0:t.error)&&this.S.setSampleRates({error:t.error}),"number"==typeof(null==t?void 0:t.feature)&&this.S.setSampleRates({feat:t.feature})},t.prototype.getSharedEventProperties=function(t){var n;return{isCore:null!==(n=t.isCore)&&void 0!==n&&n,accountID:this.safelyGetAccountID(t.account),libraryVersion:s,url:this.getLocationHref(),hostname:this.getLocationHostname(),viewerCountryCode:this.getViewerCountryCode(t.account)}},t.prototype.safelyGetAccountID=function(t){var n="unknown";try{void 0!==(null==t?void 0:t.id)&&(n=t.id)}catch(t){try{n="Client Error: ".concat(t.name.toString()," - ").concat(t.message)}catch(t){n="Client Error: Unable to provide more information"}}return n},t.prototype.getLocationHref=function(){var t,n,e,i="";try{i=null!==(e=null===(n=null===(t=window.top)||void 0===t?void 0:t.location)||void 0===n?void 0:n.href)&&void 0!==e?e:""}catch(t){try{i="Client Error: ".concat(t.name.toString()," - ").concat(t.message)}catch(t){i="Client Error: Unable to provide more information"}}return i},t.prototype.getLocationHostname=function(){var t,n,e,i="";try{i=null!==(e=null===(n=null===(t=window.top)||void 0===t?void 0:t.location)||void 0===n?void 0:n.hostname)&&void 0!==e?e:""}catch(t){try{i="Client Error: ".concat(t.name.toString()," - ").concat(t.message)}catch(t){i="Client Error: Unable to provide more information"}}return i},t.prototype.getViewerCountryCode=function(t){var n="unknown";try{null!==t&&(n=t.use(w))}catch(t){try{n="Client Error: ".concat(t.name.toString()," - ").concat(t.message)}catch(t){n="Client Error: Unable to provide more information"}}return n},t.prototype.getStackTraceMessage=function(t){try{if("string"==typeof t)return"NO STACK: ERROR PASSED AS STRING";if(void 0===t.stack)return"NO STACK: error.stack IS UNDEFINED";if(t.stack.length>this.STACK_MAX_LENGTH){return t.stack.substring(0,this.STACK_MAX_LENGTH-5)+"[...]"}return t.stack}catch(t){return"NO STACK: ERROR ON RETRIEVAL"}},t.prototype.getErrorName=function(t){var n="unknown";try{"string"==typeof t?n=t:void 0!==t.name&&(n=t.name)}catch(t){try{n="Client Error: ".concat(t.name.toString()," - ").concat(t.message)}catch(t){n="Client Error: Unable to provide more information"}}return n},t.prototype.getErrorMessage=function(t){var n="unknown";try{"string"==typeof t?n=t:void 0!==t.message&&(n=t.message)}catch(t){try{n="Client Error: ".concat(t.name.toString()," - ").concat(t.message)}catch(t){n="Client Error: Unable to provide more information"}}return n},t.prototype.getErrorContext=function(t){var n,e="unknown";try{"string"!=typeof t&&"context"in t&&(e=null!==(n=t.context)&&void 0!==n?n:"")}catch(t){try{e="Client Error: ".concat(t.name.toString()," - ").concat(t.message)}catch(t){e="Client Error: Unable to provide more information"}}return e},t}(),b=new y;!function(t){t.postulate="postulate",t.genericError="error"}(p||(p={}));var g="25.510.1915";function _(t,n,i){var r=new URL("https://prod.tahoe-analytics.publishers.advertising.a2z.com/logevent/putRecord"),o=t;try{"web-client-scenarios.aps.amazon.dev"===(null==i?void 0:i.hostname)?o=t+"-debug-only":window.Cypress&&(o=t+"-integration-test")}catch(t){}var a=e(e({},i),{eventSource:"aps_web_client_library",eventCategory:o,eventName:n,libraryVersion:g});Object.entries(a).forEach((function(t){var n=u(t,2),e=n[0],i=n[1];r.searchParams.append(e,i)})),fetch(r.toString(),{method:"GET",keepalive:!0,headers:{"x-api-key":"79db72eb0b5c7255afa54a253df24fb4a5ac916bf40b51c730df8850aa5665ca"}}).catch((function(){}))}var E,S,x,C,A={C:setInterval,A:function(){var t;return null===(t=window[R])||void 0===t?void 0:t[k]},R:function(t){var n;void 0===t&&(t=window);try{return(null===(n=t.top)||void 0===n?void 0:n.location)||{href:"unknown",hostname:"unknown"}}catch(t){return{href:"unknown",hostname:"unknown"}}},I:_,j:function(t,n){return{eventTime:I((function(){return"".concat(Date.now())})),accountID:I((function(){return null==t?void 0:t.accountID})),libraryVersion:g,url:I((function(){return n().href})),hostname:I((function(){return n().hostname})),message:I((function(){return null==t?void 0:t.message})),condition:I((function(){return null==t?void 0:t.condition}))}},O:function(t,n){var e,i;try{(null!=n?n:_)(p.genericError,"telemetry_core_failure",{errorName:null!==(e=null==t?void 0:t.name)&&void 0!==e?e:"unknown",errorMessage:null!==(i=null==t?void 0:t.message)&&void 0!==i?i:"unknown"})}catch(t){(null!=n?n:_)(p.genericError,"telemetry_core_failure")}}},R="_aps_telemetry",k="alarms";function I(t){var n;try{return null!==(n=t())&&void 0!==n?n:"undefined"}catch(t){return function(t){try{return t instanceof Error?"Access Error: ".concat(t.name," - ").concat(t.message):"Access Error: Unknown error type"}catch(t){return"Access Error: Unable to provide more information"}}(t)}}!function(t){t.push="push",t.listenerSuccess="listenerSuccess",t.direct="direct"}(E||(E={})),function(t){t.internal="internal",t.apstag="apstag",t.webpage="webpage",t.dtbm="dtbm"}(S||(S={})),function(t){t.completed="completed",t.waiting="waiting",t.cancelled="cancelled"}(x||(x={})),function(t){t.started="started",t.error="error",t.unknown="unknown",t.deactivated="deactivated",t.analytics="analytics"}(C||(C={}));var j=e(e({},x),C),O=new Map([["_config/config/didLoad",function(t){var n=t.account;return t.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(t){return n.write("config/loaded",!0),[2,x.completed]}))}))}],["_config/requestViewerCountry/define",function(t){var n=t.account,e=t.customEvent;return r(void 0,void 0,void 0,(function(){var t,i;return o(this,(function(r){if(void 0===(null===(i=e.detail)||void 0===i?void 0:i.code))throw new Error("Missing country code");if("string"!=typeof(t=e.detail.code)||0===t.trim().length)throw new Error('Invalid country code: "'.concat(t,'"'));return n.update(w,(function(){return t})),[2,x.completed]}))}))}]]),P="apstag/configuration/fetch",M=new Map([[P,function(t){var n=t.account;return t.customEvent,r(void 0,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return(t=n.globalContext.document.createElement("script")).setAttribute("src","".concat("https://config.aps.amazon-adsystem.com/configs/").concat(n.id)),t.setAttribute("type","text/javascript"),t.setAttribute("async","async"),n.globalContext.document.head.appendChild(t),[4,new Promise((function(n,e){t.addEventListener("load",(function(){n()})),t.addEventListener("error",(function(t){e(t)}))}))];case 1:return e.sent(),[2,x.completed]}}))}))}]]),T="consent/isGPPListenerRegistered",D={key:"consent/isTCFAPIListenerRegistered",default:!1},N={key:"consent/TCData",default:void 0};function L(t,n){var e,i;return"string"==typeof(null==n?void 0:n.tcString)&&(null==n?void 0:n.tcString.length)>0||!0===(null===(i=null===(e=null==t?void 0:t.globalContext)||void 0===e?void 0:e.apstag)||void 0===i?void 0:i.isGDPRRegion)||!0===(null==n?void 0:n.gdprApplies)}function U(t,n){var e,i,r,o,a;return!0===(null===(i=null===(e=t.vendor)||void 0===e?void 0:e.consents)||void 0===i?void 0:i[793])&&(o=n,a=null===(r=t.purpose)||void 0===r?void 0:r.consents,(null!=o?o:[]).reduce((function(t,n){return t&&!0===(null==a?void 0:a[n])}),!0))}var q=function(t,n){var i={tcData:n,consents:[1]},r=function(t){try{return t()}catch(t){return"error"}};return{tcT:r((function(){return t.isAPStagAllowedToAccessInfoOnDevice()})),tcCC:r((function(){return function(t){var n,e=t.account,i=t.tcData,r=t.consents;if(!L(e,i))return!0;if("object"!=typeof i)return!1;if((null!==(n=i.tcfPolicyVersion)&&void 0!==n?n:0)<2)return!1;if(i.useNonStandardStacks)return!1;if(!i.isServiceSpecific)return!1;var o=!1;return r.forEach((function(t){var n,e,a;switch(null===(a=null===(e=null===(n=i.publisher)||void 0===n?void 0:n.restrictions)||void 0===e?void 0:e[t])||void 0===a?void 0:a[793]){case 0:case 2:o=!0;break;default:U(i,r)||(o=!0)}})),!o}(e(e({},i),{account:t}))})),tcCF:r((function(){return 0===function(t){var n,e=t.tcData,i=t.consents;if(0===(null!=i?i:[]).length)return["No consents param passed"];var r=[];try{if("object"!=typeof e){var o="";try{o=JSON.stringify(e)}catch(t){}r.push("Invalid tcData: ".concat(o))}return!1===e.gdprApplies?[]:((null!==(n=e.tcfPolicyVersion)&&void 0!==n?n:0)<2&&r.push("tcData version not supported: ".concat(e.tcfPolicyVersion)),e.useNonStandardStacks&&r.push("tcData's useNonStandardStacks should not be true"),e.isServiceSpecific||r.push("tcData needs to be service specific"),i.forEach((function(t){var n,o,a;switch(null===(a=null===(o=null===(n=e.publisher)||void 0===n?void 0:n.restrictions)||void 0===o?void 0:o[t])||void 0===a?void 0:a[793]){case 0:r.push("Invalid publisher restrictions 0, consent ".concat(t));break;case 2:r.push("Invalid publisher restrictions 2, consent ".concat(t));break;default:U(e,i)||r.push("Invalid publisher restrictions default, consent ".concat(t))}})),r)}catch(t){if(r.length>0)return r;throw t}}(i).length})),PRA:r((function(){return L(t,n)}))}},z="consent/gppapi/attemptSync",F="consent/gppapi/didChange",B="consent/gppapi/syncData",V="consent/tcfapi/attemptSync",J="consent/tcfapi/didChange",H=new Map([[z,function(t){var n=t.account;return r(void 0,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return void 0===n.globalContext.__gpp||!0===n.read(T)?[2,x.cancelled]:[4,n.record(B)];case 1:return e.sent(),t=n.globalContext.__gpp("addEventListener",(function(t){"error"!==(null==t?void 0:t.eventName)&&n.record(F,{eventListener:t,fromAddEvent:!0}).catch((function(t){}))})),n.write(T,"listenerRegistered"===(null==t?void 0:t.eventName)&&!0===(null==t?void 0:t.data)),[2,x.completed]}}))}))}],[F,function(t){var n=t.account,e=t.customEvent;return r(void 0,void 0,void 0,(function(){var t,i;return o(this,(function(r){switch(r.label){case 0:return[4,n.record(B,{eventListener:null===(t=e.detail)||void 0===t?void 0:t.eventListener,fromAddEvent:null===(i=e.detail)||void 0===i?void 0:i.fromAddEvent})];case 1:return r.sent(),[2,x.completed]}}))}))}],[B,function(t){var n=t.account,i=t.customEvent;return r(void 0,void 0,void 0,(function(){var t,r,a,c,s,d,l,v,f,h,p,m,w,y,b;return o(this,(function(o){return(null!==(p=null===(h=null===(f=null===(v=i.detail)||void 0===v?void 0:v.eventListener)||void 0===f?void 0:f.pingData)||void 0===h?void 0:h.gppString)&&void 0!==p?p:"").length>0?(t=null===(w=null===(m=i.detail)||void 0===m?void 0:m.eventListener)||void 0===w?void 0:w.pingData,c="addEventListener"):(d=u(function(t){var n,e,i;try{var r=t.globalContext.__gpp("ping",(function(t,n){n&&"object"==typeof t&&(e=t)}));void 0===e&&(null!==(n=null==r?void 0:r.gppString)&&void 0!==n?n:"").length>0&&(e=r)}catch(t){i="E:ping: ".concat(t)}return[e,i]}(n),2),t=d[0],a=d[1],c="ping","object"!=typeof t&&(l=u(function(t){var n,i;try{var r=t.globalContext.__gpp("getGPPData");n=e(e({},r),r.pingData)}catch(t){i="E:getGPPData: ".concat(t)}return[n,i]}(n),2),t=l[0],r=l[1],c="getGPPData")),s={gpp:{gppLength:"string"==typeof(null==t?void 0:t.gppString)?t.gppString.length:void 0,isGPPTilde:(null!==(y=null==t?void 0:t.gppString)&&void 0!==y?y:"").includes("~"),error10:r,error:a,gppVersion:null==t?void 0:t.gppVersion,cmpId:null==t?void 0:t.cmpId,method:c,fromAddEvent:null===(b=i.detail)||void 0===b?void 0:b.fromAddEvent}},n.write("consent/GPPData",t),[2,{status:x.completed,analytics:s}]}))}))}],[V,function(t){var n=t.account;return r(void 0,void 0,void 0,(function(){var t;return o(this,(function(e){return t=n.use(D),void 0===n.globalContext.__tcfapi||t?[2,x.cancelled]:(n.globalContext.__tcfapi("addEventListener",2,(function(t,e){n.record(J,{tcData:t,success:e}).catch((function(t){}))})),[2,x.completed])}))}))}],[J,function(t){var n=t.account,e=t.customEvent;return r(void 0,void 0,void 0,(function(){var t,i,r,a;return o(this,(function(o){return t=null===(r=e.detail)||void 0===r?void 0:r.success,n.update(D,(function(n){return n||!0===t})),i=null===(a=e.detail)||void 0===a?void 0:a.tcData,n.update(N,(function(n){return void 0!==i||!0===t?i:n})),"object"!=typeof i?[2,x.completed]:[2,{status:x.completed,analytics:q(n,i)}]}))}))}]]);var G=new WeakMap;function W(t,n,i,r){void 0===i&&(i="root"),void 0===r&&(r=".");var o={nonModifiable:{set:function(t,n){throw new Error('Cannot set property "'.concat(String(n),'": "').concat(i,'" is not marked as modifiable.'))},deleteProperty:function(t,n){throw new Error('Cannot delete property "'.concat(String(n),'": "').concat(i,'" is not marked as modifiable.'))},defineProperty:function(t,n){throw new Error('Cannot define property "'.concat(String(n),'": "').concat(i,'" is not marked as modifiable.'))},setPrototypeOf:function(t){throw new Error('Cannot set prototype: "'.concat(i,'" is not marked as modifiable.'))}},modifiable:{set:function(t,n,e,i){try{return Reflect.set(t,n,e,i)}catch(i){if("TypeError"===i.name)return t[n]=e,!0;throw i}}},validating:{get:function(t,e,o){if("__raw__"===e)return G.get(o)||t;if("symbol"==typeof e)return Reflect.get(t,e,o);if(function(t){if(["asymmetricMatch","nodeType"].includes(t))return!0}(e))return Reflect.get(t,e,o);var a;try{a=Reflect.get(t,e,o)}catch(n){if("TypeError"!==n.name)throw n;a=t[e]}return W(a,n,"".concat(i).concat(r).concat(String(e)))},ownKeys:function(t){return Reflect.ownKeys(t).filter((function(t){var e="".concat(i).concat(r).concat(String(t));return void 0!==n[e]}))}},function:{apply:function(t,e,r){var o=G.has(e)?G.get(e):e;return W(t.apply(o,r),n,"".concat(i,"()"))},get:function(t,n,e){return"__raw__"===n?G.get(e)||t:Reflect.get(t,n,e)}}},a=function(r){if(!1===r.verifiable)return t;if(t instanceof Set)return t.forEach((function(t){W(t,n,"".concat(i,".value"))})),t;if(t instanceof Map)return t.forEach((function(t,e){W(e,n,"".concat(i,".key")),W(t,n,"".concat(i,".value"))})),t;if(Array.isArray(t))return t.map((function(t){return W(t,n,"".concat(i,"[]"))}));if("function"==typeof t){var a=new Proxy(t,o.function);return G.set(a,t),a}var u=e(e({},o.validating),(null==r?void 0:r.modifiable)?o.modifiable:o.nonModifiable);try{var c=new Proxy(t,u);return G.set(c,t),c}catch(n){if("TypeError"===n.name)return t;throw n}}(function(){var r,o=n[i];if(void 0===o&&function(t,n){var i,r=function(){return!1};!function(t,n,i){var r=window;void 0===r[R]&&(r[R]={}),void 0===r[R][k]&&(r[R][k]=[]);var o=r[R][k],a=n.toString();o.push({hash:t,context:e(e({},i),{condition:a})})}(t,r,n);var o=null!==(i=null==n?void 0:n.message)&&void 0!==i?i:"Postulate violation: ".concat(t,", ").concat(r);throw new Error(o)}("ea3914",{message:'Unauthorized usage for "'.concat(i,'": No validator has been defined')}),null===o)return{verifiable:!1};try{r=o(t,i)}catch(n){var a="Error, could not convert to string";try{a="string"==typeof t?'"'+t+'"':null!=t&&"function"==typeof t.toString?t.toString():Object.prototype.toString.call(t)}catch(t){}throw new Error('Validation failed for "'.concat(i,'": ').concat(n.message," - Received: ").concat(a))}return null!=r?r:{}}());return a}var K=function(t){if("number"!=typeof t)throw new Error("must be a number")},$=function(t){if("string"!=typeof t)throw new Error("must be a string")},Q=function(t){if("boolean"!=typeof t)throw new Error("must be a boolean")},Z=function(t){if("object"!=typeof t||null===t||Array.isArray(t))throw new Error("must be a standard object")},Y=function(t){if(!Array.isArray(t))throw new Error("must be an array")};function X(t){return function(n){if(!1===t.includes(n))throw new Error("must be one of the following values: ".concat(JSON.stringify(t)))}}function tt(t){return function(n,i){var r=t(n,i);return e({modifiable:!0},r)}}function nt(t){return function(n,e){if(t===it)throw new Error("isAny cannot be used within isOptional");null!=n&&t(n,e)}}var et=function(t){if("function"!=typeof t)throw new Error("must be a function")},it=function(){},rt=function(){return{verifiable:!1}},ot=function(){function t(t){var n=t.scope,e=t.object,i=t.action,r=t.validators,o=t.handler;this.throwIfInvalid(n,e,i),this.name="".concat(n,"/").concat(e,"/").concat(i),this.handler=this.wrapHandler(o,r)}return t.prototype.wrapHandler=function(t,n){var i=this;return function(a){return r(i,void 0,void 0,(function(){var i,r,u;return o(this,(function(o){switch(o.label){case 0:return i=e(e({},i=a),{detail:W(i.customEvent.detail,null!==(r=null==n?void 0:n.detail)&&void 0!==r?r:{detail:it},"detail"),context:W(i.account.globalContext,null!==(u=null==n?void 0:n.context)&&void 0!==u?u:{context:it},"context")}),[4,t(i)];case 1:return[2,o.sent()]}}))}))}},t.prototype.throwIfInvalid=function(t,n,e){var i=/^[a-z0-9][a-zA-Z0-9]*$/;if(!i.test(t)||!i.test(n)||!i.test(e))throw new Error("scope, object, and action must be alphanumeric and start with a lowercase. Received: ".concat(t,", ").concat(n,", ").concat(e));if(/[A-Z]/.test(e)&&!/^(will|did)/i.test(e))throw new Error("action must be a single verb (or a single verb prefixed by 'will' or 'did'). Received: ".concat(e))},t}();function at(t){if(new Set(t.map((function(t){return t.name}))).size!==t.length)throw new Error("Duplicates found");return new Map(t.map((function(t){return[t.name,t.handler]})))}var ut="debugSession/end",ct="prepend/events",st="populator/ran",dt={key:"consent/hasPurposeOneConsent",default:!1},lt=function(){function t(t){var n=this;this.getItem=function(t){var e=n.globalContext.document.cookie.split("; ").reduce((function(n,e){var i=e.split("=");return i[0]===t?decodeURIComponent(i.slice(1).join("=")):n}),"");return e.length>0?e:null},this.removeItem=function(t,e){void 0===e&&(e="/"),n.setItem(t,"",0,e)},this.setItem=function(t,e,i,r){void 0===r&&(r="/");var o=new Date(i);if(!n.isValidDate(o))throw new Error("Invalid expiration date");n.globalContext.document.cookie="".concat(t,"=").concat(e,"; expires=").concat(o.toUTCString(),"; path=").concat(r,";")},this.globalContext=t}return t.prototype.isValidDate=function(t){return t instanceof Date&&!isNaN(t)},t}(),vt=["scope/objectName",ut,ct];function ft(t){return null===t||"object"!=typeof t?t:t instanceof Date?new Date(t.getTime()):t instanceof Array?t.reduce((function(t,n){return t.push(ft(n)),t}),[]):t instanceof Set?Array.from(t.values()).reduce((function(t,n){return t.add(ft(n)),t}),new Set):t instanceof Map?Array.from(t.entries()).reduce((function(t,n){return t.set(n[0],ft(n[1])),t}),new Map):t instanceof Object?Object.keys(t).reduce((function(n,e){return n[e]=ft(t[e]),n}),{}):t}var ht,pt=function(){function t(t,n){var e=n.rootName;this.globalContext=n.globalContext;var i=this.globalContext[e].get(t);if(null==i)throw new Error('Missing "'.concat(t,'" account in userspace object'));this.id=t,this.store=i.store,this.queue=i.queue,this.store.has("listeners")||this.store.set("listeners",new Map)}return t.prototype.record=function(t,n){return r(this,void 0,void 0,(function(){var i=this;return o(this,(function(r){switch(r.label){case 0:return[4,new Promise((function(r,o){i.queue.push(new CustomEvent(t,{detail:e({resolve:r,reject:o,source:S.internal},n)}))}))];case 1:return[2,r.sent()]}}))}))},t.prototype.recordListener=function(t,n){return r(this,void 0,void 0,(function(){var i=this;return o(this,(function(r){switch(r.label){case 0:return[4,new Promise((function(r,o){i.queue.push(new CustomEvent(t.name,{detail:e({resolve:r,reject:o,source:S.internal},n)}))}))];case 1:return[2,r.sent()]}}))}))},t.prototype.recordListenerNonBlocking=function(t,n){this.recordListener(t,n).catch((function(t){}))},t.prototype.read=function(t,n){var e,i,r,o,a=this.store.get(t);if(void 0!==a)return a;if(void 0!==(null==n?void 0:n.persist)&&n.persist){var s=this.readLocalStorage(t,{usePrefix:!0});if(void 0!==s)return s}var d=null===(i=null===(e=null==n?void 0:n.default)||void 0===e?void 0:e.generators)||void 0===i?void 0:i.get(t);return void 0!==d?d.apply(void 0,c([],u(null!==(o=null===(r=null==n?void 0:n.default)||void 0===r?void 0:r.args)&&void 0!==o?o:[]),!1)):void 0},t.prototype.write=function(t,n,e){this.store.set(t,n),void 0!==(null==e?void 0:e.persist)&&e.persist&&this.writeLocalStorage(t,n,{usePrefix:!0})},t.prototype.use=function(t,n){var e,i=this.store.get(t.key);if(void 0!==i)e=i;else if(void 0!==(null==n?void 0:n.persist)&&n.persist){var r=this.readLocalStorage(t.key,{usePrefix:!0});null!=r&&(e=r)}var o=null!=e?e:t.default;if("function"==typeof o||!1===(null==n?void 0:n.structuredClone))return o;try{return structuredClone(o)}catch(t){try{return ft(o)}catch(t){return b.logCoreError({id:"Core.library.Account.use",account:null,error:t}),o}}},t.prototype.update=function(t,n,e){var i=n(this.use(t,e));if(void 0!==t.postProcessor&&(i=t.postProcessor(i)),this.store.set(t.key,i),void 0!==(null==e?void 0:e.persist)&&e.persist){if("string"!=typeof i)throw new Error("".concat(JSON.stringify(i)," must be a string to be writtable to browser storage"));this.writeLocalStorage(t.key,i,{usePrefix:!0})}},t.prototype.delete=function(t,n){this.store.delete(t),void 0!==(null==n?void 0:n.persist)&&n.persist&&this.deleteLocalStorage(t,{usePrefix:!0})},t.prototype.remove=function(t,n){this.store.delete(t.key),void 0!==(null==n?void 0:n.persist)&&n.persist&&this.deleteLocalStorage(t.key,{usePrefix:!0})},t.prototype.executeFuncWithConsent=function(t,n){if(!this.isAllowedToAccessInfoOnDevice())throw new Error("Invalid consent. API requires consent before execution.");return n.apply(t)},t.prototype.recordErrorEvent=function(t){b.logError(e(e({},t),{account:this}))},t.prototype.recordStatusChangeEvent=function(t){b.logFeature({id:t.id,account:this,feature:t.status,props:e({},t.props)})},t.prototype.recordGenericEvent=function(t){b.logFeature({id:t.id,account:this,feature:t.id,props:e({},t.props)})},t.prototype.isAllowedToAccessInfoOnDevice=function(){return this.updateUserConsent(),this.use(dt)},t.prototype.isAPStagAllowedToAccessInfoOnDevice=function(){return!0===this.globalContext.apstag._atsaaiod()},t.prototype.updateUserConsent=function(){try{var t=this.isAPStagAllowedToAccessInfoOnDevice();this.update(dt,(function(){return t}))}catch(t){}},t.prototype.getPersistedItemName=function(t){return"".concat("aps").concat(":").concat(this.id).concat(":").concat(t)},t.prototype.isBrowserStorageAllowed=function(t){var n=!1;try{n=this.isAllowedToAccessInfoOnDevice()}catch(t){}return n||vt.includes(t)},t.prototype.setCookieStorage=function(t,n,e,i){var r,o;if(!this.isBrowserStorageAllowed(t))throw new Error("".concat(t," is not allowed to be set on cookie storage"));var a=null!==(r=null==i?void 0:i.usePrefix)&&void 0!==r&&r?this.getPersistedItemName(t):t;return new lt(this.globalContext).setItem(a,n,e,null!==(o=null==i?void 0:i.path)&&void 0!==o?o:"/")},t.prototype.readCookieStorage=function(t,n){var e;if(!this.isBrowserStorageAllowed(t))throw new Error("".concat(t," is not allowed to be read from cookie storage"));var i=null!==(e=null==n?void 0:n.usePrefix)&&void 0!==e&&e?this.getPersistedItemName(t):t;return new lt(this.globalContext).getItem(i)},t.prototype.readLocalStorage=function(t,n){var e;if(!this.isBrowserStorageAllowed(t))throw new Error("".concat(t," is not allowed to be read from browser storage"));var i=null!==(e=null==n?void 0:n.usePrefix)&&void 0!==e&&e?this.getPersistedItemName(t):t;if(i in this.globalContext.localStorage)return this.globalContext.localStorage.getItem(i)},t.prototype.writeLocalStorage=function(t,n,e){var i;if(!this.isBrowserStorageAllowed(t))throw new Error("".concat(t," is not allowed to be written to browser storage"));if("string"!=typeof n)throw new Error("".concat(JSON.stringify(n)," must be a string to be writtable to browser storage"));var r=null!==(i=null==e?void 0:e.usePrefix)&&void 0!==i&&i?this.getPersistedItemName(t):t;this.globalContext.localStorage.setItem(r,n)},t.prototype.deleteLocalStorage=function(t,n){var e;if(!this.isBrowserStorageAllowed(t))throw new Error("".concat(t," is not allowed to be touched/deleted in browser storage"));var i=null!==(e=null==n?void 0:n.usePrefix)&&void 0!==e&&e?this.getPersistedItemName(t):t;this.globalContext.localStorage.removeItem(i)},t.prototype.readSessionStorage=function(t,n){var e;if(!this.isBrowserStorageAllowed(t))throw new Error("".concat(t," is not allowed to be read from browser storage"));var i=null!==(e=null==n?void 0:n.usePrefix)&&void 0!==e&&e?this.getPersistedItemName(t):t;if(i in this.globalContext.sessionStorage)return this.globalContext.sessionStorage.getItem(i)},t.prototype.writeSessionStorage=function(t,n,e){var i;if(!this.isBrowserStorageAllowed(t))throw new Error("".concat(t," is not allowed to be written to browser storage"));if("string"!=typeof n)throw new Error("".concat(JSON.stringify(n)," must be a string to be writable to browser storage"));var r=null!==(i=null==e?void 0:e.usePrefix)&&void 0!==i&&i?this.getPersistedItemName(t):t;this.globalContext.sessionStorage.setItem(r,n)},t.prototype.deleteSessionStorage=function(t,n){var e;if(!this.isBrowserStorageAllowed(t))throw new Error("".concat(t," is not allowed to be touched/deleted in browser storage"));var i=null!==(e=null==n?void 0:n.usePrefix)&&void 0!==e&&e?this.getPersistedItemName(t):t;this.globalContext.sessionStorage.removeItem(i)},t}(),mt="_system",wt=function(t){function e(n,e){return t.call(this,mt,{globalContext:n,rootName:e})||this}return n(e,t),e}(pt),yt=function(){function t(t,n,e){this.globalContext=t,this.rootName=n,this.dispatcher=e}return t.prototype.getAccounts=function(){return this.globalContext[this.rootName]},t.prototype.createUserspaceRoot=function(){null==this.getAccounts()&&(this.globalContext[this.rootName]=new Map)},t.prototype.createSystemAccount=function(){!1===this.getAccounts().has(mt)&&(this.getAccounts().set(mt,{queue:[],store:new Map}),new wt(this.globalContext,this.rootName).store.set(v,Math.random()))},t.prototype.observeRootSet=function(){var t=this;this.getAccounts().set=function(n,e){Map.prototype.set.apply(this,[n,e]),t.equip()}},t.prototype.observeAccountQueuesPush=function(){var t=this;this.getAccounts().forEach((function(n){n.queue.push=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];Array.prototype.push.apply(this,n),t.dispatcher.P({reason:{method:E.push,events:n}})}}))},t.prototype.overwriteAccountStoresGet=function(){this.getAccounts().forEach((function(t){t.store.get=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Map.prototype.get.apply(this,t)}}))},t.prototype.defineConvenienceFunctions=function(){var t=this,n=function(n,e,i){var r=t.getAccounts().get(n);void 0!==r&&r.queue.push(new CustomEvent(e,{detail:null!=i?i:{}}))},e=this.globalContext[this.rootName];e.triggerFor=n,e.trigger=function(t,e){n(mt,t,e)},void 0===e._private&&(e._private={}),e._private.CookieStorage=lt},t.prototype.equip=function(){try{this.createUserspaceRoot(),this.createSystemAccount(),this.observeRootSet(),this.observeAccountQueuesPush(),this.overwriteAccountStoresGet(),this.defineConvenienceFunctions()}catch(t){throw new wt(this.globalContext,this.rootName).recordErrorEvent({id:"Core.library.Equiper.equip",error:t}),t}},t}();!function(t){t.info="info",t.warn="warn",t.error="error"}(ht||(ht={}));var bt=function(){function t(){}return t.Instance=function(){return this.M},t.SessionId=function(){return this.T},t.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=new Date(Date.now()),i=ht.info;return console.log.apply(console,c([this.getPrefix(e,i)],u(t),!1)),{timestamp:e,logLevel:i}},t.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=new Date(Date.now()),i=ht.warn;return console.warn.apply(console,c([this.getPrefix(e,i)],u(t),!1)),{timestamp:e,logLevel:i}},t.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=new Date(Date.now()),i=ht.error;return console.error.apply(console,c([this.getPrefix(e,i)],u(t),!1)),{timestamp:e,logLevel:i}},t.prototype.getPrefix=function(n,e){var i=n.toISOString();return"".concat(i," | ").concat(t.SessionId()," | [").concat(e.toUpperCase(),"]")},t.M=new t,t.T="".concat(Date.now()),t}(),gt=bt.Instance(),_t=function(t){var n,e;if(void 0===t||!Array.isArray(t))return!0;var i=window;do{if(t.includes(null===(n=null==i?void 0:i.location)||void 0===n?void 0:n.hostname))return!0;if(i===window.top)break;e=i,i=i.parent}while(e!==i&&e!==window.top);return!1};function Et(t){return!(t>=1||Number.isNaN(t))&&(t<=0||Math.random()>=t)}var St={key:"_internal/eventSources",default:new Map},xt={key:"_internal/processedEventSources",default:new Set},Ct=[j.completed,j.error,j.cancelled,j.analytics],At=function(){function t(t,n){this.globalContext=t,this.rootName=n}return t.prototype.D=function(t){var n;return null!==(n=t.store.get("_config/events/deactivations"))&&void 0!==n?n:new Set},t.prototype.N=function(t,n){return!0===this.D(t).has(n.type)||function(t,n){var e,i,r,o,a,u;try{var c=null===(r=null===(i=null===(e=t.detail)||void 0===e?void 0:e.restrictions)||void 0===i?void 0:i.allow)||void 0===r?void 0:r.hostnames;if(void 0!==c&&!_t(c))return!0;var s=null===(u=null===(a=null===(o=t.detail)||void 0===o?void 0:o.restrictions)||void 0===a?void 0:a.block)||void 0===u?void 0:u.hostnames;if(void 0!==s&&_t(s))return!0}catch(t){return n.recordErrorEvent({id:"hostnames",error:new Error(t)}),!1}return!1}(n,t)||function(t){var n,e,i,r,o,a,u=null===(i=null===(e=null===(n=null==t?void 0:t.detail)||void 0===n?void 0:n.restrictions)||void 0===e?void 0:e.allow)||void 0===i?void 0:i.libraryVersions,c=null===(a=null===(o=null===(r=null==t?void 0:t.detail)||void 0===r?void 0:r.restrictions)||void 0===o?void 0:o.block)||void 0===a?void 0:a.libraryVersions;return!(!Array.isArray(c)||!c.includes(s))||!(!Array.isArray(u)||u.includes(s))}(n)||function(t,n){var e,i,r,o,a,u,c=null===(r=null===(i=null===(e=null==t?void 0:t.detail)||void 0===e?void 0:e.restrictions)||void 0===i?void 0:i.allow)||void 0===r?void 0:r.accounts,s=null===(u=null===(a=null===(o=null==t?void 0:t.detail)||void 0===o?void 0:o.restrictions)||void 0===a?void 0:a.block)||void 0===u?void 0:u.accounts;return!(!Array.isArray(s)||!s.includes(n.id))||!(!Array.isArray(c)||c.includes(n.id))}(n,t)||function(t){var n,e,i,r,o,a,u,c,s=null!==(r=null===(i=null===(e=null===(n=null==t?void 0:t.detail)||void 0===n?void 0:n.restrictions)||void 0===e?void 0:e.allow)||void 0===i?void 0:i.rate)&&void 0!==r?r:1;return!(!Et(null!==(c=null===(u=null===(a=null===(o=null==t?void 0:t.detail)||void 0===o?void 0:o.restrictions)||void 0===a?void 0:a.block)||void 0===u?void 0:u.rate)&&void 0!==c?c:1)&&!Et(s))}(n)},t.prototype.L=function(){var t;return null!==(t=new wt(this.globalContext,this.rootName).store.get(d))&&void 0!==t?t:new Map},t.prototype.U=function(t){var n;return null!==(n=t.store.get("listeners"))&&void 0!==n?n:new Map},t.prototype.q=function(t,n){return this.L().get(n.type)||this.U(t).get(n.type)},t.prototype.F=function(t){var n=this.B(f);return(void 0===t.externalEventCount||t.externalEventCount<n)&&(t.externalEventCount=n,!0)},t.prototype.V=function(t){if(void 0===t.status)return!0;if(t.status===j.started)return!1;if(Ct.includes(t.status))return!1;if(t.status===j.waiting)return!!this.F(t);if(t.status===j.unknown)return!1;if(t.status===j.deactivated)return!1;throw new Error("Event status not explicitely handled: ".concat(t.status))},t.prototype.J=function(t,n){var e;void 0!==(null===(e=n.detail)||void 0===e?void 0:e.timeout)&&t.push(new Promise((function(t,e){setTimeout((function(){return e(new Error('Event "'.concat(n.type,'" timed out')))}),n.detail.timeout)})))},t.prototype.H=function(t,n){var e,i=new wt(this.globalContext,this.rootName),r=null!==(e=i.read(t))&&void 0!==e?e:0;i.write(t,r+n)},t.prototype.G=function(t){new wt(this.globalContext,this.rootName).write(t,0)},t.prototype.B=function(t){var n;return null!==(n=new wt(this.globalContext,this.rootName).read(t))&&void 0!==n?n:0},t.prototype.W=function(t,n,e,i,r){var o;if(!(n in j))throw new Error("Listener returned invalid status: ".concat(t.type," returned ").concat(n));if(this.K(t,n,i,r),n!==j.waiting&&void 0!==(null===(o=t.detail)||void 0===o?void 0:o.resolve))try{t.detail.resolve(e)}catch(t){gt.error(t)}this.P({reason:{method:E.listenerSuccess,events:[t]}})},t.prototype.$=function(t,n,e){void 0!==n&&"string"!=typeof n||(n=new Error(n)),this.K(t,j.error,e),this.Z(t,n),n.context=t.type,e.recordErrorEvent({id:t.type,error:n})},t.prototype.Y=function(t,n,e,i){var r=this.q(e,n);if(void 0===r)throw new Error("No listener found for event: ".concat(n.type));t.push(r({customEvent:n,account:e,systemAccount:i,detail:n.detail,context:e.globalContext}))},t.prototype.X=function(t,n,e){var i=this;Promise.race(t).then((function(t){var r,o,a,u;void 0===t?o=x.completed:"string"==typeof t?o=t:"object"==typeof t&&(o=t.status,a=t.value,u=t.analytics,!0===(null===(r=n.detail)||void 0===r?void 0:r.surfaceAnalytics)&&(void 0===a&&(a={}),a.analytics=u)),i.W(n,o,a,e,u)})).catch((function(t){i.$(n,t,e)}))},t.prototype.tt=function(t,n,e){var i=[];this.Y(i,t,n,e),this.J(i,t),this.X(i,t,n)},t.prototype.nt=function(t,n){var e;if(void 0===t.status){var i=null===(e=t.detail)||void 0===e?void 0:e.error;if(void 0!==i){var r={id:t.type,error:i};"string"==typeof t.detail.source&&(r.eventSource=t.detail.source),n.recordErrorEvent(r)}}},t.prototype.et=function(t,n){var i;if(void 0===t.status){var r=null===(i=t.detail)||void 0===i?void 0:i.analytics;void 0!==r&&(t.status=j.analytics,n.recordStatusChangeEvent({id:t.type,status:t.status,props:e({},r)}))}},t.prototype.it=function(t,n){this.N(n,t)&&this.K(t,j.deactivated,n)},t.prototype.rt=function(t,n){void 0===t.status&&void 0===this.q(n,t)&&this.K(t,j.unknown,n)},t.prototype.Z=function(t,n){var e;if(void 0!==(null===(e=t.detail)||void 0===e?void 0:e.reject))try{t.detail.reject(n),h()&&gt.error(n)}catch(t){gt.error(t)}},t.prototype.ot=function(t,n){var e=new Error('Invalid account ID: "'.concat(n.id,'"'));this.$(t,e,n)},t.ut=function(t){return"string"==typeof t&&!["","undefined","true","false"].includes(t.trim())},t.prototype.ct=function(n,e,i){var r;t.ut(e.id)?(this.nt(n,e),this.et(n,e),this.rt(n,e),this.it(n,e),this.V(n)&&(this.K(n,j.started,e),h()&&gt.info("## Execute event: ".concat(n.type," with initial status ").concat(null!==(r=n.status)&&void 0!==r?r:"undefined")),this.tt(n,e,i))):this.ot(n,e)},t.prototype.st=function(t){var n=new wt(this.globalContext,this.rootName).use(St),e=t.use(xt);n.forEach((function(n,i){var r;if(!e.has(i)){var o=n.map((function(t){var n=u(t,2),e=n[0],i=n[1];return new CustomEvent(e,{detail:i})}));(r=t.queue).unshift.apply(r,c([],u(o),!1)),t.update(xt,(function(t){return t.add(i)}))}}))},t.prototype.lt=function(t,n,e){var i=this;this.st(t),t.queue.forEach((function(e){return i.ct(e,t,n)}))},t.prototype.vt=function(t,n){t.status=n,t.statusEvents=null!=t.statusEvents?t.statusEvents:[],t.statusEvents.push(new CustomEvent(n))},t.prototype.ft=function(t,n,i,r){var o,a,u=new CustomEvent("now").timeStamp,c=null===(o=t.statusEvents)||void 0===o?void 0:o.find((function(t){return t.type===j.started})),s=null!=c?u-c.timeStamp:void 0;i.recordStatusChangeEvent({id:t.type,status:n,props:e(e({},r),{source:null===(a=t.detail)||void 0===a?void 0:a.source,timers:{sinceCreated:u-t.timeStamp,sinceStarted:s}})})},t.prototype.K=function(t,n,e,i){var r;t.status!==n&&(h()&&gt.info("### Update ".concat(t.type," from ").concat(null!==(r=t.status)&&void 0!==r?r:"undefined"," to ").concat(n)),this.vt(t,n),this.ft(t,n,e,i))},t.prototype.ht=function(){var t=this,n=new Map;return this.globalContext[this.rootName].forEach((function(e,i){return n.set(i,new pt(i,{globalContext:t.globalContext,rootName:t.rootName}))})),n},t.prototype.wt=function(t){var n;if(!h()){var e=null!==(n=t.store.get(l))&&void 0!==n?n:[];if(e.length>150){var i=e.slice(-100);t.store.set(l,i)}}},t.prototype.yt=function(t){var n,e=null!==(n=t.store.get(l))&&void 0!==n?n:[];e.push.apply(e,c([],u(t.queue.filter((function(t){return void 0!==t.status&&Ct.includes(t.status)}))),!1)),t.store.set(l,e)},t.prototype.bt=function(t){var n;(n=t.queue).splice.apply(n,c([0,t.queue.length],u(t.queue.filter((function(t){return void 0===t.status||!Ct.includes(t.status)}))),!1))},t.prototype.gt=function(){var t=this;this.ht().forEach((function(n){t.yt(n),t.wt(n),t.bt(n)}))},t.prototype._t=function(t){return null==t?void 0:t.filter((function(t){var n,e;return(null===(n=t.detail)||void 0===n?void 0:n.source)!==S.internal&&(null===(e=t.detail)||void 0===e?void 0:e.source)!==S.apstag&&t.status!==j.waiting}))},t.prototype.Et=function(t){var n,e=this._t(t);return null!==(n=null==e?void 0:e.length)&&void 0!==n?n:0},t.prototype.St=function(t){var n=this.Et(t);this.H(f,n)},t.prototype.xt=function(){var t=this,n="_internal/recentDispatches";this.H(n,1);var e=this.B(n);if(e>1e4)throw new Error("Too many dispatches. Aborting");e%100==0&&new wt(this.globalContext,this.rootName).recordGenericEvent({id:"C.l.D.thr",props:{recentDispatchesCount:e}}),setTimeout((function(){t.G(n)}),100)},t.prototype.P=function(t){var n,e,i,r,o,a=this,u=t.reason;try{this.xt(),h()&&gt.info('# Dispatch from method "'.concat(u.method,'" on event "').concat(null!==(e=null===(n=u.events)||void 0===n?void 0:n[0].type)&&void 0!==e?e:"undefined",'" with source "').concat(null!==(o=null===(r=null===(i=u.events)||void 0===i?void 0:i[0].detail)||void 0===r?void 0:r.source)&&void 0!==o?o:"undefined",'"\n_________________________________________')),this.St(u.events);var c=new wt(this.globalContext,this.rootName);this.ht().forEach((function(t){return a.lt(t,c,u)})),this.gt()}catch(t){throw new wt(this.globalContext,this.rootName).recordErrorEvent({id:"C.l.D.dis",error:t}),t}},t}(),Rt=function(){function t(t,n){this.globalContext=t,this.rootName=n}return t.prototype.subscribe=function(t){try{var n=new wt(this.globalContext,this.rootName),e=null!=n.store.get(d)?n.store.get(d):new Map;n.store.set(d,new Map(c(c([],u(e),!1),u(t),!1)))}catch(t){throw new wt(this.globalContext,this.rootName).recordErrorEvent({id:"Core.library.Subscriber.subscribe",error:t}),t}},t}(),kt=function(){function t(t,n){this.globalContext=t,this.rootName=n}return t.prototype.populate=function(){try{var t=new wt(this.globalContext,this.rootName),n=!1;try{n=JSON.parse(t.read(st))}catch(t){}if(n)return;t.write(st,JSON.stringify(!0)),this.populateFromPrependStore(),this.populateFromQueryParams()}catch(t){new wt(this.globalContext,this.rootName).recordErrorEvent({id:"Core.library.Populator.populate",error:t})}},t.prototype.populateFromPrependStore=function(){var t=this;this.globalContext[this.rootName].forEach((function(n,e){var i,r,o=new pt(e,{globalContext:t.globalContext,rootName:t.rootName}),a=null!==(r=o.read(ct,{persist:!0}))&&void 0!==r?r:"[]";o.write(ct,JSON.stringify([]));try{var s=JSON.parse(a);if(0===s.length)return;(i=o.queue).push.apply(i,c([],u(s.map(jt)),!1))}catch(t){console.error("Error processing prepended events",t)}}))},t.prototype.populateFromQueryParams=function(){var t,n,e=null===(n=null===(t=this.globalContext)||void 0===t?void 0:t.location)||void 0===n?void 0:n.search,i=new URLSearchParams(e),r=this.globalContext[this.rootName],o=r.get(mt);It(i,"aps.trigger").forEach((function(t){o.queue.push(jt(t))})),It(i,"aps.triggerFor",!0).forEach((function(t){void 0!==t.accountId&&r.has(t.accountId)&&r.get(t.accountId).queue.push(jt(t))}));var a=It(i,"aps_event");r.forEach((function(t){a.forEach((function(n){t.queue.push(jt(n))}))}))},t}(),It=function(t,n,e){void 0===e&&(e=!1);var i=t.getAll(n),r=[];return i.forEach((function(t){var n,i=t.split(",");e&&(n=i.shift());var o=i.shift();if(void 0!==o&&o.length>0){var a=decodeURIComponent(i.join(",")),u=void 0;if(a.length>0)try{u=JSON.parse(a)}catch(t){console.error("Error processing query param event",o,u)}r.push({eventName:o.replace(/_/g,"/"),eventDetail:u,accountId:n})}})),r},jt=function(t){var n;return new CustomEvent(t.eventName,{detail:e({},null!==(n=t.eventDetail)&&void 0!==n?n:{})})},Ot={globalContext:window,rootName:"_aps"},Pt=function(){function t(t,n,e){this.ID=t,this.rootName=e,this.globalContext=n,this.clear()}return t.prototype.clear=function(){var t=this;new wt(this.globalContext,this.rootName).update(St,(function(n){return n.delete(t.ID),n}))},t.prototype.recordListener=function(t,n){var e=this;new wt(this.globalContext,this.rootName).update(St,(function(i){var r=i.get(e.ID);return void 0!==r?r.push([t.name,n]):i.set(e.ID,[[t.name,n]]),i}))},t}(),Mt=function(){function t(t,n){void 0===t&&(t=Ot.globalContext),void 0===n&&(n=Ot.rootName),this.dispatcher=new At(t,n),this.equiper=new yt(t,n,this.dispatcher),this.subscriber=new Rt(t,n),this.populator=new kt(t,n),this.globalContext=t,this.rootName=n}return t.prototype.createAccount=function(t){var n;if(void 0===t)throw new Error("accountID must be provided");this.globalContext[this.rootName]=null!==(n=this.globalContext[this.rootName])&&void 0!==n?n:new Map;var e=this.globalContext[this.rootName],i={store:new Map,queue:[]};return!1===e.has(t)&&e.set(t,i),new pt(t,{globalContext:this.globalContext,rootName:this.rootName})},t.prototype.subscribe=function(t){this.subscriber.subscribe(t)},t.prototype.equip=function(){this.equiper.equip()},t.prototype.dispatch=function(t){var n=t.reason;this.dispatcher.P({reason:n})},t.prototype.populate=function(){this.populator.populate()},t.prototype.load=function(t){var n=t.listeners;this.equip(),this.subscribe(n),this.dispatch({reason:{method:E.direct}}),this.populate()},t.prototype.registerEventSource=function(t){return this.equip(),new Pt(t,this.globalContext,this.rootName)},t}(),Tt="vnd_prx_segments",Dt="aps_targeting_comscore",Nt=new ot({scope:"cxm",object:"comscore",action:"set",handler:function(t){var n=t.account;return t.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(t){return[2,{status:Lt(n)}]}))}))}}),Lt=function(t){var n=t.readSessionStorage(Dt);if(t.deleteSessionStorage(Dt),null==n)return x.cancelled;try{var e=JSON.parse(n)[Tt];if(null==e)throw new Error;return t.globalContext.googletag.pubads().getSlots().forEach((function(t){t.setTargeting(Tt,e)})),x.completed}catch(t){throw new Error("Malformed targeting object at ".concat(Dt))}},Ut="aps_targeting_ias",qt=new ot({scope:"cxm",object:"ias",action:"set",handler:function(t){var n=t.account;return t.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(t){return[2,{status:zt(n)}]}))}))}}),zt=function(t){var n=t.readSessionStorage(Ut);if(t.deleteSessionStorage(Ut),null==n)return x.cancelled;try{var e=JSON.parse(n),i=t.globalContext.googletag;i.pubads().getSlots().forEach((function(t){var n=e.targeting.slots[t.getSlotElementId()];null!=n&&Object.keys(n).forEach((function(e){t.setTargeting(e,n[e])}))}));var r=e.targeting,o=r.brandSafety,a=r.fr,u=r.custom;return null!=o&&Object.keys(o).forEach((function(t){i.pubads().setTargeting(t,o[t])})),null!=u&&Object.keys(u).forEach((function(t){var n=u[t];Array.isArray(n)?n.forEach((function(n){i.pubads().setTargeting(t,n)})):i.pubads().setTargeting(t,n)})),null!=a&&i.pubads().setTargeting("fr",a),x.completed}catch(t){throw new Error("Malformed targeting object at ".concat(Ut))}},Ft="aps_targeting_illuma",Bt=new ot({scope:"cxm",object:"illuma",action:"set",handler:function(t){var n=t.account;return t.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(t){return[2,{status:Vt(n)}]}))}))}}),Vt=function(t){var n=t.readSessionStorage(Ft);if(t.deleteSessionStorage(Ft),null==n)return x.cancelled;var e=JSON.parse(n).results;if(null==e)throw new Error("Malformed targeting object at ".concat(Ft));var i=t.globalContext.googletag;return Object.keys(e).forEach((function(t){var n=e[t];i.pubads().setTargeting("".concat("illuma_").concat(t),JSON.stringify(n))})),x.completed},Jt=new ot({scope:"cxm",object:"contextual",action:"set",handler:function(t){var n=t.account;return t.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,Promise.all([n.recordListener(Nt),n.recordListener(qt),n.recordListener(Bt)])];case 1:return t.sent(),[2,{status:x.completed}]}}))}))}}),Ht=at([Nt,Jt,qt,Bt]),Gt={key:"customPlacement/hints",default:{}},Wt={key:"customPlacement/bidResponses",default:{}},Kt=function(){function t(t,n,i){var r=this;this.CLICK_PREFIX_MACRO="%%CLICK_URL_PREFIX%%",this.PROGRAM_CUSTOM_PLACEMENTS="customPlacements",this.getPageStyles=function(t){return void 0===t&&(t=["p","h1","h2"]),t.map(r.getTagStyle).filter((function(t){return Object.keys(t).length>0})).reduce((function(t,n){return e(e({},t),n)}),{})},this.getContainerStyles=function(t){try{if(!t)return{};var n=window.getComputedStyle(t),e="--aps-custom-container-",i=new Map;return i.set("".concat(e,"width"),n.width),i.set("".concat(e,"margin"),n.margin),i.set("".concat(e,"padding"),n.padding),Object.fromEntries(i.entries())}catch(t){return{}}},this.slotProps=t,this.rawResponse=n,this.Ct=i}return t.prototype.getTagStyle=function(t){var n=this.Ct.getElementsByTagName(t);if(n&&n[0]){var e=window.getComputedStyle(this.Ct.getElementsByTagName(t)[0]),i=new Map,r="--aps-custom-page-";return i.set("".concat(r).concat(t,"-color"),e.color),i.set("".concat(r).concat(t,"-fontFamily"),e.fontFamily),i.set("".concat(r).concat(t,"-fontSize"),e.fontSize),i.set("".concat(r).concat(t,"-fontWeight"),e.fontWeight),i.set("".concat(r).concat(t,"-lineHeight"),e.lineHeight),Object.fromEntries(i)}return{}},t.prototype.getDynamicFrameBodyHeight=function(t,n,i){var r;if(n){null==n||n.contentWindow;var o=(null==n?void 0:n.contentDocument)||(null===(r=null==n?void 0:n.contentWindow)||void 0===r?void 0:r.document),a=null==o?void 0:o.body.scrollHeight;n.style.height="".concat(a,"px");try{var u=e(e({},this.getPageStyles()),this.getContainerStyles(t));Object.keys(u).forEach((function(t){null==o||o.documentElement.style.setProperty(t,u[t])}))}catch(t){}}},t.prototype.render=function(t){return this.At(t)},t.prototype.At=function(t){var n,e,i,r=this;if(!this.rawResponse||!this.slotProps)return!1;try{var o=this.rawResponse.size.split("x"),a=(null===(n=this.rawResponse.targeting)||void 0===n?void 0:n.amzniid)||this.rawResponse.amzniid,u=(null===(e=this.rawResponse.targeting)||void 0===e?void 0:e.amznadm)||this.rawResponse.amznadm;if(!a)return!1;var c=this.slotProps.Rt;if(this.slotProps.location&&this.slotProps.id){var s=this.Ct.createElement("div");null===(i=this.Ct.getElementById(this.slotProps.id))||void 0===i||i.insertAdjacentElement(this.slotProps.location,s),c=s}if(!c)return!1;var d=this.Ct.createElement("iframe");return d.style.marginLeft="0",d.style.marginTop="0",d.style.height="".concat(o[1],"px"),d.style.width="100%",d.setAttribute("data-testid","amzn-asr-ad"),d.setAttribute("scrolling","no"),d.setAttribute("frameborder","0"),d.onload=function(){return r.getDynamicFrameBodyHeight(c,d,u?"amznadm":"admi")},d.srcdoc=u||"",t&&t.clickPrefix&&(d.srcdoc=d.srcdoc.replace(this.CLICK_PREFIX_MACRO,t.clickPrefix)),c.appendChild(d),this.updateSlotAttribute("status","rendered"),!0}catch(t){throw new Error("CustomPlacements: Error while rendering")}},t.prototype.updateSlotAttribute=function(t,n){var e;null===(e=this.slotProps.Rt)||void 0===e||e.setAttribute("data-aps-custom-".concat(t),n)},t}(),$t={key:"customPlacement/timings",default:[]},Qt=function(t,n,e,i){void 0===e&&(e=0),void 0===i&&(i=0);try{var r={effectiveType:null==n?void 0:n.effectiveType,rtt:null==n?void 0:n.rtt,downlink:null==n?void 0:n.downlink},o=function(t,n,e){try{var i=isNaN(n)||0===n?t.body.clientWidth:n,r=isNaN(e)||0===e?t.body.clientHeight:e;return"".concat(i,"x").concat(r)}catch(t){}return"x"}(t,e,i);return{connection:r,screen:o}}catch(t){return{}}},Zt=function(t,n,e){t.update($t,(function(t){return t.push({time:performance.now(),key:"".concat(n,"/").concat(e)}),t}))},Yt="customPlacements",Xt=new ot({scope:"customPlacement",object:"hint",action:"process",validators:{},handler:function(t){var n=t.account;return t.detail,t.customEvent,r(void 0,void 0,void 0,(function(){var t,e,i;return o(this,(function(r){return t=function(t){var e;Zt(n,Yt,"hint/process/".concat(t));var i=n.use(Gt),r=n.use(Wt);null!==(e=i[t].isRendered)&&void 0!==e&&e||(Object.values(r).forEach((function(e){var r;if(null===(r=e.isRendered)||void 0===r||!r){var o=n.globalContext.document.getElementById(t);if(null!=o){var a=new Kt({id:t,Rt:o},e,n.globalContext.document);Zt(n,Yt,"widget/render/".concat(t)),a.render(i[t].hintMetadata)&&(e.isRendered=!0,i[t].isRendered=!0)}}})),n.update(Gt,(function(){return i})),n.update(Wt,(function(){return r})))},e=n.use(Gt),Object.keys(e).filter((function(t){return e[t].default})).forEach(t),Object.keys(e).filter((function(t){return!e[t].default})).forEach(t),[2,{status:x.completed,analytics:{browserInfo:Qt(n.globalContext.document,null===(i=n.globalContext.navigator)||void 0===i?void 0:i.connection,n.globalContext.innerWidth,n.globalContext.innerHeight)}}]}))}))}}),tn=new ot({scope:"customPlacement",object:"hint",action:"define",validators:{},handler:function(t){var n=t.account;t.detail;var e=t.customEvent;return r(void 0,void 0,void 0,(function(){var t,i,r,a,u,c,s;return o(this,(function(o){if(void 0===(null===(c=e.detail)||void 0===c?void 0:c.id))throw new Error("Hint `id` must be defined");return t=e.detail,i=t.id,r=t.isDefault,a=t.hintMetadata,Zt(n,Yt,"hint/define/".concat(i)),(u=n.use(Gt))[i]={default:"default"===r,isRendered:!1,hintMetadata:null!=a?a:{}},n.update(Gt,(function(){return u})),n.recordListenerNonBlocking(Xt),[2,{status:x.completed,analytics:{browserInfo:Qt(n.globalContext.document,null===(s=n.globalContext.navigator)||void 0===s?void 0:s.connection,n.globalContext.innerWidth,n.globalContext.innerHeight)}}]}))}))}}),nn={key:"customPlacement/placementResponseDispatched",default:!1},en={key:"customPlacement/placementResponse",default:void 0},rn={key:"customPlacement/contextURL",default:void 0},on={key:"customPlacement/placementEndpoint",default:"https://c.aps.amazon-adsystem.com/e/placements"},an={key:"ad/context",default:void 0},un=new ot({scope:"customPlacement",object:"placement",action:"fetch",validators:{},handler:function(t){var n=t.account;return t.detail,t.customEvent,r(void 0,void 0,void 0,(function(){var t,e;return o(this,(function(i){switch(i.label){case 0:return Zt(n,Yt,"placementFetch/start"),[4,sn(n)];case 1:return t=i.sent(),Zt(n,Yt,"placementFetch/end"),[2,{status:x.completed,value:{placementResponse:t},analytics:{browserInfo:Qt(n.globalContext.document,null===(e=n.globalContext.navigator)||void 0===e?void 0:e.connection,n.globalContext.innerWidth,n.globalContext.innerHeight)}}]}}))}))}});function cn(t){var n=t.use(an);return void 0!==n&&"user"in n?(n.user,i(n,["user"])):n}function sn(t){return r(this,void 0,void 0,(function(){var n,e,i,r,a;return o(this,(function(o){switch(o.label){case 0:return n={ortb2:cn(t)},e=t.use(rn),i=t.use(on),r=function(t,n){try{var e=null!=n?n:function(t){var n,e;try{if(void 0!==(null===(n=t.globalContext.top)||void 0===n?void 0:n.location.href))return null===(e=t.globalContext.top)||void 0===e?void 0:e.location.href}catch(t){}try{if(t.globalContext.top!==t.globalContext.self)return t.globalContext.document.referrer}catch(t){}}(t);if(void 0!==e)return encodeURIComponent(e)}catch(t){}return""}(t,e),a=encodeURIComponent(JSON.stringify(n)),[4,fetch("".concat(i,"?account=").concat(t.id,"&u=").concat(r,"&sg=").concat(a))];case 1:return[4,o.sent().json()];case 2:return[2,o.sent()]}}))}))}var dn={key:"customPlacement/bidEndpoint",default:"c.aps.amazon-adsystem.com"},ln={key:"customPlacement/bidIsKey",default:"86355855cc6ed9e335d0382c8563aa10"},vn=new ot({scope:"customPlacement",object:"bids",action:"fetch",validators:{},handler:function(t){var n=t.account;return t.detail,t.customEvent,r(void 0,void 0,void 0,(function(){var t,e,i,r;return o(this,(function(o){switch(o.label){case 0:return t=Qt(n.globalContext.document,null===(i=n.globalContext.navigator)||void 0===i?void 0:i.connection,n.globalContext.innerWidth,n.globalContext.innerHeight),void 0===(null===(r=n.globalContext.apstag)||void 0===r?void 0:r.clientFetchBids)?[2,{status:x.waiting,analytics:{browserInfo:t}}]:(Zt(n,Yt,"fetchBids/start"),[4,fn(n)]);case 1:return e=o.sent(),Zt(n,Yt,"fetchBids/end"),[2,{status:x.completed,value:{bidResponses:e},analytics:{browserInfo:t}}]}}))}))}});function fn(t){return r(this,void 0,void 0,(function(){var n,e,i;return o(this,(function(r){switch(r.label){case 0:return n={slots:[{slotID:"93b7dd52-a8ce-11ed-afa1-0242ac120002:1",sizes:[[999,999]]}],timeout:6e4,_endpointDomain:t.use(dn),params:{program:"apscustom",is:t.use(ln)}},e={pubID:t.id,isSelfServePub:36===t.id.length,deals:!0},i=t.use(rn),[4,new Promise((function(r){var o;null===(o=t.globalContext.apstag)||void 0===o||o.clientFetchBids(n,(function(t){r(t)}),{initConfig:e,contextURL:i})}))];case 1:return[2,r.sent()]}}))}))}var hn=new ot({scope:"customPlacement",object:"service",action:"enable",validators:{},handler:function(t){var n=t.account;return t.detail,t.customEvent,r(void 0,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return Zt(n,Yt,"service/enable"),n.update(nn,(function(){return!1})),[4,Promise.all([n.recordListener(un).then((function(t){var e=t.placementResponse;pn(n,!0,e),n.update(en,(function(){return e}))})),n.recordListener(vn).then((function(t){t.bidResponses.forEach((function(t){var e,i,r=null!==(i=null===(e=t.targeting)||void 0===e?void 0:e.amzniid)&&void 0!==i?i:t.amzniid,o=!1;if(""!==r){var a=n.use(Wt);a[r]=t,n.update(Wt,(function(){return a})),o=!0}pn(n,!1,{aps:[{active:o,dispatchEventOnValidBid:!0}]})}))})).then((function(){n.recordListenerNonBlocking(Xt)}))])];case 1:return e.sent(),[2,{status:x.completed,analytics:{browserInfo:Qt(n.globalContext.document,null===(t=n.globalContext.navigator)||void 0===t?void 0:t.connection,n.globalContext.innerWidth,n.globalContext.innerHeight)}}]}}))}))}});function pn(t,n,e){var i;if(!t.use(nn)){var r=null===(i=null==e?void 0:e.aps)||void 0===i?void 0:i.find((function(t){return t.dispatchEventOnValidBid}));n&&void 0!==r||(Zt(t,Yt,"placementResponseEvent/dispatch"),t.record("customPlacement/placement/didRespond",e).catch((function(t){})),t.update(nn,(function(){return!0})))}}var mn=new Map(c([],u(at([tn,vn,Xt,hn,un])),!1)),wn=function(t){function e(n){var e=t.call(this,n.message)||this;return e.message='Could not read vendor data because: "'.concat(n.message,'"'),e}return n(e,t),e}(Error),yn={key:"cxm/vendors",default:{}},bn={nonId:{noExtraDefaults:!0,source:"liveintent.com",atype:3},bidswitch:{source:"bidswitch.net",atype:3},openx:{source:"openx.net",atype:3},magnite:{source:"rubiconproject.com",atype:3},medianet:{source:"media.net",atype:3},pubmatic:{source:"pubmatic.com",atype:3},index:{source:"liveintent.indexexchange.com",atype:3},uid2:{source:"uidapi.com",atype:3},sovrn:{source:"liveintent.sovrn.com",atype:3},thetradedesk:{source:"adserver.org",atype:1},vidazoo:{source:"liveintent.vidazoo.com",atype:3},triplelift:{source:"liveintent.triplelift.com",atype:3},sharethrough:{source:"sharethrough.com",atype:3},sonobi:{source:"liveintent.sonobi.com",atype:3}};function gn(t){var n=[],e={user:{ext:{eids:n}}};return Object.entries(bn).forEach((function(e){var i=e[0],r=e[1];if(void 0!==t[i]){var o={source:r.source,uids:[{id:t[i],atype:r.atype}]};!0!==r.noExtraDefaults&&(o.uids[0].ext={provider:"liveintent.com"}),n.push(o)}})),e}var _n="cxm/liveintent/set",En="cxm/arcspan/set",Sn="cxm/anomymised/set",xn=new Map([["cxm/vendors/set",function(t){var n=t.account;return r(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,Promise.all([n.record(_n),n.record(En),n.record(Sn)])];case 1:return t.sent(),[2,x.completed]}}))}))}],[_n,function(t){var n=t.account;return t.customEvent,r(void 0,void 0,void 0,(function(){var t;return o(this,(function(i){try{t=function(t){var n,e,i;try{i=t.readLocalStorage("__tamLIResolveResult")}catch(t){if(t instanceof Error)throw new wn(t)}if(null!=i&&(void 0===t.globalContext.liModuleEnabled&&(t.globalContext.liModuleEnabled=Math.random()<.95,null===(e=null===(n=t.globalContext)||void 0===n?void 0:n.googletag)||void 0===e||e.cmd.push((function(){t.globalContext.googletag.pubads().setTargeting("li-module-enabled",t.globalContext.liModuleEnabled?["on"]:["off"])}))),t.globalContext.liModuleEnabled)){var r=void 0;try{r=gn(JSON.parse(i))}catch(t){r=gn(JSON.parse(decodeURIComponent(i)))}if(void 0!==r)return{data:{default:r}}}}(n)}catch(t){if(t instanceof wn)return[2,{status:x.cancelled,analytics:{statusReason:t.message}}];throw t}return void 0===t?[2,x.cancelled]:(n.update(yn,(function(n){var i;return e(e({},n),((i={}).liveintent=t,i))})),[2,x.completed])}))}))}],[En,function(t){var n=t.account;return r(void 0,void 0,void 0,(function(){var t;return o(this,(function(i){return t=function(t){var n=t.globalContext.arcobj1,e=t.globalContext.arcobj2,i=[],r=[],o=[];if(void 0!==n){if(void 0!==n.page_iab_codes.text&&(i=i.concat(n.page_iab_codes.text)),void 0!==n.page_iab_codes.images&&(i=i.concat(n.page_iab_codes.images)),void 0!==n.page_keywords){var a="string"==typeof n.page_keywords?n.page_keywords.split(","):n.page_keywords;o=o.concat(a),void 0!==(null==e?void 0:e.compcohorts)&&(o=o.concat(e.compcohorts))}void 0!==n.page_iab_newcodes.text&&(r=c([],u(new Set(c(c([],u(r),!1),u(n.page_iab_newcodes.text),!1))),!1)),void 0!==n.page_iab_newcodes.images&&(r=c([],u(new Set(c(c([],u(r),!1),u(n.page_iab_newcodes.images),!1))),!1));var s={name:"arcspan",segment:[],ext:{segtax:6}};r.forEach((function(t){s.segment=s.segment.concat({id:t})}));var d={data:[]};return d.data=d.data.concat(s),{data:{default:{site:{name:"arcspan",cat:i,sectioncat:i,pagecat:i,keywords:o.toString(),content:d,domain:new URL(t.globalContext.location.href).hostname,page:t.globalContext.location.href,ref:t.globalContext.document.referrer}}}}}}(n),void 0===t?[2,x.cancelled]:(n.update(yn,(function(n){return e(e({},n),{arcspan:t})})),[2,x.completed])}))}))}],[Sn,function(t){var n=t.account;return t.customEvent,r(void 0,void 0,void 0,(function(){var t;return o(this,(function(i){try{t=function(t){var n;try{n=t.readLocalStorage("cohort_ids")}catch(t){if(t instanceof Error)throw new wn(t)}if("string"==typeof n){for(var e=JSON.parse(n),i="",r=0;r<e.length;r++){var o=e[r];i+="perid=".concat(o),i+=r<e.length-1?",":""}return{data:{default:{user:{keywords:i}}}}}}(n)}catch(t){if(t instanceof wn)return[2,{status:x.cancelled,analytics:{statusReason:t.message}}];throw t}return void 0===t?[2,x.cancelled]:(n.update(yn,(function(n){var i;return e(e({},n),((i={}).anonymised=t,i))})),[2,x.completed])}))}))}]]),Cn={key:"idVendors/ids",default:void 0},An={key:"idVendors/metadata",default:void 0};function Rn(t,n){var i=t(n);return null!=i?(n.update(Cn,(function(t){return e(e({},t),i)})),{status:x.completed}):{status:x.cancelled}}function kn(t,n){var i=t(n);return null!=i?(n.update(An,(function(t){return e(e({},t),i)})),{status:x.completed}):{status:x.cancelled}}var In=function(){function t(t){var n=this;return this.parser=null,this.keys=null,this.account=null,this.read=function(t){return null},this.anyAttributesMissing=function(){return[n.parser,n.keys,n.account,n.egressNodeKey,n.read].some((function(t){return null==t}))},this.egressNodeKey=t,this}return t.prototype.using=function(t){return this.parser=t,this},t.prototype.fromCookieKeys=function(t){var n=this;return this.keys=t,this.read=function(t){var e;return null===(e=n.account)||void 0===e?void 0:e.readCookieStorage(t)},this},t.prototype.fromLocalStorageKeys=function(t){var n=this;return this.keys=t,this.read=function(t){var e;return null===(e=n.account)||void 0===e?void 0:e.readLocalStorage(t)},this},t.prototype.fromCookieOrLocalStorageKeys=function(t){var n=this;return this.keys=t,this.read=function(t){var e,i,r;return null!==(i=null===(e=n.account)||void 0===e?void 0:e.readCookieStorage(t))&&void 0!==i?i:null===(r=n.account)||void 0===r?void 0:r.readLocalStorage(t)},this},t.prototype.fromLocalStorageOrCookieKeys=function(t){var n=this;return this.keys=t,this.read=function(t){var e,i,r;return null!==(i=null===(e=n.account)||void 0===e?void 0:e.readLocalStorage(t))&&void 0!==i?i:null===(r=n.account)||void 0===r?void 0:r.readCookieStorage(t)},this},t.prototype.forAccount=function(t){return this.account=t,this},t.prototype.getRunner=function(){var t=this;if(this.anyAttributesMissing())throw new Error("Missing attribute(s) - unable to return a runner.");return function(){var n,e,i;if(t.anyAttributesMissing())throw new Error("Missing attribute(s) - runner execution failed.");try{for(var r=a(t.keys),o=r.next();!o.done;o=r.next()){var u=o.value,c=t.parser(t.read(u));if(null!=c)return(i={})[t.egressNodeKey]=c,i}}catch(t){n={error:t}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(n)throw n.error}}return null}},t}(),jn=function(t){return"string"==typeof t?t:null},On=function(t){return"string"==typeof t?atob(t):null};function Pn(t){return function(n){return"string"==typeof n?t(JSON.parse(n)):null}}function Mn(t){return function(n){return"string"==typeof n?Pn(t)(decodeURIComponent(n)):null}}var Tn,Dn="33across",Nn=new ot({scope:"idVendors",object:"33across",action:"get",handler:function(t){var n=t.account;return t.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(t){return[2,Rn(Ln,n)]}))}))}}),Ln=function(t){var n,e=t.readLocalStorage("33acrossId");if(e&&e.length>1500)throw new Error("Id length of ".concat(100*Math.ceil(e.length/100)," (normalized) exceeds ").concat(1500," character limit"));return null!=e?((n={})[Dn]=decodeURIComponent(e),n):null},Un="audigent",qn=new ot({scope:"idVendors",object:"audigent",action:"get",handler:function(t){var n=t.account;return t.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(t){return[2,Rn(zn,n)]}))}))}}),zn=function(t){var n,e,i=null!==(e=t.readLocalStorage("hadronId"))&&void 0!==e?e:t.readLocalStorage("auHadronId");return null!=i?((n={})[Un]=i,n):null},Fn=["cto_bidid"],Bn=new ot({scope:"idVendors",object:"criteo",action:"get",handler:function(t){var n=t.account;return t.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(t){return[2,Rn(new In("criteo").using(jn).fromLocalStorageKeys(Fn).forAccount(n).getRunner(),n)]}))}))}}),Vn="id5id",Jn=new ot({scope:"idVendors",object:"id5",action:"get",handler:function(t){var n=t.account;return t.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(t){return[2,Rn(Hn,n)]}))}))}}),Hn=function(t){var n,e=t.readLocalStorage(Vn);return null!=e?((n={}).id5=JSON.parse(decodeURIComponent(e)).universal_uid,n):null},Gn="liveRamp",Wn="_lr_env",Kn="idl_env",$n="apstagLiveRampTimestamp";!function(t){t[t.oldTimestamp=0]="oldTimestamp",t[t.newTimestamp=1]="newTimestamp",t[t.noTimestamp=2]="noTimestamp"}(Tn||(Tn={}));var Qn,Zn=new ot({scope:"idVendors",object:"liveramp",action:"get",handler:function(t){var n=t.account;return t.customEvent,r(void 0,void 0,void 0,(function(){var t,e,i,r;return o(this,(function(o){return t=Xn(Yn(n),n),e=function(){var n;return null!=t?((n={})[Gn]=t.id,n):null},i=function(){var n;return null!=t?((n={})[Gn]=t.newGen,n):null},[2,(r=Rn(e,n)).status===x.completed?kn(i,n):r]}))}))}}),Yn=function(t){var n=t.readLocalStorage(Wn);if(null!=n)return n;var e=t.readCookieStorage(Wn);if(null!=e)return e;var i=t.readLocalStorage(Kn);if(null!=i)return i;var r=t.readCookieStorage(Kn);return null!=r?r:null},Xn=function(t,n){if(null!=t&&""!==t)try{var e=JSON.parse(atob(decodeURIComponent(t))),i={id:e.envelope,newGen:Tn.noTimestamp};if(null!=e.timestamp){var r=n.readLocalStorage($n);null==r||r<e.timestamp?(i.newGen=Tn.newTimestamp,n.writeLocalStorage($n,e.timestamp.toString())):i.newGen=Tn.oldTimestamp}return i}catch(n){return{id:decodeURIComponent(t),newGen:Tn.noTimestamp}}return null},te={},ne=new Set([Vn,Kn,Wn]),ee={},ie=new ot({scope:"idVendors",object:"lockr",action:"get",handler:function(t){var n=t.account;return t.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(t){return[2,Rn(re,n)]}))}))}}),re=function(t){var n=t.readLocalStorage("lockr_identity_providers");if(n){var e={};return n.split(",").filter((function(t){return!ne.has(t)})).forEach((function(n){var i=oe(t,n);null!==i&&(e[te[n]||n]=decodeURIComponent(i))})),e}return null},oe=function(t,n){var e=t.readLocalStorage(n);if(!e)return null;if(ee[n])try{e=JSON.parse(decodeURIComponent(e)),ee[n].split(".").forEach((function(t){e=null==e?void 0:e[t]}))}catch(t){throw new Error("Malformed json at ".concat(n,": ").concat(t))}return e||null},ae="lotame",ue=new ot({scope:"idVendors",object:"lotame",action:"get",handler:function(t){var n=t.account;return t.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(t){return[2,Rn(ce,n)]}))}))}}),ce=function(t){var n,e=t.readLocalStorage("panoramaId");return null!=e?((n={})[ae]=e,n):null},se="pair",de=["pairId"],le=["_lr_pairId"],ve=function(t){var n,e,i;return(null===(n=null==t?void 0:t.envelope)||void 0===n?void 0:n.pop)&&null!==(i=null===(e=null==t?void 0:t.envelope)||void 0===e?void 0:e.pop())&&void 0!==i?i:null},fe=new ot({scope:"idVendors",object:"pair",action:"get",handler:function(t){var n=t.account;return t.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(t){return[2,Rn((function(t){var n;return null!==(n=new In(se).using(On).fromCookieOrLocalStorageKeys(de).forAccount(t).getRunner()())&&void 0!==n?n:new In(se).using(function(t){return function(n){return"string"==typeof n?Pn(t)(atob(decodeURIComponent(n))):null}}(ve)).fromCookieOrLocalStorageKeys(le).forAccount(t).getRunner()()}),n)]}))}))}}),he="pubcommon",pe=["_pubcid","_sharedID"],me=new ot({scope:"idVendors",object:"pubcommon",action:"get",handler:function(t){var n=t.account;return t.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(t){return[2,Rn(new In(he).using(jn).fromLocalStorageOrCookieKeys(pe).forAccount(n).getRunner(),n)]}))}))}}),we="publink",ye=["_publink_srv","_publink","pbjs_publink"],be=new ot({scope:"idVendors",object:"publink",action:"get",handler:function(t){var n=t.account;return t.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(t){return[2,Rn(ge,n)]}))}))}}),ge=function(t){var n,e,i;try{for(var r=a(ye),o=r.next();!o.done;o=r.next()){var u=o.value,c=t.readCookieStorage(u);if(null!=c){var s=void 0;try{s=JSON.parse(c).publink}catch(t){s=c}if(null!=s)return(i={})[we]=s,i}}}catch(t){n={error:t}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(n)throw n.error}}return null},_e=["__uid2_advertising_token"],Ee=function(t){var n,e;return null!==(e=null===(n=null==t?void 0:t.latestToken)||void 0===n?void 0:n.advertising_token)&&void 0!==e?e:null},Se=new ot({scope:"idVendors",object:"uid",action:"get",handler:function(t){var n=t.account;return t.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(t){return[2,Rn(new In("uid").using(Pn(Ee)).fromLocalStorageKeys(_e).forAccount(n).getRunner(),n)]}))}))}}),xe=["pbjs_unifiedID","pbjs-unifiedid"],Ce=function(t){var n;return null!==(n=null==t?void 0:t.TDID)&&void 0!==n?n:null},Ae=new ot({scope:"idVendors",object:"unifiedid",action:"get",handler:function(t){var n=t.account;return t.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(t){return[2,Rn(new In("unifiedid").using(Mn(Ce)).fromLocalStorageOrCookieKeys(xe).forAccount(n).getRunner(),n)]}))}))}}),Re="yahoo",ke="connectId",Ie=new ot({scope:"idVendors",object:"yahoo",action:"get",handler:function(t){var n=t.account;return t.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(t){return[2,Rn(je,n)]}))}))}}),je=function(t){var n,e=t.readLocalStorage(ke);return null!=e&&(e=JSON.parse(e)[ke]),null!=e?((n={})[Re]=e,n):null},Oe=new ot({scope:"idVendors",object:"ids",action:"get",handler:function(t){var n=t.account;return t.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,Promise.all([n.recordListener(Nn),n.recordListener(qn),n.recordListener(Bn),n.recordListener(Jn),n.recordListener(Zn),n.recordListener(ie),n.recordListener(ue),n.recordListener(fe),n.recordListener(me),n.recordListener(be),n.recordListener(Se),n.recordListener(Ae),n.recordListener(Ie)])];case 1:return t.sent(),[2,{status:x.completed}]}}))}))}}),Pe=at([Nn,qn,Bn,Jn,Oe,Zn,ie,ue,fe,me,be,Se,Ae,Ie]),Me="analytics/sampling/set",Te=new Map([[Me,function(t){t.account;var n=t.customEvent;return r(void 0,void 0,void 0,(function(){var t,e,i,r,a;return o(this,(function(o){return void 0===(null===(t=null==n?void 0:n.detail)||void 0===t?void 0:t.rates)?[2,x.cancelled]:(void 0!==(null===(i=null===(e=null==n?void 0:n.detail)||void 0===e?void 0:e.rates)||void 0===i?void 0:i.error)&&b.setEventSamplingRates({error:n.detail.rates.error}),void 0!==(null===(a=null===(r=null==n?void 0:n.detail)||void 0===r?void 0:r.rates)||void 0===a?void 0:a.status)&&b.setEventSamplingRates({feature:n.detail.rates.status}),[2,x.completed])}))}))}],["log/analytics/setSampling",function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(t){throw new Error("log/analytics/setSampling has been deprecated. Will be removed after 3/1/2024.")}))}))}],["log/analytics/setInterval",function(t){t.account;var n=t.customEvent;return r(void 0,void 0,void 0,(function(){var t;return o(this,(function(e){if("number"!=typeof(null===(t=n.detail)||void 0===t?void 0:t.interval))throw new Error("Invalid 'interval' param passed");return b.setEventProcessingInterval(n.detail.interval),[2,x.completed]}))}))}],["log/library/didError",function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(t){throw new Error("log/library/didError has been deprecated. Will be removed after 3/1/2024.")}))}))}],["log/library/didUseFeature",function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(t){throw new Error("log/library/didUseFeature has been deprecated. Will be removed after 3/1/2024.")}))}))}]]),De=new ot({scope:"debug",object:"version",action:"show",handler:function(t){return t.account,t.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(t){return[2,{status:x.completed,value:{LIBRARY_VERSION:s}}]}))}))}}),Ne="debug/events/show",Le="debug/prepend/add",Ue="debug/prepend/remove",qe="debug/store/show",ze="ad/debugSession/start",Fe=new Map([[Ne,function(t){var n=t.account;return r(void 0,void 0,void 0,(function(){var t;return o(this,(function(e){return(t=c(c(c(c([],u((null!=n.store.get(l)?n.store.get(l):[]).map((function(t){return{type:t.type,status:"created",detail:t.detail,timestamp:t.timeStamp}}))),!1),u(n.queue.map((function(t){return{type:t.type,status:"created",detail:t.detail,timestamp:t.timeStamp}}))),!1),u((null!=n.store.get(l)?n.store.get(l):[]).map((function(t){return null!=t.statusEvents?t.statusEvents.map((function(n){return{type:t.type,status:n.type,detail:t.detail,timestamp:n.timeStamp}})):[]})).flat()),!1),u(n.queue.map((function(t){return null!=t.statusEvents?t.statusEvents.map((function(n){return{type:t.type,status:n.type,detail:t.detail,timestamp:n.timeStamp}})):[]})).flat()),!1).filter((function(t){return!t.type.startsWith("debug/")}))).sort((function(t,n){return t.timestamp-n.timestamp})),console.groupCollapsed(" Account ID: ".concat(n.id)),console.table(t),console.groupEnd(),[2,x.completed]}))}))}],[Le,function(t){var n=t.account,e=t.customEvent;return r(void 0,void 0,void 0,(function(){var t,i,r,a,u,c,s;return o(this,(function(o){if(void 0===(null===(c=e.detail)||void 0===c?void 0:c.eventName))throw new Error("Missing event information");return t=null!==(s=n.read(ct,{persist:!0}))&&void 0!==s?s:"[]",i=JSON.parse(t),r=e.detail,a=r.eventName,u=r.eventDetail,i.unshift({eventName:a,eventDetail:u}),n.write(ct,JSON.stringify(i),{persist:!0}),[2,x.completed]}))}))}],["debug/prepend/clear",function(t){var n=t.account;return r(void 0,void 0,void 0,(function(){return o(this,(function(t){return n.delete(ct,{persist:!0}),[2,x.completed]}))}))}],[Ue,function(t){var n=t.account,e=t.customEvent;return r(void 0,void 0,void 0,(function(){var t,i,r,a,u,c;return o(this,(function(o){if(void 0===(null===(u=e.detail)||void 0===u?void 0:u.eventName))throw new Error("Missing event information");return t=null!==(c=n.read(ct,{persist:!0}))&&void 0!==c?c:"[]",i=JSON.parse(t),r=e.detail.eventName,a=i.filter((function(t){return t.eventName!==r})),n.write(ct,JSON.stringify(a),{persist:!0}),[2,x.completed]}))}))}],[qe,function(t){var n=t.account;return r(void 0,void 0,void 0,(function(){var t;return o(this,(function(e){return t=c([],u(n.store.entries()),!1),console.groupCollapsed(" Account ID: ".concat(n.id)),console.table(t),console.groupEnd(),[2,x.completed]}))}))}],[ze,function(t){var n=t.account,e=t.customEvent;return r(void 0,void 0,void 0,(function(){return o(this,(function(t){return function(t){return t.status!==x.waiting}(e)&&(function(t,n){var e;void 0!==(null===(e=t.detail)||void 0===e?void 0:e.minutes)&&function(t,n){var e,i=new Date;t.write(ut,i.setMinutes(Number(i.getMinutes())+Number(null===(e=n.detail)||void 0===e?void 0:e.minutes)).toString(),{persist:!0})}(n,t),function(t){var n;t.globalContext.apstagDEBUG=null!==(n=t.globalContext.apstagDEBUG)&&void 0!==n?n:{},t.globalContext.apstagDEBUG.url=function(t){var n,e,i,r,o=new URL(null!==(i=null===(e=null===(n=null==t?void 0:t.top)||void 0===n?void 0:n.location)||void 0===e?void 0:e.href)&&void 0!==i?i:null===(r=null==t?void 0:t.document)||void 0===r?void 0:r.referrer);return o.searchParams.set("amzn_debug_mode","1"),o.toString()}(t.globalContext)}(n)}(e,n),function(t){return t.queue.filter((function(t){return t.type===ze})).length>1}(n))?[2,x.completed]:function(t){var n=t.read(ut,{persist:!0});return void 0!==n&&new Date>=new Date(Number(n))}(n)?(function(t){t.delete(ut,{persist:!0}),function(t){var n;null===(n=t.globalContext.apstagDEBUG)||void 0===n||delete n.url}(t)}(n),[2,x.completed]):(function(t){t.record(Ne).catch((function(t){})),t.record(qe).catch((function(t){}))}(n),[2,x.waiting])}))}))}],["debug/listeners/show",function(t){var n=t.systemAccount;return r(void 0,void 0,void 0,(function(){var t,e;return o(this,(function(i){return t=n.store.get(d),e=c([],u(t.entries()),!1),console.groupCollapsed(" Listeners"),console.table(e),console.groupEnd(),[2,x.completed]}))}))}]]),Be=[De],Ve=new Map(c(c([],u(Fe),!1),u(at(Be)),!1));!function(t){t[t.unspecifiedUnknown=0]="unspecifiedUnknown",t[t.lowEntropy=1]="lowEntropy",t[t.highEntropy=2]="highEntropy"}(Qn||(Qn={}));var Je=["brands","mobile","platform"],He=["architecture","bitness","fullVersionList","model","platformVersion"];function Ge(t,n,e){return r(this,void 0,void 0,(function(){var i;return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e.getHighEntropyValues(c(c([],u(Je),!1),u(He),!1))];case 1:return i=r.sent(),t.write(n,JSON.stringify(We(i)),{persist:!0}),[3,3];case 2:return r.sent(),[3,3];case 3:return[2,x.completed]}}))}))}function We(t){var n,e,i,r={};return r.architecture=t.architecture,r.bitness=t.bitness,r.mobile=t.mobile?1:0,r.model=t.model,r.source=(i=t,He.some((function(t){return i[t]}))?Qn.highEntropy:Je.some((function(t){return i[t]}))?Qn.lowEntropy:Qn.unspecifiedUnknown),"string"==typeof t.platform&&(r.platform={brand:t.platform,version:null===(n=t.platformVersion)||void 0===n?void 0:n.split(".")}),Array.isArray(t.fullVersionList)?e=t.fullVersionList:Array.isArray(t.brands)&&(e=t.brands),e instanceof Array&&(r.browsers=e.map((function(t){var n;return{brand:t.brand,version:null===(n=t.version)||void 0===n?void 0:n.split(".")}}))),r}var Ke,$e="deviceSignal/sua/set",Qe=new Map([[$e,function(t){var n=t.account;return r(void 0,void 0,void 0,(function(){var t,e,i,r,a;return o(this,(function(o){switch(o.label){case 0:return t="deviceSignal/sua",e=null===(r=n.globalContext.navigator)||void 0===r?void 0:r.userAgentData,"string"==typeof(i=n.read(t,{persist:!0}))?n.write(t,i):e instanceof Object&&function(t,n,e){t.write(n,JSON.stringify(We(e)))}(n,t,e),!1!==(null===(a=n.globalContext.apstag)||void 0===a?void 0:a.isGDPRRegion)?[2,x.completed]:"function"!=typeof(null==e?void 0:e.getHighEntropyValues)?[3,2]:[4,Ge(n,t,e)];case 1:o.sent(),o.label=2;case 2:return[2,x.completed]}}))}))}]]),Ze={key:"deviceSignal/cookieDeprecationLabel",default:void 0},Ye=new ot({scope:"deviceSignal",object:"cookieDeprecationLabel",action:"set",handler:function(t){var n=t.account;return t.customEvent,r(void 0,void 0,void 0,(function(){var t,e;return o(this,(function(i){switch(i.label){case 0:return void 0===(null==(t=n.globalContext.navigator.cookieDeprecationLabel)?void 0:t.getValue)||"function"!=typeof t.getValue?[2,{status:x.cancelled}]:[4,n.executeFuncWithConsent(t,t.getValue)];case 1:return void 0===(e=i.sent())||""===e?[2,{status:x.cancelled}]:(n.update(Ze,(function(){return e})),[2,{status:x.completed,analytics:{gcdl:e}}])}}))}))}}),Xe=at([Ye]),ti={key:"_monitoring/statusesByEventIdentifier",default:new Map},ni=function(t){var n=t.account,e=t.customEvent;return r(void 0,void 0,void 0,(function(){var t,i,r,a,u;return o(this,(function(o){if(void 0===(t=null===(u=e.detail)||void 0===u?void 0:u.eventIdentifier))throw new Error("Missing eventIdentifier parameter");return i=n.use(ti),r="".concat(e.type,":").concat(t),void 0!==(a=i.get(r))?[2,a]:[2,x.waiting]}))}))},ei=function(t){var n=t.account,e=t.customEvent;return r(void 0,void 0,void 0,(function(){var t,i,r,a,u,c;return o(this,(function(o){if(void 0===(t=null===(a=e.detail)||void 0===a?void 0:a.eventIdentifier))throw new Error("Missing eventIdentifier parameter");if(void 0===(i=null===(u=e.detail)||void 0===u?void 0:u.statusUpdate))throw new Error("Missing statusUpdate parameter");if(!(i in x))throw new Error("Invalid statusUpdate parameter. Expected one of ".concat(Object.values(x).join(", ")));if(void 0===(r=null===(c=e.detail)||void 0===c?void 0:c.pairedEvents)||r.length<1||r.some((function(t){return"string"!=typeof t})))throw new Error("Parameter pairedEvents must be a non-empty array of string");return r.forEach((function(e){var r="".concat(e,":").concat(t);n.update(ti,(function(t){return t.set(r,i)}))})),[2,x.completed]}))}))},ii=new Map([["_monitor/testing/only",ni],["_update/testing/only",ei],["_legacy/bidRequest/monitor",ni],["_legacy/bidRequest/didComplete",ei]]),ri=new ot({scope:"prebid",object:"analyticsEvent",action:"track",handler:function(t){var n=t.account,i=t.customEvent;return r(void 0,void 0,void 0,(function(){var t,r,a,u,c,s,d;return o(this,(function(o){switch(o.label){case 0:return void 0===(null===(a=i.detail)||void 0===a?void 0:a.eventType)||void 0===(null===(u=i.detail)||void 0===u?void 0:u.eventArgs)||void 0===(null===(d=null===(s=null===(c=i.detail)||void 0===c?void 0:c.config)||void 0===s?void 0:s.options)||void 0===d?void 0:d.accountID)?[2,{status:x.cancelled}]:(t={eventType:i.detail.eventType,metadata:i.detail.metadata,config:i.detail.config},[4,n.globalContext.fetch("".concat("https://prod.us-east-1.cxm-bcn.publisher-services.amazon.dev/v1/events/prebid"),oi(i.detail))]);case 1:return(r=o.sent()).ok?[2,{status:x.completed,analytics:t}]:[2,{status:x.cancelled,analytics:e(e({},t),{message:"Request failed: ".concat(r.status)})}]}}))}))}}),oi=function(t){var n={accountId:t.config.options.accountID,events:[{eventArgs:t.eventArgs,eventType:t.eventType}]};return{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}},ai={key:"prebid/config",default:void 0};!function(t){t.NotStarted="NOT STARTED",t.Loading="LOADING",t.Complete="COMPLETE"}(Ke||(Ke={}));var ui,ci,si={key:"prebid/configRequestState",default:Ke.NotStarted},di=new ot({scope:"prebid",object:"config",action:"fetch",handler:function(t){var n=t.account,i=t.customEvent;return r(void 0,void 0,void 0,(function(){var t,r,a,u,c,s,d,l,v;return o(this,(function(o){switch(o.label){case 0:if((t=n.use(si))===Ke.Loading)return[2,{status:x.waiting}];if(r={metadata:null===(v=null==i?void 0:i.detail)||void 0===v?void 0:v.metadata},t===Ke.Complete&&void 0!==(a=n.use(ai)))return[2,{status:x.completed,value:JSON.parse(a),analytics:r}];o.label=1;case 1:return o.trys.push([1,4,,5]),n.update(si,(function(){return Ke.Loading})),u="".concat("https://c.amazon-adsystem.com/cdn/prod/config","?src=").concat(n.id),[4,n.globalContext.fetch(u)];case 2:return c=o.sent(),n.update(si,(function(){return Ke.Complete})),c.ok?[4,c.json()]:[2,{status:x.cancelled,analytics:e(e({},r),{message:"Config request failed"})}];case 3:return s=o.sent(),d=li(n,s),n.update(ai,(function(){return JSON.stringify(d)}),{persist:!0}),[2,{status:x.completed,value:d,analytics:r}];case 4:return l=o.sent(),[2,{status:x.cancelled,analytics:e(e({},r),{message:l.message})}];case 5:return[2]}}))}))}}),li=function(t,n){var e,i,r,o;return{analyticsConfig:{options:{accountID:t.id,sampling:null===(e=n.pbjs)||void 0===e?void 0:e.sampleRate},includeEvents:null===(i=n.pbjs)||void 0===i?void 0:i.allowedEvents},idConfig:{params:{accountID:t.id,enabled:null===(r=n.pbjs)||void 0===r?void 0:r.enabled,treatments:null===(o=n.pbjs)||void 0===o?void 0:o.treatments}}}},vi={key:"prebid/eidsConfig",default:"{}"};!function(t){t.APSSignalIQ="_apsIdTreatment",t.Audigent="hadronId",t.ID5="id5id",t.Liveramp="idl_env",t.Lotame="lotamePanoramaId",t.Pubcommon="pubcid",t.Publink="publinkId",t.ThirtyThree="33acrossId",t.Yahoo="connectId"}(ci||(ci={}));var fi=new Map([[Un,ci.Audigent],["id5",ci.ID5],[Gn,ci.Liveramp],[ae,ci.Lotame],[he,ci.Pubcommon],[we,ci.Publink],[Dn,ci.ThirtyThree],[Re,ci.Yahoo]]),hi=((ui={})[ci.Audigent]={source:"audigent.com",atype:1},ui[ci.ID5]={source:"id5-sync.com",atype:1},ui[ci.Liveramp]={source:"liveramp.com",atype:3},ui[ci.Lotame]={source:"crwdcntrl.net",atype:1},ui[ci.Pubcommon]={source:"pubcid.org",atype:1},ui[ci.Publink]={source:"epsilon.com",atype:3},ui[ci.ThirtyThree]={source:"33across.com",atype:1},ui[ci.Yahoo]={source:"yahoo.com",atype:3},ui),pi=new ot({scope:"prebid",object:"eidsConfig",action:"get",handler:function(t){var n=t.account,i=t.customEvent;return r(void 0,void 0,void 0,(function(){var t,r,a,u;return o(this,(function(o){return void 0===(null===(r=n.globalContext.apstag)||void 0===r?void 0:r._atsaaiod)?[2,{status:x.waiting}]:(n.update(vi,(function(){return JSON.stringify(e({},hi))}),{persist:!0}),t={metadata:null===(a=null==i?void 0:i.detail)||void 0===a?void 0:a.metadata,config:null===(u=null==i?void 0:i.detail)||void 0===u?void 0:u.config},[2,{status:x.completed,analytics:t}])}))}))}}),mi=new Set(c(["CONTROL_HOLD_OUT","CLEAN"],u(fi.keys()),!1));var wi,yi={key:"prebid/ids",default:void 0},bi=new ot({scope:"prebid",object:"ids",action:"get",handler:function(t){var n=t.account,i=t.customEvent;return r(void 0,void 0,void 0,(function(){var t,r,c,s,d,l,v,f;return o(this,(function(o){switch(o.label){case 0:return void 0===(null===(d=n.globalContext.apstag)||void 0===d?void 0:d._atsaaiod)?[2,{status:x.waiting}]:(n.recordListenerNonBlocking(Oe),void 0!==(t=n.use(Cn))&&(r=Object.fromEntries(Object.entries(t).map((function(t){var n=u(t,2),e=n[0],i=n[1];return[fi.get(e),i]})))),[4,n.recordListener(di,{metadata:null===(l=null==i?void 0:i.detail)||void 0===l?void 0:l.metadata})]);case 1:return c=o.sent(),s={metadata:null===(v=null==i?void 0:i.detail)||void 0===v?void 0:v.metadata},null!==(f=c.idConfig.params.enabled)&&void 0!==f&&f?(null!=c.idConfig.params.treatments&&(r=function(t,n){if(!function(t){var n=t.reduce((function(t,n){return t+n.percent}),0),e=100===n,i=t.reduce((function(t,n){var e=n.treatment;return t&&mi.has(e)}),!0);return e&&i}(n))return t;var i=function(t){var n,e,i=100*Math.random(),r=0;try{for(var o=a(t),u=o.next();!u.done;u=o.next()){var c=u.value;if(i<=(r+=c.percent))return c.treatment}}catch(t){n={error:t}}finally{try{u&&!u.done&&(e=o.return)&&e.call(o)}finally{if(n)throw n.error}}throw new Error("Invalid treatment percentages")}(n);return function(t,n){var i,r=((i={})[ci.APSSignalIQ]=n,i),o=fi.get(n);switch(n){case"CONTROL_HOLD_OUT":return e(e({},t),r);case"CLEAN":return r;default:return void 0!==o&&void 0!==(null==t?void 0:t[o])&&(r[o]=t[o]),r}}(t,i)}(r,c.idConfig.params.treatments)),n.update(yi,(function(){return r})),[2,{status:x.completed,value:r,analytics:s}]):[2,{status:x.cancelled,analytics:s}]}}))}))}}),gi=at([ri,di,pi,bi]),_i=function(t){return t===wi.noConsent?"AMZN-NoCookieConsent":"AMZN-Token"};!function(t){t[t.noConsent=0]="noConsent",t[t.token=1]="token"}(wi||(wi={}));var Ei,Si,xi=function(t){t.setCookieStorage(_i(wi.token),"",0),t.setCookieStorage(_i(wi.noConsent),"",0)},Ci=function(t){var n=t.account,e=t.hashedRecords,i=t.ttl,r=t.isGDPRRegion,o=t.tcString,a=t.setToken;return xi(n),"boolean"!=typeof a&&(a=!0),Ai({account:n,hashedRecords:e,ttl:i,isGDPRRegion:r,tcString:o}).then((function(t){var e=t.AIPToken,i=t.cookieExpiry;return Ri({AIPToken:e,cookieExpiry:i,account:n,setToken:a})}))},Ai=function(t){var n=t.account,e=t.hashedRecords,i=t.ttl,r=t.isGDPRRegion,o=t.tcString;return fetch("https://tk.amazon-adsystem.com/envelope",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ki({account:n,hashedRecords:e,ttl:i,isGDPRRegion:r,tcString:o}))}).then((function(t){if(!t.ok)throw new Error("Token http status error: ".concat(t.status));return t.json()}))},Ri=function(t){var n=t.AIPToken,e=t.cookieExpiry,i=t.account,r=t.setToken;if("string"!=typeof n||"number"!=typeof e)throw new Error("Invalid AIPES response");if(""===n)throw i.setCookieStorage(_i(wi.noConsent),"1",e),new Error("Empty token");(r||"boolean"!=typeof r)&&i.setCookieStorage(_i(wi.token),n,e)},ki=function(t){var n=t.account,e=t.hashedRecords,i=t.ttl,r=t.isGDPRRegion,o=t.tcString,a={publisherId:n.id,hashedRecords:e};return void 0!==i&&(a.ttl=i),r?(a.gdpr=1,o&&(a.gdprConsent=o)):a.gdpr=0,a},Ii=new ot({scope:"ad",object:"record",action:"delete",handler:function(t){var n=t.account;return r(void 0,void 0,void 0,(function(){var t;return o(this,(function(e){if(!(null===(t=n.globalContext.apstag)||void 0===t?void 0:t._atsaaiod))return[2,{status:x.waiting}];if(!n.isAllowedToAccessInfoOnDevice())throw new Error("Not allowed to access storage on device");return xi(n),[2,{status:x.completed}]}))}))}}),ji={detail:Z,"detail.setCookie":nt(Q),"detail.config":Z,"detail.config.optOut":nt(Q),"detail.config.ttl":nt(K),"detail.config.gdpr":nt(Z),"detail.config.gdpr.cmpTimeout":nt(K),"detail.config.gdpr.enabled":nt(it),"detail.config.gdpr.consent":nt($),"detail.config.gdpr.cmpGlobal":nt($),"detail.config.gdpr.cmpGlobalv2":nt($),"detail.config.hashedRecords":Y,"detail.config.hashedRecords[]":Z,"detail.config.hashedRecords[].type":$,"detail.config.hashedRecords[].record":$,"detail.config.hashedRecords[].encrypted":nt(K),"detail.config.hashedRecords[].toJSON":it,"detail.config.hashedRecords[].$$typeof":it,"detail.config.hashedRecords[].constructor":it,"detail.config.hashedRecords[].tagName":it,"detail.config.hashedRecords[].@@__IMMUTABLE_ITERABLE__@@":it,"detail.config.hashedRecords[].@@__IMMUTABLE_RECORD__@@":it},Oi=new ot({scope:"ad",object:"record",action:"renew",validators:{detail:ji,context:{context:Z}},handler:function(t){var n=t.account,e=t.detail;return r(void 0,void 0,void 0,(function(){var t,i,r,a;return o(this,(function(o){switch(o.label){case 0:if(!(null===(r=n.globalContext.apstag)||void 0===r?void 0:r._atsaaiod))return[2,{status:x.waiting}];if(void 0===(null==e?void 0:e.config))throw new Error("Missing tokenConfig object");if(!n.isAllowedToAccessInfoOnDevice())throw new Error("Not allowed to access storage on device");return(null!==(a=n.readCookieStorage(_i(wi.token)))&&void 0!==a?a:"").length>0?[2,{status:x.cancelled}]:(t=n.globalContext.apstag.isGDPRRegion,i=n.use(N),[4,(u={account:n,hashedRecords:e.config.hashedRecords,ttl:e.config.ttl,isGDPRRegion:t,tcString:null==i?void 0:i.tcString},Ci(u))]);case 1:return o.sent(),[2,{status:x.completed}]}var u}))}))}});!function(t){t.email="email"}(Ei||(Ei={})),function(t){t.Display="display",t.Video="video",t.MultiFormat="multi-format"}(Si||(Si={}));var Pi,Mi=/^[0-9a-fA-F]{64}$/,Ti=function(t){return Mi.test(t||"")},Di=function(t){return t.then((function(t){return Array.from(new Uint8Array(t)).map((function(t){return t.toString(16).padStart(2,"0")})).join("")})).then((function(t){return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"!==t?t:""}))},Ni=function(t,n){return"string"==typeof t&&(n===Ei.email?/\S+@\S+\.\S+/.test(t)||Ti(t):t.trim().length>0)},Li=function(t,n,e){return n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement?Ni(n.value,e)?Di(t.globalContext.crypto.subtle.digest("SHA-256",(new t.globalContext.TextEncoder).encode(n.value||""))):Promise.resolve(""):Ni(n.innerText,e)?Di(t.globalContext.crypto.subtle.digest("SHA-256",(new t.globalContext.TextEncoder).encode(n.innerText||""))):Promise.resolve("")};!function(t){t.LOCAL_STORAGE="LOCAL",t.CSS_SELECTOR="CSS",t.URL="URL"}(Pi||(Pi={}));var Ui=function(t,n,e){var i,r;void 0===n&&(n={}),function(t){var n,e=((n={})[Pi.LOCAL_STORAGE]=5,n[Pi.URL]=4,n[Pi.CSS_SELECTOR]=3,n),i={};t.forEach((function(t){i[t.method]=(i[t.method]||0)+1,t.priority=i[t.method]})),t.sort((function(t,n){return t.method===n.method?(t.priority||0)>(n.priority||0)?1:-1:e[t.method]>e[n.method]?-1:1}))}(n.methods||[]);var o,u=[],c=function(n){var i=n.method,r=n.target,a=n.type,c="";switch(i){case Pi.LOCAL_STORAGE:c=function(t,n,e){var i=t.readLocalStorage(n);return i&&Ni(i,e)?i:""}(t,r,a);break;case Pi.URL:u.push(function(t,n,e){e=null!=e?e:t.globalContext.location.href,n=n.replace(/[[\]]/g,"\\$&");var i=new RegExp("[?&#]"+n+"(=([^&#?]*)|&|#|$)").exec(e);return Array.isArray(i)&&"string"==typeof i[2]&&0!==decodeURIComponent(i[2].replace(/\+/g," ")).trim().length&&Ti(decodeURIComponent(i[2].replace(/\+/g," ")))?Promise.resolve(decodeURIComponent(i[2].replace(/\+/g," "))):new Promise((function(t){return t("")}))}(t,r).then((function(t){return{type:a,value:t}})));break;case Pi.CSS_SELECTOR:o=n}if(c.length>0)return e({value:c,type:a}),{value:void 0}};try{for(var s=a(n.methods||[]),d=s.next();!d.done;d=s.next()){var l=c(d.value);if("object"==typeof l)return l.value}}catch(t){i={error:t}}finally{try{d&&!d.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}var v=function(){if(o&&(!0===o.isGlobalSubmit||"string"==typeof o.eventTarget&&"string"==typeof o.event)){var n=o.eventTarget,i=o.target,r=o.type,u=o.isGlobalSubmit,c=u?"submit":o.event;if("string"==typeof c&&0!==c.length){var s=function(o){return function(t){var n,e=t.account,i=t.e,r=t.eventTarget,o=t.event,u=t.isGlobalSubmit,c=t.target,s=t.type,d=t.onDone,l=t.listener;u||"window"===r||i.target&&"function"==typeof i.target.matches&&"string"==typeof r&&i.target.matches(r)?(u&&i instanceof Event&&i.target&&(n=i.target.querySelectorAll('input[type="email"]')),function(t,n,e,i){var r,o,u=i||t.globalContext.document.querySelectorAll(n);if(0===u.length)return new Promise((function(t){return t("")}));if(1===u.length)return Li(t,u[0],e);var c=[];try{for(var s=a(u),d=s.next();!d.done;d=s.next()){var l=d.value;c.push(Li(t,l,e))}}catch(t){r={error:t}}finally{try{d&&!d.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return Promise.all(c).then((function(t){var n,e,i=null;try{for(var r=a(t),o=r.next();!o.done;o=r.next()){var u=o.value;if(""!==u){if(null!==i&&("string"!=typeof i||i!==u))return"";i=u}}}catch(t){n={error:t}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(n)throw n.error}}return null!=i?i:""}))}(e,c,s,n).then((function(t){"function"==typeof l&&e.globalContext.removeEventListener(o,l),d(!(t.length<1)&&{value:t,type:s})}))):d(!1)}({account:t,e:o,event:c,eventTarget:n,isGlobalSubmit:u,target:i,type:r,onDone:e,listener:s})};t.globalContext.addEventListener(c,s)}else e(!1)}else e(!1)};if(0!==u.length)return Promise.all(u).then((function(t){var n,i;try{for(var r=a(t),o=r.next();!o.done;o=r.next()){var u=o.value;if(u.value.length>0)return void e(u)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}v()}));v()},qi={called:!1};function zi(t,n){return new Promise((function(e,i){if(qi.called&&!n.overrideLimit)throw new Error("rr should only be called once per page load");qi.called=!0;var r=0,o=function(){var a=function(){var r,o,a=t.use(N);return(!(null===(r=t.globalContext.apstag)||void 0===r?void 0:r.isGDPRRegion)||void 0!==a)&&(void 0===a||t.isAllowedToAccessInfoOnDevice()?(null===(o=Ui(t,n,(function(n){if(!1===n)return e("no retrieval");Ci({account:t,hashedRecords:[{type:n.type,record:n.value}],source:"rr",tcString:null==a?void 0:a.tcString}).then((function(){e("token generated")})).catch(i)})))||void 0===o||o.catch(i),!0):"canceled")}(),u=r>6400;if(a||u)return"canceled"===a&&i(new Error("tcf timeout")),void(u&&i(new Error("interval over")));setTimeout(o,r),r=0===r?200:2*r};o()}))}var Fi=new ot({scope:"ad",object:"record",action:"rr",validators:{detail:{detail:Z,"detail.config":Z,"detail.config.constructor":it,"detail.config.$$typeof":it,"detail.config.tagName":it,"detail.config.@@__IMMUTABLE_ITERABLE__@@":it,"detail.config.@@__IMMUTABLE_RECORD__@@":it,"detail.config.accountID":nt($),"detail.config.overrideLimit":nt(Q),"detail.config.methods":Y,"detail.config.methods[].tagName":it,"detail.config.methods[]":tt(Z),"detail.config.methods[].$$typeof":it,"detail.config.methods[].constructor":it,"detail.config.methods[].@@__IMMUTABLE_ITERABLE__@@":it,"detail.config.methods[].@@__IMMUTABLE_RECORD__@@":it,"detail.config.methods[].type":X(Object.values(Ei)),"detail.config.methods[].method":X(Object.values(Pi)),"detail.config.methods[].target":nt($),"detail.config.methods[].event":nt($),"detail.config.methods[].eventTarget":nt($),"detail.config.methods[].isGlobalSubmit":nt(Q),"detail.config.methods[].priority":nt(K)},context:{context:Z,"context.Promise":et,"context.crypto":Z,"context.crypto.subtle":et}},handler:function(t){var n=t.account,e=t.detail;return r(void 0,void 0,void 0,(function(){var t,i;return o(this,(function(r){switch(r.label){case 0:if(!(null===(i=n.globalContext.apstag)||void 0===i?void 0:i._atsaaiod))return[2,{status:x.waiting}];if(!n.isAllowedToAccessInfoOnDevice())throw new Error("Not allowed to access storage on device");return[4,zi(n,e.config)];case 1:return t=r.sent(),[2,{status:x.completed,analytics:{rr:t}}]}}))}))}}),Bi=new ot({scope:"ad",object:"record",action:"update",validators:{detail:ji,context:{context:Z}},handler:function(t){var n=t.account,e=t.detail;return r(void 0,void 0,void 0,(function(){var t,i,r;return o(this,(function(o){switch(o.label){case 0:if(!(null===(r=n.globalContext.apstag)||void 0===r?void 0:r._atsaaiod))return[2,{status:x.waiting}];if(!n.isAllowedToAccessInfoOnDevice())throw new Error("Not allowed to access storage on device");return t=n.globalContext.apstag.isGDPRRegion,i=n.use(N),e.config.optOut?(xi(n),[3,3]):[3,1];case 1:return[4,Ci({account:n,hashedRecords:e.config.hashedRecords,ttl:e.config.ttl,isGDPRRegion:t,tcString:null==i?void 0:i.tcString,setToken:null==e?void 0:e.setCookie})];case 2:o.sent(),o.label=3;case 3:return[2,{status:x.completed}]}}))}))}}),Vi=at([Ii,Oi,Fi,Bi]),Ji=new Map([["ad/ASRSlot/render",function(t){var n=t.account,e=t.customEvent;return r(void 0,void 0,void 0,(function(){var t,i;return o(this,(function(r){if(void 0===(null===(t=e.detail)||void 0===t?void 0:t.id)||void 0===(null===(i=e.detail)||void 0===i?void 0:i.targeting))throw new Error("Missing event detail");return function(t,n,e,i){var r,o,a,u=e.globalContext.document.createElement("iframe"),c=null===(r=n.get("amznsz"))||void 0===r?void 0:r.split("x"),s=n.get("amzniid"),d=t;if(!(void 0===s||void 0===d||void 0===c||c.length<2)){u.style.marginLeft="0",u.style.marginTop="0",u.style.height="".concat(c[1],"px"),u.style.width="100%",u.setAttribute("scrolling","no"),u.setAttribute("frameborder","0");var l=e.globalContext.document.createElement("div"),v=null!==(o=null==i?void 0:i.location)&&void 0!==o?o:"afterend",f=e.globalContext.document.getElementById(d);if(null!=f){f.insertAdjacentElement(v,l),l.appendChild(u);var h=null===(a=null==u?void 0:u.contentWindow)||void 0===a?void 0:a.document;void 0!==h&&(h.open(),h.write('<!DOCTYPE html><html><head><meta charset="UTF-8"><style>html{height:100%}body{height:100%;margin:0;overflow:hidden}</style></head><body><script>window.parent.apstag.renderImp(document, "'+s+'", {"inheritSize": true});<\/script></body></html>'),h.close())}}}(e.detail.id,e.detail.targeting,n),[2,x.completed]}))}))}]]);function Hi(t){return r(this,void 0,void 0,(function(){var n,e,i,r;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,crypto.subtle.importKey("jwk",{alg:"A128CTR",ext:!0,k:"ERTYQsuodPO_Um-5jFmOLg",key_ops:["encrypt"],kty:"oct"},"AES-CTR",!0,["encrypt"])];case 1:return n=o.sent(),e=(new TextEncoder).encode(t),r=Uint8Array.bind,[4,crypto.subtle.encrypt({name:"AES-CTR",counter:new Uint8Array(16),length:128},n,e)];case 2:return i=new(r.apply(Uint8Array,[void 0,o.sent()])),[2,btoa(String.fromCharCode.apply(String,c([],u(i),!1)))];case 3:return o.sent(),[2,null];case 4:return[2]}}))}))}var Gi,Wi="google/secureSignals/initialize",Ki=new Map([["google/secureSignals/set",function(t){var n=t.account;return t.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(t){return void 0===n.globalContext.googletag&&(n.globalContext.googletag={}),void 0===n.globalContext.googletag.secureSignalProviders&&(n.globalContext.googletag.secureSignalProviders=[]),n.globalContext.googletag.secureSignalProviders.push({networkCode:"amazon.com",collectorFunction:function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,n.record(Wi)];case 1:return[2,t.sent().encryptedSignal]}}))}))}}),[2,x.completed]}))}))}],[Wi,function(t){var n=t.account;return t.customEvent,r(void 0,void 0,void 0,(function(){var t,e,i,r,a,u,c,s;return o(this,(function(o){switch(o.label){case 0:return void 0===(t=null===(c=n.globalContext.apstag)||void 0===c?void 0:c._getSlotIdToNameMapping)?[2,{status:x.waiting}]:(e=t(),0===Object.keys(e).length?[2,{status:x.waiting}]:(void 0===(i=null===(s=n.globalContext.location)||void 0===s?void 0:s.href)&&(i=""),r="".concat(i,";").concat(JSON.stringify(e)).substr(0,225),a={status:x.completed},u={},[4,Hi(r)]));case 1:return[2,(a.value=(u.encryptedSignal=o.sent(),u),a)]}}))}))}]]);!function(t){t.Googletag="googletag",t.AppNexus="appnexus",t.SAS="sas"}(Gi||(Gi={}));var $i=["187","189","306","312","313","314","317","318","290","291","292","293","294","296","297","300","301","302","303","304","305","307","308","310","311","405","454","456","457","458","459","460","461","462","463"],Qi=["Rm3SiT","Z7rJBM","HxqYV1","pg0WhF","j9PaO9","mm3UXx","6i4dB6","8FD8nI"],Zi={3:c([],u(["4-10","5-14","6-1","7-6","7-7","6-7","6-8","7-2","7-3","7-8","7-9","7-10","7-11","7-12","7-13","7-14","7-16","7-18","7-20","7-21","7-22","7-23","7-27","7-28","7-29","7-30","7-34","7-36","7-37","7-39","7-40","7-41","7-42","7-43","7-44","13-2","14-2","14-3","14-8","15-1","23-1","23-2","23-3","23-4","23-5","23-6","23-7","23-8","23-9","23-10","25","25-1","25-2","25-3","25-4","25-5","25-6","25-7","26","26-1","26-2","26-3","26-4"].map((function(t){return"IAB".concat(t)}))),!1),4:c([],u($i),!1),5:c([],u($i),!1),6:c(c([],u($i),!1),u(Qi),!1),7:c(c([],u($i),!1),u(Qi),!1)},Yi={site:{id:"id",name:"name",domain:"domain",cattax:1,cat:["1"],sectioncat:["first","second"],pagecat:["first","second"],page:"page",ref:"ref",search:"search",mobile:1,privacypolicy:1,publisher:{id:"id",name:"name",cattax:1,cat:["1"],domain:"domain",ext:{}},content:{id:"id",episode:1,title:"title",series:"series",season:"season",artist:"artist",genre:"genre",album:"album",isrc:"isrc",producer:{id:"id",name:"name",cattax:1,cat:["1"],domain:"domain",ext:{}},url:"url",cattax:1,cat:["1"],prodq:1,context:1,contentrating:"contentrating",userrating:"userrating",qagmediarating:1,keywords:"first, second",kwarray:["first","second"],livestream:1,sourcerelationship:1,len:1,language:"language",langb:"langb",embeddable:1,data:[{id:"id",name:"name",segment:[{id:"id",name:"name",value:"value",ext:{}}],ext:{}}],network:{id:"id",name:"name",domain:"domain",ext:{}},channel:{id:"id",name:"name",domain:"domain",ext:{}},ext:{}},keywords:"first, second",kwarray:["first","second"],ext:{}}},Xi=function(t,n){var e=Object.keys(t).reduce((function(e,i){var r,o=i;if(void 0!==(null==n?void 0:n[o])){var a=t[o];"object"==typeof(r=a)&&!Array.isArray(r)&&Object.keys(r).length>0?e[o]=Xi(a,n[o]):e[o]=function(t,n){var e,i=n.cattax,r=n[t];return(null!==(e=Zi[i])&&void 0!==e?e:[]).length>0&&("cat"===t||"sectcat"===t||"sectioncat"===t||"pagecat"===t)&&Array.isArray(r)?r.filter((function(t){return!Zi[i].includes("".concat(t))})):r}(o,n)}return e}),{});return e};function tr(t){return t.get=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=Map.prototype.get.apply(this,t);return Map.prototype.delete.apply(this,t),e},t}var nr={key:"ad/targeting",default:new Map,postProcessor:tr},er=new ot({scope:"ad",object:"targeting",action:"attach",validators:{detail:{detail:Z,"detail.itemIds":nt(Y),"detail.itemIds[]":$,"detail.adServer":X(Object.values(Gi))},context:{context:Z,"context.apstag":Z,"context.apstag.setDisplayBids":et,"context.apstag.setDisplayBids()":null}},handler:function(t){var n=t.account,e=t.detail,i=t.context;return r(void 0,void 0,void 0,(function(){var t;return o(this,(function(r){return t={pubID:n.id},i.apstag.setDisplayBids(e.itemIds,{initConfig:t,adServer:e.adServer}),ir(n,{itemIds:e.itemIds}),[2,{status:x.completed}]}))}))}}),ir=function(t,n){n.itemIds?n.itemIds.forEach((function(n){t.update(nr,(function(t){return t.delete(n),t}))})):t.update(nr,(function(t){return t.clear(),t}))},rr={key:"ad/slots",default:new Map},or={key:"cxm/isConfigLoadInitiated",default:!1},ar=function(t){var n,e=new Map,i=function(t){e.set(JSON.stringify(t),t)};return t.w&&t.h&&i([t.w,t.h]),null===(n=t.format)||void 0===n||n.forEach((function(t){t.w&&t.h&&i([t.w,t.h])})),e.size>0?Array.from(e.values()):void 0},ur=function(t){if(t.bidfloor){if(void 0!==t.bidfloorcur&&"USD"!==t.bidfloorcur)throw new Error('imp.bidfloorcur: only "USD" is currently supported');return{value:t.bidfloor,currency:"USD"}}},cr=function(t,n){var e={};return Object.keys(t).forEach((function(i){"object"==typeof t[i]&&null!==t[i]&&(i===n?Object.assign(e,t[i]):Object.assign(e,cr(t[i],n)))})),e},sr=function(t){var n=cr(t,"ext");return Object.entries(n).forEach((function(t){var e=u(t,2),i=e[0],r=e[1];"string"!=typeof r&&(n[i]=JSON.stringify(r))})),0!==Object.keys(n).length?n:void 0};function dr(t){var n=t.account,i=t.selectedSlots,a=t.publisherParams,u=t.timeout,c=t._endpointDomain,s=t.initConfig;return r(this,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return t=function(t){return t.map((function(t){return function(t){var n,i={slotID:t.id,slotName:t.tagid,floor:ur({bidfloor:t.bidfloor,bidfloorcur:t.bidfloorcur}),slotParams:sr(t)};if(t.banner&&t.video){i.mediaType=Si.MultiFormat;var r=ar({w:t.video.w,h:t.video.h}),o=ar({w:t.banner.w,h:t.banner.h,format:t.banner.format});o&&(i.multiFormatProperties=e(e({},i.multiFormatProperties),{display:{sizes:o}})),r&&(i.multiFormatProperties=e(e({},i.multiFormatProperties),{video:{sizes:r}}))}else t.video?(i.mediaType=Si.Video,i.sizes=ar({w:t.video.w,h:t.video.h})):t.banner&&(i.mediaType=Si.Display,i.sizes=ar({w:t.banner.w,h:t.banner.h,format:t.banner.format}));return(null===(n=t.video)||void 0===n?void 0:n.companionad)&&(i.companions=[],t.video.companionad.forEach((function(t){var n;t.id&&(null===(n=i.companions)||void 0===n||n.push(t.id))}))),i}(t)}))}(i),[4,lr({account:n,legacySlots:t,publisherParams:a,timeout:u,_endpointDomain:c,initConfig:s})];case 1:return[2,r.sent()]}}))}))}function lr(t){var n=t.account,e=t.legacySlots,i=t.publisherParams,a=t.timeout,u=t._endpointDomain,c=t.initConfig;return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){if(void 0===n.globalContext.apstag)throw new Error("apstag undefined in global scope");n.globalContext.apstag.clientFetchBids({slots:e,params:i,timeout:null!=a?a:6e4,_endpointDomain:u},(function(n){t(n)}),{initConfig:c})}))];case 1:return[2,t.sent()]}}))}))}var vr,fr,hr,pr,mr="ad/targeting/fetch",wr="ad/signals/define",yr="cxm/config/load",br=new Map([["ad_slot_import",function(t){var n=t.account,e=t.customEvent;return r(void 0,void 0,void 0,(function(){var t;return o(this,(function(i){if(void 0===(null===(t=e.detail)||void 0===t?void 0:t.adServer))throw new Error("adServer: a valid value must be provided");if(e.detail.adServer===Gi.Googletag)return n.write("ad/googletagSlotAutoImport",!0),[2,x.completed];throw new Error("adServer: value provided isn't currently supported")}))}))}],["ad/schain/define",function(t){var n=t.account,e=t.customEvent;return r(void 0,void 0,void 0,(function(){var t;return o(this,(function(i){if(void 0===(null===(t=e.detail)||void 0===t?void 0:t.schain))throw new Error("Missing schain object");return n.write("ad/schain",e.detail.schain),[2,x.completed]}))}))}],[mr,function(t){var n=t.account,e=t.customEvent;return r(void 0,void 0,void 0,(function(){var t,i,r,u,c,s,d;return o(this,(function(o){switch(o.label){case 0:return void 0===n.globalContext.apstag||void 0===n.globalContext.apstag.clientFetchBids?[2,x.waiting]:(function(t){t.use(or)||(t.update(or,(function(){return!0})),t.record(yr).catch((function(t){})))}(n),function(t){(function(t){return!function(t){var n,e;try{for(var i=a(t.queue),r=i.next();!r.done;r=i.next()){var o=r.value;if(o.type===ze&&o.status===x.waiting)return!0}}catch(t){n={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(n)throw n.error}}return!1}(t)&&void 0!==t.read(ut,{persist:!0})})(t)&&t.record(ze).catch((function(t){}))}(n),t=function(t){return Array.from(t.use(rr).values())}(n),i=function(t,n){var e=t;return void 0!==n&&n.length>0&&(e=t.filter((function(t){return n.includes(t.id)}))),e}(t,null===(u=e.detail)||void 0===u?void 0:u.itemIds),r=null===(c=e.detail)||void 0===c?void 0:c.publisherParams,[4,dr({account:n,selectedSlots:i,publisherParams:r,timeout:null===(s=e.detail)||void 0===s?void 0:s.timeout,_endpointDomain:null===(d=e.detail)||void 0===d?void 0:d._endpointDomain,initConfig:{pubID:n.id,isSelfServePub:36===n.id.length,deals:!0}})]);case 1:return o.sent(),[2,x.completed]}}))}))}],[wr,function(t){var n=t.account,e=t.customEvent;return r(void 0,void 0,void 0,(function(){var t;return o(this,(function(i){if(void 0===e.detail||!("context"in e.detail))throw new Error("Missing detail object");return t=null!=e.detail.context?Xi(Yi,e.detail.context):e.detail.context,n.update(an,(function(){return t})),[2,x.completed]}))}))}],[yr,function(t){var n=t.account;return t.customEvent,r(void 0,void 0,void 0,(function(){var t,e,i;return o(this,(function(r){switch(r.label){case 0:return void 0===(null===(i=n.globalContext.apstag)||void 0===i?void 0:i._load3PLibraryConfig)?[2,x.waiting]:(t=n.id,36===n.id.length&&(t="600",e=n.id),[4,new Promise((function(i,r){var o;if(void 0===(null===(o=n.globalContext.apstag)||void 0===o?void 0:o._load3PLibraryConfig))throw new Error("apstag._load3PLibraryConfig is undefined");n.globalContext.apstag._load3PLibraryConfig(n.id,{sourceID:t,publisherUUID:e},i,r)}))]);case 1:return r.sent(),[2,x.completed]}}))}))}]]),gr=[er],_r=new Map(c(c([],u(br),!1),u(at(gr)),!1)),Er="widget/toolbox/open",Sr="widget/toolbox/start",xr=new Map([["widget/toolbox/end",function(t){var n=t.account;return r(void 0,void 0,void 0,(function(){return o(this,(function(t){return n.record(Ue,{eventName:Sr}).catch((function(t){})),[2,x.completed]}))}))}],[Er,function(t){var n=t.account;return t.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(t){return function(t,n){var e=n.globalContext.document.createElement("script");e.src="https://c.toolbox.aps.amazon-adsystem.com/toolbox.js",e.async=!0,n.globalContext.document.head.appendChild(e)}(0,n),[2,x.completed]}))}))}],[Sr,function(t){var n=t.account,e=t.customEvent;return r(void 0,void 0,void 0,(function(){return o(this,(function(t){return n.record(Le,{eventName:e.type}).catch((function(t){})),n.record(Er).catch((function(t){})),[2,x.completed]}))}))}]]),Cr="_config/events/activations",Ar="_config/events/deactivations",Rr=new Map([["_config/events/activate",function(t){var n=t.customEvent,e=t.account;return r(void 0,void 0,void 0,(function(){var t;return o(this,(function(i){return(t=null!=e.store.get(Cr)?e.store.get(Cr):new Set).add(n.detail.name),e.store.set(Cr,t),[2,x.completed]}))}))}],["_config/events/deactivate",function(t){var n=t.customEvent,e=t.account;return r(void 0,void 0,void 0,(function(){var t;return o(this,(function(i){return(t=null!=e.store.get(Ar)?e.store.get(Ar):new Set).add(n.detail.name),e.store.set(Ar,t),[2,x.completed]}))}))}]]),kr={key:"sessionMarker/marker",default:void 0},Ir=new Map([["sessionMarker/marker/sync",function(t){var n=t.account;return r(void 0,void 0,void 0,(function(){return o(this,(function(t){return"object"!=typeof n.globalContext.crypto||"function"!=typeof n.globalContext.crypto.randomUUID?[2,x.cancelled]:(function(t){var n,e=t.use(kr,{persist:!0});if(0===(null!=e?e:"").length)return!1;var i=null!==(n=null==e?void 0:e.split("_")[1])&&void 0!==n?n:"";if(0===i.length)return!1;var r=new Date(i);return!((new Date).valueOf()-r.valueOf()>=2592e6)}(n)||(function(t){t.delete(kr.key,{persist:!0})}(n),function(t){var n=t.globalContext.crypto.randomUUID();if(36!==n.length)throw new Error("Invalid PEID generated: ".concat(n));var e="".concat(n,"_").concat((new Date).toISOString());t.update(kr,(function(){return e}),{persist:!0})}(n)),function(t){var n=t.use(kr,{persist:!0});t.update(kr,(function(){return n}))}(n),[2,x.completed])}))}))}]]),jr=new ot({scope:"legacy",object:"rpa",action:"enqueue",validators:{detail:{detail:Z,"detail.tokenConfig":null,"detail.callback":null,"detail.setCookie":nt(Q)}},handler:function(t){var n=t.account,e=t.detail;return r(void 0,void 0,void 0,(function(){var t,i;return o(this,(function(r){return void 0===(null===(t=n.globalContext.apstag)||void 0===t?void 0:t.rpa)||void 0===(null===(i=n.globalContext.apstag)||void 0===i?void 0:i.debug)?[2,{status:x.waiting}]:(n.globalContext.apstag.rpa(e.tokenConfig,e.callback,e.setCookie,n.id),[2,{status:x.completed}])}))}))}}),Or=new ot({scope:"legacy",object:"dpa",action:"enqueue",validators:{detail:{detail:Z,"detail.callback":null}},handler:function(t){var n=t.account,e=t.detail;return r(void 0,void 0,void 0,(function(){var t,i;return o(this,(function(r){return void 0===(null===(t=n.globalContext.apstag)||void 0===t?void 0:t.dpa)||void 0===(null===(i=n.globalContext.apstag)||void 0===i?void 0:i.debug)?[2,{status:x.waiting}]:(n.globalContext.apstag.dpa(e.callback),[2,{status:x.completed}])}))}))}}),Pr=new ot({scope:"legacy",object:"upa",action:"enqueue",validators:{detail:{detail:Z,"detail.tokenConfig":null,"detail.callback":null,"detail.setCookie":nt(Q)}},handler:function(t){var n=t.account,e=t.detail;return r(void 0,void 0,void 0,(function(){var t,i;return o(this,(function(r){return void 0===(null===(t=n.globalContext.apstag)||void 0===t?void 0:t.upa)||void 0===(null===(i=n.globalContext.apstag)||void 0===i?void 0:i.debug)?[2,{status:x.waiting}]:(n.globalContext.apstag.upa(e.tokenConfig,e.callback,e.setCookie,"bootstrap",n.id),[2,{status:x.completed}])}))}))}}),Mr=new ot({scope:"legacy",object:"queue",action:"push",validators:{detail:{detail:Z,"detail.callback":null}},handler:function(t){var n=t.detail;return r(void 0,void 0,void 0,(function(){return o(this,(function(t){return void 0!==n.callback&&null!==n.callback&&n.callback(),[2,{status:x.completed}]}))}))}}),Tr=new Map([["legacy/init/enqueue",function(t){var n=t.account,e=t.customEvent;return r(void 0,void 0,void 0,(function(){var t,i,r,a;return o(this,(function(o){return void 0===(null===(t=n.globalContext.apstag)||void 0===t?void 0:t.init)||void 0===(null===(i=n.globalContext.apstag)||void 0===i?void 0:i.debug)?[2,x.waiting]:(n.globalContext.apstag.init(null===(r=e.detail)||void 0===r?void 0:r.config,null===(a=e.detail)||void 0===a?void 0:a.callback),[2,x.completed])}))}))}],["legacy/fetchBids/enqueue",function(t){var n=t.account,e=t.customEvent;return r(void 0,void 0,void 0,(function(){var t,i,r,a;return o(this,(function(o){return void 0===(null===(t=n.globalContext.apstag)||void 0===t?void 0:t.fetchBids)||void 0===(null===(i=n.globalContext.apstag)||void 0===i?void 0:i.debug)?[2,x.waiting]:(n.globalContext.apstag.fetchBids(null===(r=e.detail)||void 0===r?void 0:r.bidConfig,null===(a=e.detail)||void 0===a?void 0:a.callback),[2,x.completed])}))}))}]]),Dr=[Pr,Or,jr,Mr],Nr=new Map(c(c([],u(Tr),!1),u(at(Dr)),!1)),Lr={key:"bidURL/pj",default:new Map,postProcessor:tr},Ur={key:"liveRamp/envelope",default:void 0},qr=new ot({scope:"bidURL",object:"pj",action:"update",validators:{detail:{detail:Z,"detail.bidRequestIndex":$,"detail.pj":nt($)}},handler:function(t){var n=t.account,i=t.detail;return r(void 0,void 0,void 0,(function(){var t,r;return o(this,(function(o){if(t={},void 0!==i.pj&&(t=JSON.parse(i.pj)),"object"!=typeof t||Array.isArray(t))throw new Error("Unexpected value for search param pj: ".concat(t));return(r=n.use(Ur))&&(t=e(e({},t),{apsRtisLiveRampCookieSync:r})),Object.keys(t).length>0&&n.update(Lr,(function(n){return n.set(i.bidRequestIndex,t)})),[2,{status:x.completed}]}))}))}}),zr={key:"bidURL/slots",default:new Map,postProcessor:tr},Fr={key:"protectedAudience/defaultAuctionEnvironment",default:void 0},Br={key:"protectedAudience/slotAuctionEnvironment",default:new Map},Vr={key:"adExchangeBidRequests/slotIDs",default:new Set};!function(t){t[t.Sponsored=1]="Sponsored",t[t.Desc=2]="Desc",t[t.Rating=3]="Rating",t[t.Likes=4]="Likes",t[t.Downloads=5]="Downloads",t[t.Price=6]="Price",t[t.SalePrice=7]="SalePrice",t[t.Phone=8]="Phone",t[t.Address=9]="Address",t[t.Desc2=10]="Desc2",t[t.DisplayUrl=11]="DisplayUrl",t[t.CTAText=12]="CTAText",t[t.AmazonDealBadge=507]="AmazonDealBadge",t[t.AmazonCustomerReview=508]="AmazonCustomerReview",t[t.AmazonClimatePledge=511]="AmazonClimatePledge",t[t.AmazonCoupon=512]="AmazonCoupon"}(vr||(vr={})),function(t){t[t.Img=1]="Img",t[t.JS=2]="JS"}(fr||(fr={})),function(t){t[t.Impression=1]="Impression",t[t.ViewableMRC50=2]="ViewableMRC50",t[t.ViewableMRC100=3]="ViewableMRC100",t[t.ViewableVideo50=4]="ViewableVideo50"}(hr||(hr={})),function(t){t[t.Icon=1]="Icon",t[t.Main=3]="Main",t[t.AmazonPrimeLogo=512]="AmazonPrimeLogo",t[t.AmazonBrandingLogo=513]="AmazonBrandingLogo"}(pr||(pr={}));var Jr,Hr,Gr,Wr,Kr,$r,Qr,Zr,Yr,Xr,to,no,eo,io,ro,oo,ao,uo,co,so,lo=function(t,n){return t.some((function(t){return t.event===n}))},vo=new ot({scope:"bidURL",object:"slots",action:"update",validators:{detail:{detail:Z,"detail.bidRequestIndex":$,"detail.slots":nt($)}},handler:function(t){var n=t.account,e=t.detail;return r(void 0,void 0,void 0,(function(){var t;return o(this,(function(i){if(t=[],void 0!==e.slots&&(t=JSON.parse(e.slots)),!Array.isArray(t))throw new Error("Unexpected value for search param slots: ".concat(JSON.stringify(t)));return t.forEach((function(t){fo(n,t),ho(n,t),po(n,t),t.native=function(t,n){var e=n.sd||n.id;if(e){var i=t.use(rr).get(e);if(i&&i.native)return i.native.request.eventtrackers=function(t){var n,e=null!==(n=t.request.eventtrackers)&&void 0!==n?n:[];return lo(e,hr.Impression)||e.push({event:hr.Impression,methods:[fr.Img,fr.JS]}),lo(e,hr.ViewableMRC50)||e.push({event:hr.ViewableMRC50,methods:[fr.Img,fr.JS]}),e}(i.native),i.native}}(n,t)})),t.length>0&&n.update(zr,(function(n){return n.set(e.bidRequestIndex,t)})),[2,{status:x.completed}]}))}))}}),fo=function(t,n){var e=n.sd||n.id;e&&t.update(Vr,(function(t){return t.add(e)}))},ho=function(t,n){var e,i=t.use(Fr),r=t.use(Br).get(null!==(e=n.sd)&&void 0!==e?e:"");n.ae=void 0!==r?r:i},po=function(t,n){var e,i,r,o,a,u,c,s=t.use(rr);if(void 0!==n.id||void 0!==n.sd){var d=null!==(i=s.get(null!==(e=n.id)&&void 0!==e?e:""))&&void 0!==i?i:s.get(null!==(r=n.sd)&&void 0!==r?r:"");if(d){var l=d.banner,v=d.video;if("object"==typeof l&&void 0!==l.pos&&(n.banner={pos:l.pos}),"object"==typeof v){var f=v.pos,h=v.startdelay,p=v.plcmt,m=v.placement;void 0!==f&&(n.video=null!==(o=n.video)&&void 0!==o?o:{},n.video.pos=f),void 0!==h&&(n.video=null!==(a=n.video)&&void 0!==a?a:{},n.video.startdelay=h),void 0!==p&&(n.video=null!==(u=n.video)&&void 0!==u?u:{},n.video.plcmt=p),void 0!==m&&(n.video=null!==(c=n.video)&&void 0!==c?c:{},n.video.placement=m)}}}},mo={key:"adExchangeBidFetching/bidURLs",default:new Map,postProcessor:tr},wo={key:"regulations/regsString",default:""},yo=new ot({scope:"adExchangeBidFetching",object:"bidURLs",action:"update",handler:function(t){var n=t.account,i=t.customEvent;return r(void 0,void 0,void 0,(function(){var t,r,a,s,d,l,v,f,h,p,m;return o(this,(function(o){if(void 0===i.detail||void 0===i.detail.legacyURL)throw new Error("Missing legacyURL");return t=null===(h=i.detail)||void 0===h?void 0:h.bidRequestIndex,r=new URL(i.detail.legacyURL),(a=n.use(wo)).length>0&&r.searchParams.set("regs",a),r.searchParams.set("rt","j"),n.recordListenerNonBlocking(vo,{bidRequestIndex:t,slots:null!==(p=r.searchParams.get("slots"))&&void 0!==p?p:void 0}),null!=(s=n.use(zr).get(t))&&r.searchParams.set("slots",JSON.stringify(s)),n.recordListenerNonBlocking(qr,{bidRequestIndex:t,pj:null!==(m=r.searchParams.get("pj"))&&void 0!==m?m:void 0}),null!=(d=n.use(Lr).get(t))&&r.searchParams.set("pj",JSON.stringify(d)),l=r.toString(),n.update(mo,(function(n){if(void 0===i.detail||void 0===t)throw new Error("Missing bidRequestIndex");return n.set(i.detail.bidRequestIndex,l)})),v={urlLength:l.length},f=function(t){var n={};try{var e=new URL(t);return c([],u(new URLSearchParams(e.search)),!1).forEach((function(t){var e=u(t,2),i=e[0],r=e[1];n[i]=r.length})),n}catch(t){}}(l),void 0!==f&&(v=e(e({},v),{urlParamLengths:f})),[2,{status:x.completed,analytics:v}]}))}))}}),bo={key:"bidResponses/slotIDs",default:new Set},go=new ot({scope:"protectedAudience",object:"gptSlotConfig",action:"set",handler:function(t){t.account;var n=t.customEvent;return r(void 0,void 0,void 0,(function(){var t,i,r,a,u,c,s,d,l;return o(this,(function(o){if(void 0===(null===(c=n.detail)||void 0===c?void 0:c.gptSlot))return[2,{status:x.cancelled}];if(void 0===(null===(s=n.detail)||void 0===s?void 0:s.componentAuctionConfig))throw new Error("Auction config must be defined.");if(t=n.detail,i=t.gptSlot,void 0===(r=t.componentAuctionConfig).decisionLogicURL||null===r.decisionLogicURL)throw new Error("Auction config must have a decisionLogicURL.");return a=h(),u={printDebugSignalsToConsole:a,debugURL:"https://analytics.aps.amazon-adsystem.com/logevent/putRecord"},a&&(null===(d=r.interestGroupBuyers)||void 0===d||d.push("https://web-client-scenarios.aps.amazon.dev"),null===(l=r.interestGroupBuyers)||void 0===l||l.push("https://aps-sandbox.net")),i.setConfig({componentAuction:[{configKey:r.decisionLogicURL,auctionConfig:e(e({},r),{decisionLogicUrl:r.decisionLogicURL,sellerSignals:e(e({},u),r.sellerSignals)})}]}),[2,{status:x.completed}]}))}))}}),_o=new ot({scope:"protectedAudience",object:"componentAuctionData",action:"attach",handler:function(t){var n=t.account,e=t.customEvent;return r(void 0,void 0,void 0,(function(){var t,i,r;return o(this,(function(o){return void 0===(null===(r=null===(i=e.detail)||void 0===i?void 0:i.igi)||void 0===r?void 0:r.igs)?[2,{status:x.cancelled}]:(t=e.detail.igi.igs,n.globalContext.googletag.cmd.push((function(e){void 0===e&&(e=t);var i=n.globalContext.googletag.pubads().getSlots(),r=new Map(i.map((function(t){return[t.getSlotElementId(),t]})));e.forEach((function(t){var e;null===(e=t.impids)||void 0===e||e.forEach((function(e){n.recordListenerNonBlocking(go,{gptSlot:r.get(e),componentAuctionConfig:t.config})}))}))})),[2,{status:x.completed}])}))}))}}),Eo=new ot({scope:"adExchangeBidFetching",object:"amazonAdExchange",action:"fetch",handler:function(t){var n=t.account,e=t.customEvent;return r(void 0,void 0,void 0,(function(){var t,i,r,a,u,c,s,d,l;return o(this,(function(o){switch(o.label){case 0:if(void 0===(null===(s=null==e?void 0:e.detail)||void 0===s?void 0:s.URL))throw new Error("Bid URL must be defined.");return void 0===n.globalContext.apstag?[2,{status:x.waiting}]:(t=e.detail.URL,i=null===(l=null===(d=new URL(t))||void 0===d?void 0:d.searchParams)||void 0===l?void 0:l.get("slots"),[4,n.globalContext.fetch(e.detail.URL,{credentials:"include"})]);case 1:if(!(r=o.sent()).ok)throw new Error("Fetch failed with status: ".concat(r.status));return i&&JSON.parse(i).forEach((function(t){var e=t.sd||t.id;e&&n.update(bo,(function(t){return t.add(e)}))})),[4,r.json()];case 2:return a=o.sent(),u=a.contextual,c=a.igi,void 0!==u&&n.globalContext.apstag.bids(u),void 0!==c&&n.recordListenerNonBlocking(_o,{igi:c}),[2,{status:x.completed}]}}))}))}}),So=at([yo,Eo,qr,vo]),xo=new ot({scope:"cellophane",object:"xhrBidOnLoad",action:"enter",handler:function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(t){return[2,{status:x.completed}]}))}))}}),Co={key:"ad/attachTargeting",default:void 0},Ao=new ot({scope:"cellophane",object:"bids",action:"enter",validators:{detail:{detail:Z,"detail.aaxResp":Z,"detail.aaxResp.cb":nt($),"detail.aaxResp.slots":nt(Y),"detail.aaxResp.host":nt($),"detail.aaxResp.slots[]":rt}},handler:function(t){var n=t.account,e=t.detail;return r(void 0,void 0,void 0,(function(){var t;return o(this,(function(i){return t=e.aaxResp,function(t,n){t.update(nr,(function(t){return function(t,n){var e;null===(e=null==n?void 0:n.slots)||void 0===e||e.forEach((function(n){t.set(n.slotID,new Map)}))}(t,n),function(t,n){var e;null===(e=null==n?void 0:n.slots)||void 0===e||e.forEach((function(e){e.targeting.forEach((function(n){Map.prototype.get.apply(t,[e.slotID]).set(n,e[n])})),n.host&&Map.prototype.get.apply(t,[e.slotID]).set("amznhost",n.host)}))}(t,n),t}))}(n,t),function(t){var n=function(n){var e=n.adServer,i=n.itemIds;t.recordListenerNonBlocking(er,{itemIds:i,adServer:e})};t.update(Co,(function(){return n}))}(n),t.slots?[2,{status:x.completed}]:[2,{status:x.cancelled}]}))}))}}),Ro=function(t){var n,i,r,o,a,u,c,s,d,l,v,f,h={id:t.slotID,tagid:t.slotName,bidfloor:null===(n=t.floor)||void 0===n?void 0:n.value,bidfloorcur:null===(i=t.floor)||void 0===i?void 0:i.currency,ext:e({},t.slotParams)};switch(t.mediaType){case Si.MultiFormat:h.video=Io({sizes:null!==(a=null===(o=null===(r=t.multiFormatProperties)||void 0===r?void 0:r.video)||void 0===o?void 0:o.sizes)&&void 0!==a?a:[],companions:null!==(u=t.companions)&&void 0!==u?u:[]}),h.banner=jo({sizes:null!==(d=null===(s=null===(c=t.multiFormatProperties)||void 0===c?void 0:c.display)||void 0===s?void 0:s.sizes)&&void 0!==d?d:[]});break;case Si.Video:h.video=Io({sizes:null!==(l=t.sizes)&&void 0!==l?l:[],companions:null!==(v=t.companions)&&void 0!==v?v:[]});break;default:h.banner=jo({sizes:null!==(f=t.sizes)&&void 0!==f?f:[]})}return h},ko=function(t){return t.map((function(t){var n=u(t,2);return{w:n[0],h:n[1]}}))},Io=function(t){var n={mimes:[]},e=ko(t.sizes);if(e.length>0&&(n.w=e[0].w,n.h=e[0].h),t.companions.length>0){var i=[];t.companions.forEach((function(t){var n={id:t};i.push(n)})),n.companionad=i}return n},jo=function(t){var n={},e=ko(t.sizes);if(e.length>0){n.w=e[0].w,n.h=e[0].h;var i=[];e.forEach((function(t){i.push({w:t.w,h:t.h})})),n.format=i}return n},Oo=function(t){var n,i,r=Po({display:t.spec.placement.display}),o=To({video:t.spec.placement.video});return{id:t.id,banner:r,video:o,displaymanager:t.spec.placement.sdk,displaymanagerver:t.spec.placement.sdkver,instl:null===(n=t.spec.placement.display)||void 0===n?void 0:n.instl,tagid:t.spec.placement.tagid,bidfloor:t.flr,bidfloorcur:t.flrcur,secure:t.spec.placement.secure,iframebuster:null===(i=t.spec.placement.display)||void 0===i?void 0:i.ifrbust,rwdd:t.spec.placement.reward,ssai:t.spec.placement.ssai,exp:t.exp,dt:t.dt,ext:e(e({},t.ext),t.spec.placement.ext)}},Po=function(t){if(void 0!==t.display)return{format:Mo({displayFmt:t.display.displayfmt}),w:t.display.w,h:t.display.h,pos:t.display.pos,mimes:t.display.mime,topframe:t.display.topframe,api:t.display.api,ext:t.display.ext}},Mo=function(t){if(void 0!==t.displayFmt&&0!==t.displayFmt.length){var n=[];return t.displayFmt.forEach((function(t){n.push({w:t.w,h:t.h,wratio:t.wratio,hratio:t.hratio,ext:t.ext})})),n}},To=function(t){if(void 0!==t.video){var n={mimes:t.video.mime,minduration:t.video.mindur,maxduration:t.video.maxdur,startdelay:t.video.delay,maxseq:t.video.maxseq,poddur:t.video.poddur,protocols:t.video.ctype,w:t.video.w,h:t.video.h,podid:t.video.podid?"".concat(t.video.podid):void 0,podseq:t.video.podseq,rqddurs:t.video.rqddurs,plcmt:t.video.ptype,linearity:t.video.linear,skip:t.video.skip,skipmin:t.video.skipmin,skipafter:t.video.skipafter,slotinpod:t.video.slotinpod,mincpmpersec:t.video.mincpmpersec,maxextended:t.video.maxext,minbitrate:t.video.minbitr,maxbitrate:t.video.maxbitr,boxingallowed:t.video.boxing,playbackmethod:t.video.playmethod,playbackend:t.video.playend,delivery:t.video.delivery,pos:t.video.pos,api:t.video.api,ext:t.video.ext};if(void 0!==t.video.comp&&t.video.comp.length>0){var e=t.video.comp.map((function(t){return{id:t.id}}));n.companionad=e}return n}},Do={"detail.slots":nt(Y),"detail.slots[]":nt(Z),"detail.slots[].slotID":$,"detail.slots[].slotName":nt($),"detail.slots[].sizes":nt(Y),"detail.slots[].sizes[]":Y,"detail.slots[].sizes[][]":K,"detail.slots[].mediaType":nt(X([Si.Display,Si.Video,Si.MultiFormat])),"detail.slots[].slotParams":rt,"detail.slots[].floor":nt(Z),"detail.slots[].floor.currency":X(["USD"]),"detail.slots[].floor.value":K,"detail.slots[].multiFormatProperties":nt(Z),"detail.slots[].multiFormatProperties.display":nt(Z),"detail.slots[].multiFormatProperties.display.sizes":nt(Y),"detail.slots[].multiFormatProperties.display.sizes[]":Y,"detail.slots[].multiFormatProperties.display.sizes[][]":K,"detail.slots[].multiFormatProperties.video":nt(Z),"detail.slots[].multiFormatProperties.video.sizes":nt(Y),"detail.slots[].multiFormatProperties.video.sizes[]":Y,"detail.slots[].multiFormatProperties.video.sizes[][]":K,"detail.slots[].companions":nt(Y),"detail.slots[].companions[]":$};!function(t){t[t.VPAID_1_0=1]="VPAID_1_0",t[t.VPAID_2_0=2]="VPAID_2_0",t[t.MRAID_1_0=3]="MRAID_1_0",t[t.ORMMA=4]="ORMMA",t[t.MRAID_2_0=5]="MRAID_2_0",t[t.MRAID_3_0=6]="MRAID_3_0",t[t.OMID_1_0=7]="OMID_1_0",t[t.SIMID_1_0=8]="SIMID_1_0",t[t.SIMID_1_1=9]="SIMID_1_1"}(Jr||(Jr={})),function(t){t[t.VAST_1_0=1]="VAST_1_0",t[t.VAST_2_0=2]="VAST_2_0",t[t.VAST_3_0=3]="VAST_3_0",t[t.VAST_1_0_WRAPPER=4]="VAST_1_0_WRAPPER",t[t.VAST_2_0_WRAPPER=5]="VAST_2_0_WRAPPER",t[t.VAST_3_0_WRAPPER=6]="VAST_3_0_WRAPPER",t[t.VAST_4_0=7]="VAST_4_0",t[t.VAST_4_0_WRAPPER=8]="VAST_4_0_WRAPPER",t[t.DAAST_1_0=9]="DAAST_1_0",t[t.DAAST_1_0_WRAPPER=10]="DAAST_1_0_WRAPPER",t[t.VAST_4_1=11]="VAST_4_1",t[t.VAST_4_1_WRAPPER=12]="VAST_4_1_WRAPPER",t[t.VAST_4_2=13]="VAST_4_2",t[t.VAST_4_2_WRAPPER=14]="VAST_4_2_WRAPPER",t[t.VAST_4_3=15]="VAST_4_3",t[t.VAST_4_3_WRAPPER=16]="VAST_4_3_WRAPPER"}(Hr||(Hr={})),function(t){t[t.IABTechLabContentCategoryTaxonomy1_0=1]="IABTechLabContentCategoryTaxonomy1_0",t[t.IABTechLabContentCategoryTaxonomy2_0=2]="IABTechLabContentCategoryTaxonomy2_0",t[t.IABTechLabAdProductTaxonomy1_0=3]="IABTechLabAdProductTaxonomy1_0",t[t.IABTechLabAudienceTaxonomy1_1=4]="IABTechLabAudienceTaxonomy1_1",t[t.IABTechLabContentTaxonomy2_1=5]="IABTechLabContentTaxonomy2_1",t[t.IABTechLabContentTaxonomy2_2=6]="IABTechLabContentTaxonomy2_2",t[t.IABTechLabContentTaxonomy3_0=7]="IABTechLabContentTaxonomy3_0",t[t.IABTechLabAdProductTaxonomy2_0=8]="IABTechLabAdProductTaxonomy2_0"}(Gr||(Gr={})),function(t){t[t.NonClickable=0]="NonClickable",t[t.ClickableDetailsUnknown=1]="ClickableDetailsUnknown",t[t.ClickableEmbeddedBrowserOrWebview=2]="ClickableEmbeddedBrowserOrWebview",t[t.ClickableNativeBrowser=3]="ClickableNativeBrowser"}(Wr||(Wr={})),function(t){t[t.Static=1]="Static",t[t.HTML=2]="HTML",t[t.iFrame=3]="iFrame"}(Kr||(Kr={})),function(t){t[t.AudioAdAutoplay=1]="AudioAdAutoplay",t[t.AudioAdUserInitiated=2]="AudioAdUserInitiated",t[t.ExpandableAutomatic=3]="ExpandableAutomatic",t[t.ExpandableUserInitiatedClick=4]="ExpandableUserInitiatedClick",t[t.ExpandableUserInitiatedRollover=5]="ExpandableUserInitiatedRollover",t[t.InBannerVideoAdAutoplay=6]="InBannerVideoAdAutoplay",t[t.InBannerVideoAdUserInitiated=7]="InBannerVideoAdUserInitiated",t[t.Pop=8]="Pop",t[t.ProvocativeOrSuggestiveImagery=9]="ProvocativeOrSuggestiveImagery",t[t.ShakyFlashingFlickeringExtremeAnimationSmileys=10]="ShakyFlashingFlickeringExtremeAnimationSmileys",t[t.Surveys=11]="Surveys",t[t.TextOnly=12]="TextOnly",t[t.UserInteractive=13]="UserInteractive",t[t.WindowsDialogOrAlertStyle=14]="WindowsDialogOrAlertStyle",t[t.HasAudioOnOffButton=15]="HasAudioOnOffButton",t[t.AdProvidesSkipButton=16]="AdProvidesSkipButton",t[t.AdobeFlash=17]="AdobeFlash",t[t.Responsive=18]="Responsive"}($r||($r={})),function(t){t[t.Streaming=1]="Streaming",t[t.Progressive=2]="Progressive",t[t.Downloade=3]="Downloade"}(Qr||(Qr={})),function(t){t[t.ContentCentric=10]="ContentCentric",t[t.Article=11]="Article",t[t.Video=12]="Video",t[t.Audio=13]="Audio",t[t.Image=14]="Image",t[t.UserGenerated=15]="UserGenerated",t[t.Social=20]="Social",t[t.Email=21]="Email",t[t.Chat=22]="Chat",t[t.Product=30]="Product",t[t.Marketplace=31]="Marketplace",t[t.ProductReview=32]="ProductReview"}(Zr||(Zr={})),function(t){t[t.HTML=1]="HTML",t[t.AMPHTML=2]="AMPHTML",t[t.Image=3]="Image",t[t.Native=4]="Native"}(Yr||(Yr={})),function(t){t[t.InFeed=1]="InFeed",t[t.InAtomic=2]="InAtomic",t[t.Outside=3]="Outside",t[t.RecommendationWidget=4]="RecommendationWidget"}(Xr||(Xr={})),function(t){t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.Up=3]="Up",t[t.Down=4]="Down",t[t.FullScreen=5]="FullScreen",t[t.Resize=6]="Resize"}(to||(to={})),function(t){t[t.Linear=1]="Linear",t[t.NonLinear=2]="NonLinear"}(no||(no={})),function(t){t[t.Unknown=0]="Unknown",t[t.AboveTheFold=1]="AboveTheFold",t[t.Locked=2]="Locked",t[t.BelowTheFold=3]="BelowTheFold",t[t.Header=4]="Header",t[t.Footer=5]="Footer",t[t.Sidebar=6]="Sidebar",t[t.Fullscreen=7]="Fullscreen"}(eo||(eo={})),function(t){t[t.VideoCompletion=1]="VideoCompletion",t[t.LeavingViewport=2]="LeavingViewport",t[t.LeavingViewportContinues=3]="LeavingViewportContinues"}(io||(io={})),function(t){t[t.PageLoadSoundOn=1]="PageLoadSoundOn",t[t.PageLoadSoundOff=2]="PageLoadSoundOff",t[t.ClickSoundOn=3]="ClickSoundOn",t[t.MouseOverSoundOn=4]="MouseOverSoundOn",t[t.EnterViewportSoundOn=5]="EnterViewportSoundOn",t[t.EnterViewportSoundOff=6]="EnterViewportSoundOff",t[t.Continuous=7]="Continuous"}(ro||(ro={})),function(t){t[t.Last=-1]="Last",t[t.Any=0]="Any",t[t.First=1]="First"}(oo||(oo={})),function(t){t[t.DIPS=1]="DIPS",t[t.Inches=2]="Inches",t[t.Centimeters=3]="Centimeters"}(ao||(ao={})),function(t){t[t.Last=-1]="Last",t[t.Any=0]="Any",t[t.First=1]="First",t[t.FirstOrLast=2]="FirstOrLast"}(uo||(uo={})),function(t){t[t.InStream=1]="InStream",t[t.InBanner=2]="InBanner",t[t.InArticle=3]="InArticle",t[t.InFeed=4]="InFeed",t[t.Interstitial=5]="Interstitial"}(co||(co={})),function(t){t[t.Instream=1]="Instream",t[t.Accompanying=2]="Accompanying",t[t.Interstitial=3]="Interstitial",t[t.Standalone=4]="Standalone"}(so||(so={}));var No=function(t){var n;return(n={})["".concat(t,".banner")]=nt(Z),n["".concat(t,".banner.format")]=nt(Y),n["".concat(t,".banner.format[]")]=Z,n["".concat(t,".banner.format[].w")]=nt(K),n["".concat(t,".banner.format[].h")]=nt(K),n["".concat(t,".banner.format[].wratio")]=nt(K),n["".concat(t,".banner.format[].hratio")]=nt(K),n["".concat(t,".banner.format[].wmin")]=nt(K),n["".concat(t,".banner.format[].ext")]=rt,n["".concat(t,".banner.w")]=nt(K),n["".concat(t,".banner.h")]=nt(K),n["".concat(t,".banner.btype")]=nt(Y),n["".concat(t,".banner.btype[]")]=K,n["".concat(t,".banner.battr")]=nt(Y),n["".concat(t,".banner.battr[]")]=X(Object.values($r)),n["".concat(t,".banner.pos")]=nt(X(Object.values(eo))),n["".concat(t,".banner.mimes")]=nt(Y),n["".concat(t,".banner.mimes[]")]=$,n["".concat(t,".banner.topframe")]=nt(K),n["".concat(t,".banner.expdir")]=nt(Y),n["".concat(t,".banner.expdir[]")]=X(Object.values(to)),n["".concat(t,".banner.api")]=nt(Y),n["".concat(t,".banner.api[]")]=X(Object.values(Jr)),n["".concat(t,".banner.id")]=nt($),n["".concat(t,".banner.vcm")]=nt(K),n["".concat(t,".banner.ext")]=rt,n},Lo=e(e(e(e({"detail.imp":nt(Y),"detail.imp[]":Z,"detail.imp[].id":$},No("detail.imp[]")),{"detail.imp[].video":nt(Z),"detail.imp[].video.mimes":Y,"detail.imp[].video.mimes[]":$,"detail.imp[].video.minduration":nt(K),"detail.imp[].video.maxduration":nt(K),"detail.imp[].video.startdelay":nt(K),"detail.imp[].video.maxseq":nt(K),"detail.imp[].video.poddur":nt(K),"detail.imp[].video.protocols":nt(Y),"detail.imp[].video.protocols[]":X(Object.values(Hr)),"detail.imp[].video.w":nt(K),"detail.imp[].video.h":nt(K),"detail.imp[].video.podid":nt($),"detail.imp[].video.podseq":nt(X(Object.values(oo))),"detail.imp[].video.rqddurs":nt(Y),"detail.imp[].video.rqddurs[]":K,"detail.imp[].video.placement":nt(K),"detail.imp[].video.plcmt":nt(X(Object.values(so))),"detail.imp[].video.linearity":nt(X(Object.values(no))),"detail.imp[].video.skip":nt(K),"detail.imp[].video.skipmin":nt(K),"detail.imp[].video.skipafter":nt(K),"detail.imp[].video.sequence":nt(K),"detail.imp[].video.slotinpod":nt(K),"detail.imp[].video.mincpmpersec":nt(K),"detail.imp[].video.battr":nt(Y),"detail.imp[].video.battr[]":X(Object.values($r)),"detail.imp[].video.maxextended":nt(K),"detail.imp[].video.minbitrate":nt(K),"detail.imp[].video.maxbitrate":nt(K),"detail.imp[].video.boxingallowed":nt(K),"detail.imp[].video.playbackmethod":nt(Y),"detail.imp[].video.playbackmethod[]":X(Object.values(ro)),"detail.imp[].video.playbackend":nt(X(Object.values(io))),"detail.imp[].video.delivery":nt(Y),"detail.imp[].video.delivery[]":X(Object.values(Qr)),"detail.imp[].video.pos":nt(X(Object.values(eo))),"detail.imp[].video.companionad":nt(Y),"detail.imp[].video.companionad[]":Z}),No("detail.imp[].video.companionad[]")),{"detail.imp[].video.ext":rt,"detail.imp[].native":nt(Z),"detail.imp[].native.request":tt(Z),"detail.imp[].native.request.ver":nt($),"detail.imp[].native.request.context":nt(K),"detail.imp[].native.request.contextsubtype":nt(K),"detail.imp[].native.request.plcmttype":nt(K),"detail.imp[].native.request.plcmtcnt":nt(K),"detail.imp[].native.request.seq":nt(K),"detail.imp[].native.request.assets":Y,"detail.imp[].native.request.assets[]":Z,"detail.imp[].native.request.assets[].id":K,"detail.imp[].native.request.assets[].required":nt(K),"detail.imp[].native.request.assets[].title":nt(Z),"detail.imp[].native.request.assets[].title.len":K,"detail.imp[].native.request.assets[].title.ext":rt,"detail.imp[].native.request.assets[].img":nt(Z),"detail.imp[].native.request.assets[].img.type":nt(K),"detail.imp[].native.request.assets[].img.w":nt(K),"detail.imp[].native.request.assets[].img.wmin":nt(K),"detail.imp[].native.request.assets[].img.h":nt(K),"detail.imp[].native.request.assets[].img.hmin":nt(K),"detail.imp[].native.request.assets[].img.mimes":nt(Y),"detail.imp[].native.request.assets[].img.mimes[]":$,"detail.imp[].native.request.assets[].img.ext":rt,"detail.imp[].native.request.assets[].data":nt(Z),"detail.imp[].native.request.assets[].data.type":K,"detail.imp[].native.request.assets[].data.len":nt(K),"detail.imp[].native.request.assets[].data.ext":rt,"detail.imp[].native.request.assets[].ext":rt,"detail.imp[].native.request.aurlsupport":nt(K),"detail.imp[].native.request.durlsupport":nt(K),"detail.imp[].native.request.eventtrackers":nt(Y),"detail.imp[].native.request.eventtrackers[]":Z,"detail.imp[].native.request.eventtrackers[].event":K,"detail.imp[].native.request.eventtrackers[].methods":Y,"detail.imp[].native.request.eventtrackers[].methods[]":K,"detail.imp[].native.request.eventtrackers[].ext":rt,"detail.imp[].native.request.privacy":nt(K),"detail.imp[].native.request.ext":rt,"detail.imp[].native.ver":nt($),"detail.imp[].native.api":nt(Y),"detail.imp[].native.api[]":K,"detail.imp[].native.battr":nt(Y),"detail.imp[].native.battr[]":K,"detail.imp[].native.ext":rt,"detail.imp[].displaymanager":nt($),"detail.imp[].displaymanagerver":nt($),"detail.imp[].instl":nt(K),"detail.imp[].tagid":nt($),"detail.imp[].bidfloor":nt(K),"detail.imp[].bidfloorcur":nt($),"detail.imp[].clickbrowser":nt(K),"detail.imp[].secure":nt(K),"detail.imp[].iframebuster":nt(Y),"detail.imp[].iframebuster[]":$,"detail.imp[].rwdd":nt(K),"detail.imp[].ssai":nt(K),"detail.imp[].exp":nt(K),"detail.imp[].dt":nt(K),"detail.imp[].ext":rt}),Uo={"detail.item":nt(Y),"detail.item[]":nt(Z),"detail.item[].version":nt($),"detail.item[].id":$,"detail.item[].qty":nt(K),"detail.item[].qtyflt":nt(K),"detail.item[].seq":nt(K),"detail.item[].flr":nt(K),"detail.item[].flrcur":nt($),"detail.item[].exp":nt(K),"detail.item[].dt":nt(K),"detail.item[].dlvy":nt(K),"detail.item[].deal":nt(Y),"detail.item[].deal[]":nt(Z),"detail.item[].deal[].id":nt($),"detail.item[].private":nt(K),"detail.item[].spec":Z,"detail.item[].spec.placement":Z,"detail.item[].spec.placement.tagid":nt($),"detail.item[].spec.placement.ssai":nt(K),"detail.item[].spec.placement.sdk":nt($),"detail.item[].spec.placement.sdkver":nt($),"detail.item[].spec.placement.reward":nt($),"detail.item[].spec.placement.wlang":nt(Y),"detail.item[].spec.placement.wlang[]":$,"detail.item[].spec.placement.secure":nt(K),"detail.item[].spec.placement.admx":nt(K),"detail.item[].spec.placement.curlx":nt(K),"detail.item[].spec.placement.display":nt(Z),"detail.item[].spec.placement.display.pos":nt(K),"detail.item[].spec.placement.display.instl":nt(K),"detail.item[].spec.placement.display.topframe":nt(K),"detail.item[].spec.placement.display.ifrbust":nt(Y),"detail.item[].spec.placement.display.ifrbust[]":$,"detail.item[].spec.placement.display.clktype":nt(X(Object.values(Wr))),"detail.item[].spec.placement.display.ampren":nt(K),"detail.item[].spec.placement.display.ptype":nt(X(Object.values(Xr))),"detail.item[].spec.placement.display.context":nt(X(Object.values(Zr))),"detail.item[].spec.placement.display.mime":nt(Y),"detail.item[].spec.placement.display.mime[]":$,"detail.item[].spec.placement.display.api":nt(Y),"detail.item[].spec.placement.display.api[]":X(Object.values(Jr)),"detail.item[].spec.placement.display.ctype":nt(Y),"detail.item[].spec.placement.display.ctype[]":X(Object.values(Yr)),"detail.item[].spec.placement.display.w":nt(K),"detail.item[].spec.placement.display.h":nt(K),"detail.item[].spec.placement.display.unit":nt(X(Object.values(ao))),"detail.item[].spec.placement.display.priv":nt(K),"detail.item[].spec.placement.display.displayfmt":nt(Y),"detail.item[].spec.placement.display.displayfmt[]":nt(Z),"detail.item[].spec.placement.display.displayfmt[].w":nt(K),"detail.item[].spec.placement.display.displayfmt[].h":nt(K),"detail.item[].spec.placement.display.displayfmt[].wratio":nt(K),"detail.item[].spec.placement.display.displayfmt[].hratio":nt(K),"detail.item[].spec.placement.display.displayfmt[].expdir":nt(Y),"detail.item[].spec.placement.display.displayfmt[].expdir[]":X(Object.values(to)),"detail.item[].spec.placement.display.displayfmt[].ext":rt,"detail.item[].spec.placement.display.ext":rt,"detail.item[].spec.placement.video":nt(Z),"detail.item[].spec.placement.video.ptype":nt(K),"detail.item[].spec.placement.video.pos":nt(K),"detail.item[].spec.placement.video.delay":nt(K),"detail.item[].spec.placement.video.skip":nt(K),"detail.item[].spec.placement.video.skipmin":nt(K),"detail.item[].spec.placement.video.skipafter":nt(K),"detail.item[].spec.placement.video.playmethod":nt(X(Object.values(ro))),"detail.item[].spec.placement.video.playend":nt(X(Object.values(io))),"detail.item[].spec.placement.video.clktype":nt(X(Object.values(Wr))),"detail.item[].spec.placement.video.mime":nt(Y),"detail.item[].spec.placement.video.mime[]":$,"detail.item[].spec.placement.video.api":nt(Y),"detail.item[].spec.placement.video.api[]":X(Object.values(Jr)),"detail.item[].spec.placement.video.ctype":nt(X(Object.values(Hr))),"detail.item[].spec.placement.video.w":nt(K),"detail.item[].spec.placement.video.h":nt(K),"detail.item[].spec.placement.video.unit":nt(X(Object.values(ao))),"detail.item[].spec.placement.video.mindur":nt(K),"detail.item[].spec.placement.video.maxdur":nt(K),"detail.item[].spec.placement.video.rqddurs":nt(Y),"detail.item[].spec.placement.video.rqddurs[]":K,"detail.item[].spec.placement.video.maxext":nt(K),"detail.item[].spec.placement.video.minbitr":nt(K),"detail.item[].spec.placement.video.maxbitr":nt(K),"detail.item[].spec.placement.video.delivery":nt(X(Object.values(Qr))),"detail.item[].spec.placement.video.maxseq":nt(K),"detail.item[].spec.placement.video.poddur":nt(K),"detail.item[].spec.placement.video.podid":nt(K),"detail.item[].spec.placement.video.podseq":nt(X(Object.values(oo))),"detail.item[].spec.placement.video.slotinpod":nt(X(Object.values(uo))),"detail.item[].spec.placement.video.mincpmpersec":nt(K),"detail.item[].spec.placement.video.linear":nt(X(Object.values(no))),"detail.item[].spec.placement.video.boxing":nt(K),"detail.item[].spec.placement.video.comp":nt(Y),"detail.item[].spec.placement.video.comp[]":Z,"detail.item[].spec.placement.video.comp[].id":nt($),"detail.item[].spec.placement.video.comp[].vcm":nt(K),"detail.item[].spec.placement.video.comp[].ext":rt,"detail.item[].spec.placement.video.comptype":nt(X(Object.values(Kr))),"detail.item[].spec.placement.video.expdir":nt(Y),"detail.item[].spec.placement.video.expdir[]":X(Object.values(to)),"detail.item[].spec.placement.video.overlayexpdir":nt(Y),"detail.item[].spec.placement.video.overlayexpdir[]":X(Object.values(to)),"detail.item[].spec.placement.video.ext":rt,"detail.item[].spec.placement.ext":rt,"detail.item[].ext":rt},qo=function(t){var n={id:t.getSlotId().getDomId(),tagid:t.getAdUnitPath()};return n.banner=zo({sizes:t.getSizes()}),n},zo=function(t){var n={},e=t.sizes.map((function(t){return{w:t.width,h:t.height}}));if(e.length>0){n.w=e[0].w,n.h=e[0].h;var i=[];e.forEach((function(t){i.push({w:t.w,h:t.h})})),n.format=i}return n},Fo={"detail.gamSlots":nt(Y),"detail.gamSlots[]":nt(Z),"detail.gamSlots[].getAdUnitPath":nt(et),"detail.gamSlots[].getAdUnitPath()":nt($),"detail.gamSlots[].getSizes":nt(et),"detail.gamSlots[].getSizes()":nt(Y),"detail.gamSlots[].getSizes()[]":nt(Z),"detail.gamSlots[].getSizes()[].width":nt(K),"detail.gamSlots[].getSizes()[].height":nt(K),"detail.gamSlots[].getSlotId":nt(et),"detail.gamSlots[].getSlotId()":nt(Z),"detail.gamSlots[].getSlotId().getDomId":nt(et),"detail.gamSlots[].getSlotId().getDomId()":nt($)},Bo=new ot({scope:"ad",object:"slot",action:"define",validators:{detail:e(e(e(e({detail:Z},Do),Lo),Uo),Fo)},handler:function(t){var n=t.account,e=t.detail;return r(void 0,void 0,void 0,(function(){var t,i,r,a,s,d,l,v;return o(this,(function(o){if(0===(t=c(c(c(c([],u(null!==(i=e.imp)&&void 0!==i?i:[]),!1),u(null!==(a=null===(r=e.item)||void 0===r?void 0:r.map(Oo))&&void 0!==a?a:[]),!1),u(null!==(d=null===(s=e.slots)||void 0===s?void 0:s.map(Ro))&&void 0!==d?d:[]),!1),u(null!==(v=null===(l=e.gamSlots)||void 0===l?void 0:l.map(qo))&&void 0!==v?v:[]),!1)).length)throw new Error("Expecting a non-empty array for 'imp' (OpenRTB 2.6), 'item' (OpenRTB 3.0), or 'slots' (APS legacy).");return t.forEach((function(t){n.update(rr,(function(n){return n.set(t.id,t)}))})),[2,{status:x.completed}]}))}))}}),Vo=new ot({scope:"cellophane",object:"fetchBids",action:"enter",validators:{detail:{detail:Z,"detail.bidConfig":Z,"detail.bidConfig.slots":Y,"detail.bidConfig.slots[]":null,"detail.bidConfig.timeout":nt(K),"detail.bidConfig.params":rt,"detail.bidConfig.blockedBidders":nt(Y),"detail.bidConfig.blockedBidders[]":$,"detail.bidConfig._endpointDomain":nt($)}},handler:function(t){var n=t.account,i=t.detail;return r(void 0,void 0,void 0,(function(){var t,r,a,s,d;return o(this,(function(o){switch(o.label){case 0:return t=c([],u(null!==(d=i.bidConfig.slots)&&void 0!==d?d:[]),!1),r=function(t){var n=t.reduce((function(t,n){var i;if(function(t){return"slotID"in t}(n)){var r=null===(i=null==n?void 0:n.sizes)||void 0===i?void 0:i.filter((function(t){return Array.isArray(t)&&t.every(Number.isInteger)}));(r&&r.length>0||(null==n?void 0:n.mediaType)===Si.Video||(null==n?void 0:n.mediaType)===Si.MultiFormat)&&t.filteredSlots.push(e(e({},n),{sizes:r}))}else n.getSizes().every((function(t){return"width"in t&&"height"in t}))&&t.filteredGamSlots.push(n);return t}),{filteredSlots:[],filteredGamSlots:[]});return{filteredSlots:n.filteredSlots,filteredGamSlots:n.filteredGamSlots}}(t),a=r.filteredSlots,s=r.filteredGamSlots,[4,n.recordListener(Bo,{slots:a,gamSlots:s})];case 1:return o.sent(),[2,{status:x.completed}]}}))}))}}),Jo={key:"cellophane/config",default:void 0},Ho=new ot({scope:"cellophane",object:"init",action:"enter",handler:function(t){var n=t.account,e=t.customEvent;return r(void 0,void 0,void 0,(function(){var t,i,r,a,u,c;return o(this,(function(o){switch(o.label){case 0:return t=null===(r=e.detail)||void 0===r?void 0:r.config,(i=[]).push(n.record(Me,{rates:{error:.001,status:1e-4}}),n.record($e),n.record(V),n.record(z),n.record(wr,{context:null===(a=null==t?void 0:t.signals)||void 0===a?void 0:a.ortb2})),!0!==(null===(c=null===(u=e.detail)||void 0===u?void 0:u.config)||void 0===c?void 0:c.disableConfigCall)&&i.push(n.record(P)),n.update(Jo,(function(){return t})),[4,Promise.all(i)];case 1:return o.sent(),[2,{status:x.completed}]}}))}))}}),Go={key:"ad/amzniidRenderHistory",default:new Set},Wo=new ot({scope:"cellophane",object:"renderImp",action:"enter",handler:function(t){var n=t.account,e=t.customEvent;return r(void 0,void 0,void 0,(function(){var t,i,r,a,u;return o(this,(function(o){if(void 0===(null===(u=e.detail)||void 0===u?void 0:u.renderImpArgs))throw new Error("renderImpArgs must be defined.");if(t=e.detail.renderImpArgs,i=t.bidID,r=t.doc,void 0===(a=null!=i?i:r.amzniid))throw new Error("Invalid bID.");if(n.use(Go).has(a))throw new Error("Targeting reuse detected.");return n.update(Go,(function(t){return t.add(a)})),[2,{status:x.completed}]}))}))}}),Ko=at([xo,Ao,Vo,Ho,Wo,new ot({scope:"cellophane",object:"setDisplayBids",action:"enter",handler:function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(t){return[2,{status:x.completed}]}))}))}})]),$o=new ot({scope:"protectedAudience",object:"slot",action:"activate",handler:function(t){var n=t.account,e=t.customEvent;return r(void 0,void 0,void 0,(function(){var t,i;return o(this,(function(r){if("string"!=typeof(null===(i=e.detail)||void 0===i?void 0:i.slotId)||""===e.detail.slotId.trim())throw new Error("Invalid slotId. Must be a non-empty string.");return t=e.detail.slotId,n.update(Br,(function(n){return n.set(t,1)})),[2,{status:x.completed}]}))}))}}),Qo=new ot({scope:"protectedAudience",object:"slot",action:"deactivate",handler:function(t){var n=t.account,e=t.customEvent;return r(void 0,void 0,void 0,(function(){var t,i;return o(this,(function(r){if("string"!=typeof(null===(i=e.detail)||void 0===i?void 0:i.slotId)||""===e.detail.slotId.trim())throw new Error("Invalid slotId. Must be a non-empty string.");return t=e.detail.slotId,n.update(Br,(function(n){return n.set(t,0)})),[2,{status:x.completed}]}))}))}}),Zo=new ot({scope:"protectedAudience",object:"allSlots",action:"activate",handler:function(t){var n=t.account;return r(void 0,void 0,void 0,(function(){return o(this,(function(t){return n.update(Fr,(function(){return 1})),[2,{status:x.completed}]}))}))}}),Yo=new ot({scope:"protectedAudience",object:"allSlots",action:"deactivate",handler:function(t){var n=t.account;return r(void 0,void 0,void 0,(function(){return o(this,(function(t){return n.update(Fr,(function(){return 0})),[2,{status:x.completed}]}))}))}}),Xo=at([_o,go,$o,Qo,Zo,Yo]),ta={key:"regulations/dsa",default:void 0},na=new ot({scope:"regulations",object:"regsString",action:"update",handler:function(t){var n=t.account;return r(void 0,void 0,void 0,(function(){var t;return o(this,(function(e){return null==(t=n.use(ta))?n.update(wo,(function(){return""})):n.update(wo,(function(){return JSON.stringify({dsa:t})})),[2,{status:x.completed}]}))}))}}),ea=new ot({scope:"regulations",object:"dsa",action:"define",validators:{detail:{detail:Z,"detail.dsa":nt((function(t){try{JSON.stringify(t)}catch(t){throw new Error("must be JSON stringifiable")}}))}},handler:function(t){var n=t.account,e=t.customEvent;return r(void 0,void 0,void 0,(function(){var t,i;return o(this,(function(r){switch(r.label){case 0:if(void 0===(t=e.detail))throw new Error("A dsa object is expected as parameter");return i=t.dsa,n.update(ta,(function(){return i})),[4,n.recordListener(na)];case 1:return r.sent(),[2,{status:x.completed,analytics:{dsa:null!=i?ia(i):0}}]}}))}))}}),ia=function(t){return JSON.stringify(t).length},ra=at([ea,na]),oa={key:"documentReady/readyState",default:void 0},aa=new ot({scope:"documentReady",object:"readyState",action:"didChange",handler:function(t){var n=t.account;return r(void 0,void 0,void 0,(function(){return o(this,(function(t){return n.update(oa,(function(){return n.globalContext.document.readyState})),[2,{status:x.completed}]}))}))}}),ua=new ot({scope:"documentReady",object:"eventListeners",action:"add",handler:function(t){var n=t.account;return r(void 0,void 0,void 0,(function(){return o(this,(function(t){return n.recordListenerNonBlocking(aa),n.globalContext.document.addEventListener("readystatechange",(function(){return n.recordListenerNonBlocking(aa,{source:S.webpage})})),[2,{status:x.completed}]}))}))}}),ca=at([ua,aa]),sa={key:"nativeCommerceAds/timings",default:[]},da=function(t){var n=/(.*\/x\/c\/[a-zA-Z0-9_-]*\/)(.*)(https.*)/;try{if(n.test(t)){var e=n.exec(t);return null!==e&&e.length>=3&&e[2].startsWith("{")&&e[2].endsWith("}")?"".concat(e[1]).concat(encodeURI(e[2])).concat(e[3]):t}}catch(n){return t}return t},la=function(t,n,e){t.update(sa,(function(t){return t.push({time:performance.now(),key:"".concat(n,"/").concat(e)}),t}))},va="NCA",fa={key:"nativeCommerceAds/asinPerRequest",default:14},ha={key:"nativeCommerceAds/asinProcessIter",default:5},pa={key:"nativeCommerceAds/asinProcessDelay",default:250},ma={key:"nativeCommerceAds/contextURL",default:void 0},wa={key:"nativeCommerceAds/getAdsEndpoint",default:"https://c.aps.amazon-adsystem.com/e/dtb/custombid"},ya={key:"nativeCommerceAds/getAdsIsKey",default:"082f8778403939df819c59b1e735a614"},ba={key:"nativeCommerceAds/bidParams",default:{}},ga={key:"nativeCommerceAds/recordMaps",default:new Map},_a=new ot({scope:"nativeCommerceAds",object:"adMarkup",action:"append",validators:{detail:{detail:Z,"detail.response":null,"detail.iteration":K}},handler:function(t){var n=t.account,e=t.detail;return t.customEvent,r(void 0,void 0,void 0,(function(){var t,i,r;return o(this,(function(o){return t=e.response,i=Qt(n.globalContext.document,null===(r=n.globalContext.navigator)||void 0===r?void 0:r.connection,n.globalContext.innerWidth,n.globalContext.innerHeight),"loading"===n.use(oa)?[2,{status:x.waiting,analytics:{browserInfo:i}}]:(null!==(null==t?void 0:t.amznadm)&&void 0!==(null==t?void 0:t.amznadm)&&""!==(null==t?void 0:t.amznadm)&&(la(n,va,"".concat(e.iteration,":appendAdMarkup/start")),function(t,n){var e,i=null!==(e=t.querySelector("a[data-aps-asin]"))&&void 0!==e?e:void 0;if(null!=i){var r=t.createElement("iframe");r.style.marginLeft="0",r.style.marginTop="0",r.style.height="1px",r.style.width="1px",r.setAttribute("data-testid","amzn-nca-ad"),r.setAttribute("scrolling","no"),r.setAttribute("frameborder","0"),r.srcdoc=null!=n?n:"",null==i||i.insertAdjacentElement("afterend",r)}}(n.globalContext.document,null==t?void 0:t.amznadm),la(n,va,"".concat(e.iteration,":appendAdMarkup/end"))),[2,{status:x.completed,analytics:{browserInfo:i}}])}))}))}}),Ea=new ot({scope:"nativeCommerceAds",object:"krypton",action:"didRespond",validators:{detail:{detail:Z,"detail.response":null,"detail.iteration":K,"detail.map":null}},handler:function(t){var n=t.account,i=t.detail;return t.customEvent,r(void 0,void 0,void 0,(function(){var t,r,u,c,s,d,l,v,f,h,p,m,w,y;return o(this,(function(o){switch(o.label){case 0:if(la(n,va,"".concat(i.iteration,":processKryptonResponse/start")),t=Qt(n.globalContext.document,null===(w=n.globalContext.navigator)||void 0===w?void 0:w.connection,n.globalContext.innerWidth,n.globalContext.innerHeight),r=i.response,u=i.map,"loading"===n.use(oa))return[2,{status:x.waiting,value:{didRespond:!1},analytics:{browserInfo:t}}];if(!Array.isArray(null==r?void 0:r.slotBids)||0===(null==r?void 0:r.slotBids.length))return la(n,va,"".concat(i.iteration,":processKryptonResponse/empty")),[2,{status:x.cancelled,value:{didRespond:!1},analytics:{browserInfo:t}}];c=n.use(ga),o.label=1;case 1:o.trys.push([1,6,7,8]),s=a(r.slotBids),d=s.next(),o.label=2;case 2:return d.done?[3,5]:(l=d.value,""!==(v=l.asin)&&null!=v&&(f=null!==(y=c.get(v))&&void 0!==y?y:{apsAsin:"",apsAscTag:"",apsAscSubtag:"",response:void 0,elementStatus:new Map},c.set(v,e(e({},f),{clickUrl:l.clickUrl,impUrl:l.impUrl,tqUrl:l.tqUrl}))),"r"!==l.mode?[3,4]:[4,Sa(n,l,u)]);case 3:o.sent(),o.label=4;case 4:return d=s.next(),[3,2];case 5:return[3,8];case 6:return h=o.sent(),p={error:h},[3,8];case 7:try{d&&!d.done&&(m=s.return)&&m.call(s)}finally{if(p)throw p.error}return[7];case 8:return n.update(ga,(function(){return c})),la(n,va,"".concat(i.iteration,":processKryptonResponse/end")),[2,{status:x.completed,value:{didRespond:!0},analytics:{browserInfo:t}}]}}))}))}});function Sa(t,n,e){var i;return r(this,void 0,void 0,(function(){var u,c,s,d,l,v,f,h,p,m=this;return o(this,(function(w){switch(w.label){case 0:if(u=function(n,e){return r(m,void 0,void 0,(function(){var i,r,a;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),i="nativeCommerceAds/clickUrl/update",void 0===(null==(r=t.read("listeners"))?void 0:r.get(i))?[3,2]:[4,t.record(i,{url:n,element:e})];case 1:return a=o.sent(),null==new URL(a.url)?[2,n]:[2,a.url];case 2:return[3,4];case 3:return o.sent(),[3,4];case 4:return[2,n]}}))}))},null==e&&(e=new Map,c=Array.from(t.globalContext.document.querySelectorAll("[data-aps-asin=".concat(n.asin,"]"))),e.set(n.asin,c)),!e.has(n.asin))return[3,8];c=null!==(i=e.get(n.asin))&&void 0!==i?i:[],w.label=1;case 1:w.trys.push([1,6,7,8]),s=a(c),d=s.next(),w.label=2;case 2:return d.done?[3,5]:(l=d.value,null===n.clickUrl||void 0===n.clickUrl||""===n.clickUrl?[2]:(y=n.impUrl,(new Image).src=y,v=l,[4,u(da(n.clickUrl),l)]));case 3:v.href=w.sent(),l.setAttribute("data-aps-status","success"),w.label=4;case 4:return d=s.next(),[3,2];case 5:return[3,8];case 6:return f=w.sent(),h={error:f},[3,8];case 7:try{d&&!d.done&&(p=s.return)&&p.call(s)}finally{if(h)throw h.error}return[7];case 8:return[2]}var y}))}))}var xa=new ot({scope:"nativeCommerceAds",object:"krypton",action:"fetch",validators:{detail:{detail:Z,"detail.bidUrl":$,"detail.iteration":K}},handler:function(t){var n=t.account,e=t.detail;return t.customEvent,r(void 0,void 0,void 0,(function(){var t,i;return o(this,(function(r){switch(r.label){case 0:return la(n,va,"".concat(e.iteration,":fetchKryptonResponse/start")),[4,fetch(e.bidUrl,{credentials:"include"})];case 1:return[4,r.sent().json()];case 2:return t=r.sent(),la(n,va,"".concat(e.iteration,":fetchKryptonResponse/end")),[2,{status:x.completed,value:{kryptonResponse:t},analytics:{browserInfo:Qt(n.globalContext.document,null===(i=n.globalContext.navigator)||void 0===i?void 0:i.connection,n.globalContext.innerWidth,n.globalContext.innerHeight)}}]}}))}))}}),Ca={key:"nativeCommerceAds/injectTQ",default:void 0},Aa={key:"nativeCommerceAds/tqLibUrl",default:"https://c.aps.amazon-adsystem.com/tqsmartpixel.js"},Ra=new ot({scope:"nativeCommerceAds",object:"trafficQuality",action:"load",validators:{detail:{detail:Z,"detail.iteration":K}},handler:function(t){var n=t.account,e=t.detail;return r(void 0,void 0,void 0,(function(){var t,i,r;return o(this,(function(o){switch(o.label){case 0:return t=Qt(n.globalContext.document,null===(r=n.globalContext.navigator)||void 0===r?void 0:r.connection,n.globalContext.innerWidth,n.globalContext.innerHeight),i=n.use(Aa),null!=n.use(Ca)?[2,{status:x.completed,analytics:{browserInfo:t}}]:(la(n,va,"".concat(e.iteration,":loadTQModule/start")),[4,import(i).then((function(t){n.update(Ca,(function(){return t})),la(n,va,"".concat(e.iteration,":loadTQModule/end"))}))]);case 1:return o.sent(),[2,{status:x.completed,analytics:{browserInfo:t}}]}}))}))}}),ka=new ot({scope:"nativeCommerceAds",object:"trafficQualityUrls",action:"process",validators:{detail:{detail:Z,"detail.response":null,"detail.iteration":K}},handler:function(t){var n=t.account,e=t.detail;return t.customEvent,r(void 0,void 0,void 0,(function(){var t,i,r,a;return o(this,(function(o){switch(o.label){case 0:return t=Qt(n.globalContext.document,null===(a=n.globalContext.navigator)||void 0===a?void 0:a.connection,n.globalContext.innerWidth,n.globalContext.innerHeight),i=e.response,Array.isArray(null==i?void 0:i.slotBids)&&0!==(null==i?void 0:i.slotBids.length)?(r=null==i?void 0:i.slotBids.map((function(t){return t.tqUrl})),[4,n.recordListener(Ra,{iteration:e.iteration}).then((function(){la(n,va,"".concat(e.iteration,":injectTQ/start"));var t=n.use(Ca);r.forEach((function(n){var e;return null===(e=null==t?void 0:t.default)||void 0===e?void 0:e.call(t,n)})),la(n,va,"".concat(e.iteration,":injectTQ/end"))}))]):[2,{status:x.cancelled,value:{isProcessed:!1},analytics:{browserInfo:t}}];case 1:return o.sent(),[2,{status:x.completed,value:{isProcessed:!0},analytics:{browserInfo:t}}]}}))}))}}),Ia=new ot({scope:"nativeCommerceAds",object:"ads",action:"get",validators:{detail:{detail:Z,"detail.nativeContentConfig":null,"detail.iteration":K,"detail.asinMap":null}},handler:function(t){var n=t.account,e=t.detail,i=t.systemAccount;return r(void 0,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return[4,ja(n,e.nativeContentConfig,e.iteration,i,e.asinMap)];case 1:return r.sent(),[2,{status:x.completed,analytics:{browserInfo:Qt(n.globalContext.document,null===(t=n.globalContext.navigator)||void 0===t?void 0:t.connection,n.globalContext.innerWidth,n.globalContext.innerHeight)}}]}}))}))}});function ja(t,n,i,a,u){var c;return r(this,void 0,void 0,(function(){var r,s,d,l,v,f;return o(this,(function(o){switch(o.label){case 0:return r=t.id,s=36===t.id.length,d={src:r,pubid:r,u:Pa(t,t.use(ma)),sg:encodeURIComponent(JSON.stringify(Oa(t,n))),pj:encodeURIComponent(JSON.stringify({is:t.use(ya)})),pid:Ma(a)},s&&(d.src="600"),d=e(e({},d),t.use(ba)),l=Object.keys(d).filter((function(t){return"undefined"!==d[t]&&""!==d[t]&&null!==d[t]})).map((function(t){var n=d[t];return void 0!==n?"".concat(t,"=").concat(String(n)):null})).filter((function(t){return null!==t})).join("&"),v=t.use(ga),null===(c=n.sourceAsins)||void 0===c||c.forEach((function(t){"object"==typeof t&&null!==t&&v.set(t.apsAsin,e(e({},t),{elements:null==u?void 0:u.get(t.apsAsin)}))})),t.update(ga,(function(){return v})),[4,t.recordListener(xa,{bidUrl:"".concat(t.use(wa),"?").concat(l),iteration:i})];case 1:return f=o.sent().kryptonResponse,[4,Promise.all([t.recordListener(Ea,{response:f,iteration:i,map:u}),t.recordListener(ka,{response:f,iteration:i}),t.recordListener(_a,{response:f,iteration:i})])];case 2:return o.sent(),[2]}}))}))}function Oa(t,n){var r,o,a,u,c,s,d={ortb2:{}},l=function(t){try{var n=t.use(an);return void 0!==n&&"user"in n?(n.user,{ortb2:i(n,["user"])}):{ortb2:n}}catch(t){return{}}}(t);return d.ortb2=l.ortb2,d.ortb2=e(e({},null!==(r=d.ortb2)&&void 0!==r?r:{}),{site:e(e({},null!==(a=null===(o=d.ortb2)||void 0===o?void 0:o.site)&&void 0!==a?a:{}),{ext:e(e({},null!==(s=null===(c=null===(u=d.ortb2)||void 0===u?void 0:u.site)||void 0===c?void 0:c.ext)&&void 0!==s?s:{}),n)})}),d}function Pa(t,n){try{var e=null!=n?n:function(t){var n,e;try{if(void 0!==(null===(n=t.globalContext.top)||void 0===n?void 0:n.location.href))return null===(e=t.globalContext.top)||void 0===e?void 0:e.location.href}catch(t){}try{if(t.globalContext.top!==t.globalContext.self)return t.globalContext.document.referrer}catch(t){}}(t);if(void 0!==e)return encodeURIComponent(e)}catch(t){}return""}function Ma(t){return t.store.get(v)}var Ta=["apsStatus"],Da=new ot({scope:"nativeCommerceAds",object:"service",action:"enable",validators:{},handler:function(t){var n=t.account;return t.detail,t.customEvent,r(void 0,void 0,void 0,(function(){var t,e,i,a;return o(this,(function(u){switch(u.label){case 0:return t=Qt(n.globalContext.document,null===(a=n.globalContext.navigator)||void 0===a?void 0:a.connection,n.globalContext.innerWidth,n.globalContext.innerHeight),"loading"===n.use(oa)?[2,{status:x.waiting,analytics:{browserInfo:t}}]:[4,Na(n,0)];case 1:u.sent(),e=n.use(pa),i=1,u.label=2;case 2:return i<=n.use(ha)?[4,(c=e,s=Na(n,i),r(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){setTimeout(t,c)})).then((function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,s];case 1:return[2,t.sent()]}}))}))}))];case 1:return[2,t.sent()]}}))})))]:[3,5];case 3:u.sent(),u.label=4;case 4:return i++,[3,2];case 5:return[2,{status:x.completed,analytics:{browserInfo:t}}]}var c,s}))}))}}),Na=function(t,n){return void 0===n&&(n=0),r(void 0,void 0,void 0,(function(){var e,i,r,u,c,s,d,l;return o(this,(function(o){switch(o.label){case 0:return 0!==(e=Ua(t,n)).size?[3,2]:[4,Promise.resolve()];case 1:case 3:return[2,o.sent()];case 2:i=[],function(t,n){for(var e=[],i=0;i<t.length;i+=n)e.push(t.slice(i,i+n));return e}(Array.from(e.keys()),t.use(fa)).forEach((function(t){return i.push({sourceAsins:t.map((function(t){var n;return La((null!==(n=e.get(t))&&void 0!==n?n:[])[0])}))})})),r=[];try{for(u=a(i),c=u.next();!c.done;c=u.next())s=c.value,r.push(t.recordListener(Ia,{nativeContentConfig:s,iteration:n,asinMap:e}))}catch(t){d={error:t}}finally{try{c&&!c.done&&(l=u.return)&&l.call(u)}finally{if(d)throw d.error}}return[4,Promise.all(r).then((function(){}))]}}))}))},La=function(t){var n={};return void 0!==t&&Object.keys(t.dataset).filter((function(n){return n.startsWith("aps")&&!Ta.includes(n)&&t.dataset[n]})).forEach((function(e){return n[e]=t.dataset[e]})),n},Ua=function(t,n){void 0===n&&(n=0),la(t,va,"".concat(n,":fetchEligibleElements/start"));var e=0,i=Array.from(t.globalContext.document.querySelectorAll("a[data-aps-asin]")).map((function(t){return t})).filter((function(t){return function(t){return null!==t.dataset.apsAsin&&void 0!==t.dataset.apsAsin&&""!==t.dataset.apsAsin&&"null"!==t.dataset.apsAsin}(t)&&"read"!==t.dataset.apsStatus&&"success"!==t.dataset.apsStatus})).reduce((function(t,n){var i,r=n.dataset.apsAsin;return void 0!==r&&(void 0===t.get(r)&&t.set(r,[]),null===(i=t.get(r))||void 0===i||i.push(n),n.setAttribute("data-aps-status","read"),e++),t}),new Map);return 0===i.size?la(t,va,"".concat(n,":fetchEligibleElements/empty")):la(t,va,"".concat(n,":fetchEligibleElements/asins/").concat(i.size,"/elements/").concat(e)),i},qa=at([Da,Ia,_a,Ea,ka,xa,Ra]),za=new ot({scope:"googleAdManagerSlotRequested",object:"slotRequestedEvent",action:"didTrigger",validators:{detail:{detail:Z,"detail.event":Z,"detail.event.slot":Z,"detail.event.slot.getSlotId":et,"detail.event.slot.getSlotId()":Z,"detail.event.slot.getSlotId().getDomId":et,"detail.event.slot.getSlotId().getDomId()":$,"detail.event.slot.getTargeting":et}},handler:function(t){var n=t.account,e=t.detail;return r(void 0,void 0,void 0,(function(){var t,i,r,a;return o(this,(function(o){return t=e.event.slot,i=n.use(rr),r=function(t,n){var e=n.get(t.getSlotId().getDomId()),i=Boolean(e);return i?{mediaType:(null==e?void 0:e.banner)&&e.video?Si.MultiFormat:(null==e?void 0:e.video)?Si.Video:Si.Display,hasMatchingSlot:i}:{mediaType:"unknown",hasMatchingSlot:i}}(t,i),a=r.mediaType,r.hasMatchingSlot?(n.record("googleAdManagerSlotRequested/matchingSlotDefinition/didExist",{analytics:{mediaType:a}}),function(t,n){return n.use(Vr).has(t.getSlotId().getDomId())}(t,n)?(n.record("googleAdManagerSlotRequested/matchingBidRequest/didExist",{analytics:{mediaType:a}}),function(t,n){return n.use(bo).has(t.getSlotId().getDomId())}(t,n)?(n.record("googleAdManagerSlotRequested/matchingBidResponse/didExist",{analytics:{mediaType:a}}),[2,{status:x.completed}]):(n.record("googleAdManagerSlotRequested/matchingBidResponse/didNotExist",{analytics:{mediaType:a}}),[2,{status:x.completed}])):(n.record("googleAdManagerSlotRequested/matchingBidRequest/didNotExist",{analytics:{mediaType:a}}),[2,{status:x.completed}])):(n.record("googleAdManagerSlotRequested/matchingSlotDefinition/didNotExist",{analytics:{mediaType:a}}),[2,{status:x.completed}])}))}))}}),Fa=new ot({scope:"googlePublisherTag",object:"slotRequestedEvent",action:"listen",handler:function(t){var n=t.account;return r(void 0,void 0,void 0,(function(){var t;return o(this,(function(e){return void 0===(null===(t=n.globalContext.googletag)||void 0===t?void 0:t.cmd)?[2,{status:x.waiting}]:(n.globalContext.googletag.cmd.push((function(){var t,e;if(void 0===(null===(t=n.globalContext.googletag)||void 0===t?void 0:t.pubads))throw new Error("Undefined googletag.pubads");null===(e=n.globalContext.googletag)||void 0===e||e.pubads().addEventListener("slotRequested",(function(t){n.recordListener(za,{event:t})}))})),[2,{status:x.completed}])}))}))}}),Ba=at([Fa,za]),Va=at([Bo]),Ja="liveRamp/envelope",Ha={key:"liveRamp/envelopeHost",default:"https://api.rlcdn.com"},Ga=new ot({scope:"liveRamp",object:"envelope",action:"fetch",handler:function(t){var n=t.account;return r(void 0,void 0,void 0,(function(){var t,e,i,r,a,u,c;return o(this,(function(o){switch(o.label){case 0:return"unknown"===(t=n.use(w))?[2,{status:x.waiting}]:"US"!==t?[2,{status:x.cancelled}]:void 0===(null===(c=n.globalContext.apstag)||void 0===c?void 0:c._atsaaiod)?[2,{status:x.waiting}]:(e=n.use(Ha),(i=new URL("".concat(e,"/api/identity/envelope"))).searchParams.append("pid","13310"),[4,n.globalContext.fetch(i.toString(),{method:"GET",credentials:"include"})]);case 1:if(!(r=o.sent()).ok)throw new Error("Unable to fetch LiveRamp envelope. Status: ".concat(r.status));return[4,r.json()];case 2:if(!(a=o.sent()).envelope)throw new Error("Response missing envelope.");return u=JSON.stringify({value:a.envelope,createdAt:Date.now()}),n.update(Ur,(function(){return a.envelope})),n.writeLocalStorage(Ja,u,{usePrefix:!0}),[2,{status:x.completed}]}}))}))}}),Wa=new ot({scope:"liveRamp",object:"envelope",action:"sync",handler:function(t){var n=t.account;return r(void 0,void 0,void 0,(function(){var t,e,i,r,a,u;return o(this,(function(o){switch(o.label){case 0:return(t=n.use(w))&&"unknown"!==t?"US"!==t?[2,{status:x.cancelled}]:void 0===(null===(u=n.globalContext.apstag)||void 0===u?void 0:u._atsaaiod)?[2,{status:x.waiting}]:(e=n.readLocalStorage(Ja,{usePrefix:!0}))&&(i=JSON.parse(e),r=i.createdAt,(a=i.value)&&Ka(r,Date.now())<15)?(n.update(Ur,(function(){return a})),[2,{status:x.completed}]):[4,n.recordListener(Ga)]:[2,{status:x.waiting}];case 1:return o.sent(),[2,{status:x.completed}]}}))}))}}),Ka=function(t,n){var e=new Date(t),i=new Date(n);return(e.getTime()-i.getTime())/864e5},$a=at([Ga,Wa]),Qa=new(function(){function t(){}return t.prototype.select=function(t){return t.length?t[Math.floor(Math.random()*t.length)]:void 0},t}()),Za=function(){function t(){}return t.getEnabledFormats=function(t,n){var e,i,r=Object.entries(t).sort((function(t,n){var e=u(t,1)[0],i=u(n,1)[0],r=e.length-(e.match(/\*/g)||[]).length;return i.length-(i.match(/\*/g)||[]).length-r}));try{for(var o=a(r),s=o.next();!s.done;s=o.next()){var d=u(s.value,2),l=d[0],v=d[1];if("*"===l)return c([],u(v),!1);var f=l;if(f=(f=f.replace(/[.+?^${}()|[\]\\]/g,"\\$&")).replace(/^\*\\\./,"([^.]+\\.)*").replace(/\*/g,"[^/]*"),new RegExp("^".concat(f,"$")).test(n))return c([],u(v),!1)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}return[]},t.selectFormat=function(t){return Qa.select(t)},t}(),Ya=new ot({scope:"customFormats",object:"ad",action:"fetch",validators:{detail:{detail:Z,"detail.amzniid":$,"detail.amznbid":$,"detail.amznp":$,"detail.amznhost":$}},handler:function(t){var n=t.account,e=t.systemAccount,i=t.detail;return r(void 0,void 0,void 0,(function(){var t,r,a,u;return o(this,(function(o){switch(o.label){case 0:return t=new URL("".concat(i.amznhost,"/e/dtb/admi")),r=e.store.get(v),t.searchParams.set("b",i.amzniid),t.searchParams.set("rnd",r),t.searchParams.set("pp",i.amznbid),t.searchParams.set("p",i.amznp),[4,n.globalContext.fetch(t.toString(),{method:"GET",headers:{Accept:"application/json"}})];case 1:if(!(a=o.sent()).ok)throw new Error("Ad markup request failed with status ".concat(a.status,"."));return[4,a.text()];case 2:return u=o.sent(),[2,{status:x.completed,analytics:{},value:{ad:{adHtml:u}}}]}}))}))}}),Xa=new ot({scope:"customFormats",object:"slot",action:"define",validators:{detail:{detail:Z,"detail.slotID":$,"detail.w":K,"detail.h":K}},handler:function(t){var n=t.account,e=t.detail;return r(void 0,void 0,void 0,(function(){var t;return o(this,(function(i){switch(i.label){case 0:return t={id:e.slotID,banner:{format:[{w:e.w,h:e.h}]}},[4,n.recordListener(Bo,{imp:[t]})];case 1:return i.sent(),[2,{status:x.completed}]}}))}))}}),tu=new ot({scope:"customFormats",object:"targeting",action:"fetch",validators:{detail:{detail:Z,"detail.slotID":$}},handler:function(t){var n=t.account,e=t.detail;return r(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,n.record(mr,{itemIds:[e.slotID]})];case 1:return t.sent(),[2,{status:x.completed,analytics:{}}]}}))}))}}),nu=function(){function t(n){t.account=n}return t.getInstance=function(n){return t.instance||(t.instance=new t(n)),t.instance},t.prototype.getAd=function(n){return r(this,void 0,void 0,(function(){var e,i,r,a,u;return o(this,(function(o){switch(o.label){case 0:return[4,t.account.recordListener(Xa,{slotID:n.getSlotName(),w:n.getDefaultCreativeSize().width,h:n.getDefaultCreativeSize().height})];case 1:return o.sent(),[4,t.account.recordListener(tu,{slotID:n.getSlotName()})];case 2:if(o.sent(),!(e=t.account.use(nr).get(n.getSlotName())))return[2,void 0];if(!(i=e.get("amzniid")))throw new Error("amzniid targeting value was falsy for format: ".concat(n.getName()));if(!(r=e.get("amznbid")))throw new Error("amznbid targeting value was falsy for format: ".concat(n.getName()));if(!(a=e.get("amznp")))throw new Error("amznp targeting value was falsy for format: ".concat(n.getName()));if(!(u=e.get("amznhost")))throw new Error("amznhost targeting value was falsy for format: ".concat(n.getName()));return[4,t.account.recordListener(Ya,{amzniid:i,amznbid:r,amznp:a,amznhost:u})];case 3:return[2,o.sent().ad]}}))}))},t}(),eu=function(){function t(t){this.account=t}return t.prototype.emitAdShown=function(t){this.account.record("customFormats/".concat(t,"Ad/displayed")).catch((function(){}))},t.prototype.emitFormatShown=function(t){this.account.record("customFormats/".concat(t,"/displayed")).catch((function(){}))},t.prototype.emitFormatClosed=function(t){this.account.record("customFormats/".concat(t,"/closed")).catch((function(){}))},t.prototype.emitButtonHover=function(){this.account.record("customFormats/button/hover").catch((function(){}))},t}(),iu=function(){function t(){}return t.getContainerId=function(t){return"aps-formats-root-".concat(t)},t}(),ru=function(){function t(t){this.showFormat=!0,this.hasBeenDisplayed=!1,this.account=t,this.creativeSize=this.getDefaultCreativeSize(),this.eventEmitter=new eu(t),this.bidService=nu.getInstance(t)}return t.prototype.setShowFormat=function(t){return r(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return this.showFormat=t,[4,this.render()];case 1:return n.sent(),[2]}}))}))},t.prototype.renderToContainer=function(){return r(this,void 0,void 0,(function(){var t,n,e,i,r,a;return o(this,(function(o){switch(o.label){case 0:if(t=this.account.globalContext.document,!(n=t.getElementById(iu.getContainerId(this.account.id))))throw new Error("Root container not found");return e=this.getName().toLowerCase().replace(/\//g,"-"),(i=n.querySelector("#".concat(e)))&&i.remove(),this.showFormat?((r=t.createElement("div")).id=e,n.appendChild(r),[4,this.renderFormat(this.ad,this.showFormat)]):[3,2];case 1:a=o.sent(),r.appendChild(a),this.hasBeenDisplayed||(this.eventEmitter.emitFormatShown(this.getName()),this.hasBeenDisplayed=!0),o.label=2;case 2:return[2]}}))}))},t.prototype.render=function(){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return this.ad?[3,2]:[4,this.bidService.getAd(this)];case 1:if(!(t=n.sent()))return[2];this.ad=t,n.label=2;case 2:return[4,this.renderToContainer()];case 3:return n.sent(),[2]}}))}))},t}(),ou=function(){function t(){}return t.injectStyles=function(t,n,e){var i;if(!this.injectedStyles.has(n)){var r=null===(i=t.globalContext)||void 0===i?void 0:i.document,o=r.createElement("style");o.setAttribute("data-custom-format",n),o.textContent=e,r.head.appendChild(o),this.injectedStyles.add(n)}},t.removeStyles=function(t,n){var e;if(this.injectedStyles.has(n)){var i=(null===(e=t.globalContext)||void 0===e?void 0:e.document).querySelector('style[data-custom-format="'.concat(n,'"]'));i&&(i.remove(),this.injectedStyles.delete(n))}},t.injectedStyles=new Set,t}(),au="\n:root {\n  --z-index-modal: 999999;\n  --transition-duration: 0.2s;\n  --transition-timing: ease-out;\n  --color-text: #000000;\n  --color-background: #FFFFFF;\n  --overlay-button-width: clamp(3em, 4vw, 5em);\n  --overlay-button-height: clamp(3em, 4vw, 5em);\n  --overlay-button-bottom: 2.5em;\n  --overlay-button-left: 2.5em;\n}\n",uu=function(){function t(t){this.props=t,ou.injectStyles(t.account,"variables",au),ou.injectStyles(t.account,"sandbox-iframe",'\n[id^="aps-formats-root-"] {\n  .overlay__iframe-container {\n    position: relative;\n    margin-top: 1em;\n  }\n\n  .overlay__iframe,\n  .adhesion__iframe {\n    border: none;\n    overflow: hidden;\n    width: var(--iframe-width);\n    height: var(--iframe-height);\n    margin: 0;\n    padding: 0;\n    display: block;\n  }\n}\n')}return t.prototype.create=function(){var t=this.props.account.globalContext.document.createElement("iframe");return t.srcdoc=this.props.srcdoc,t.setAttribute("sandbox","allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox"),t.referrerPolicy="no-referrer",t.setAttribute("scrolling","no"),t.style.setProperty("--iframe-width","".concat(this.props.width)),t.style.setProperty("--iframe-height","".concat(this.props.height)),t},t}(),cu=function(){function t(t){this.props=t,this.eventEmitter=new eu(t.account),ou.injectStyles(t.account,"variables",au),ou.injectStyles(t.account,"overlay-button",'\n[id^="aps-formats-root-"] {\n    .overlay-button {\n    width: var(--overlay-button-width);\n    height: var(--overlay-button-height);\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: filter var(--transition-duration) var(--transition-timing);\n    will-change: filter;\n  }\n\n  .overlay-button:hover {\n    filter: drop-shadow(0 0.25em 0.5em rgba(0, 0, 0, 0.2));\n  }\n\n  .overlay-button__svg {\n    width: 100%;\n    height: 100%;\n  }\n\n  .overlay-button__circle {\n    fill: #FF6200;\n  }\n\n  .overlay-button__path {\n    fill: var(--color-background);\n  }\n}\n')}return t.prototype.create=function(){var t=this,n=this.props.account.globalContext.document,e=n.createElement("div");e.className="overlay-button",e.addEventListener("mouseenter",(function(){return r(t,void 0,void 0,(function(){return o(this,(function(t){return this.eventEmitter.emitButtonHover(),[2]}))}))})),e.addEventListener("click",(function(n){return r(t,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return n.stopPropagation(),[4,this.props.onClick()];case 1:return t.sent(),[2]}}))}))}));var i=n.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("class","overlay-button__svg"),i.setAttribute("viewBox","0 0 160 160"),i.setAttribute("fill","none");var a=n.createElementNS("http://www.w3.org/2000/svg","circle");a.setAttribute("cx","80"),a.setAttribute("cy","80"),a.setAttribute("r","80"),a.setAttribute("class","overlay-button__circle");var u=n.createElementNS("http://www.w3.org/2000/svg","path");u.setAttribute("d","M25.5025 70.1034C25.0028 70.5241 24.86 71.1552 25.1455 72.0667C25.4311 72.9081 26.0737 73.8898 27.0732 75.1519C31.0712 80.0603 35.8546 84.0571 41.4234 87.2825C46.9921 90.508 52.9178 92.8921 59.2719 94.4347C65.6259 95.9773 72.1228 96.7486 78.7624 96.7486C85.402 96.7486 95.3258 95.5566 103.036 93.1024C110.747 90.7184 117.172 87.2825 122.313 82.9352C124.098 81.3925 125.026 80.1304 125.026 79.2188C125.026 78.3073 124.883 78.5177 124.597 78.1671C124.169 77.7463 123.741 77.6061 123.169 77.7463C122.598 77.8866 121.813 78.2372 120.813 78.728C115.887 81.2523 109.89 83.2858 102.751 84.8284C95.6828 86.371 88.3292 87.1423 80.6187 87.1423C72.9081 87.1423 61.9134 85.8802 53.0606 83.3559C44.2077 80.8316 36.3544 76.8348 29.5006 71.4356C28.5011 70.6643 27.7157 70.1735 27.0732 69.9631C26.502 69.7528 26.0023 69.8229 25.6453 70.1034H25.5025Z"),u.setAttribute("class","overlay-button__path");var c=n.createElementNS("http://www.w3.org/2000/svg","path");return c.setAttribute("d","M115.388 72.0669C114.816 72.6279 114.674 73.1187 114.959 73.7498C115.173 74.1705 115.53 74.3808 116.03 74.451C116.601 74.5211 117.315 74.451 118.315 74.3107C119.957 73.9601 121.599 73.7498 123.384 73.6095C125.169 73.4693 126.668 73.5394 127.953 73.6796C129.238 73.89 130.023 74.1705 130.38 74.6613C130.88 75.3625 130.666 76.9051 129.881 79.2191C129.095 81.533 127.953 83.7768 126.596 85.9505C126.025 86.7919 125.74 87.4931 125.597 87.9839C125.454 88.4748 125.597 88.8955 126.025 89.2461C126.239 89.4564 126.525 89.5967 126.811 89.5967C127.596 89.5967 128.738 88.8955 130.237 87.5632C132.879 85.3194 134.807 82.5848 135.878 79.4294C136.449 77.8167 136.806 76.1338 136.949 74.3107C137.091 72.5577 136.949 71.2956 136.377 70.5243C135.878 69.753 134.735 69.192 132.95 68.7012C131.237 68.2104 129.452 68 127.739 68C124.312 68 121.099 68.7713 117.958 70.384C116.815 71.0151 115.959 71.5761 115.388 72.0669Z"),c.setAttribute("class","overlay-button__path"),i.appendChild(a),i.appendChild(u),i.appendChild(c),e.appendChild(i),e},t}(),su=function(){function t(t){this.props=t,ou.injectStyles(t.account,"variables",au),ou.injectStyles(t.account,"close-button",'\n[id^="aps-formats-root-"] {\n  .close-button {\n    width: 1em;\n    height: 1em;\n    cursor: pointer;\n    background-color: var(--color-text);\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: transform var(--transition-duration) var(--transition-timing);\n    border: none;\n    padding: 0;\n  }\n\n  .close-button:hover {\n    transform: scale(1.1);\n  }\n\n  .close-button:focus {\n    outline: 2px solid var(--color-text);\n    outline-offset: 2px;\n  }\n\n  .close-button__icon {\n    width: 9px;\n    height: 9px;\n    display: block;\n  }\n\n  .close-button__icon path {\n    fill: var(--color-background);\n  }\n\n  .close-button__icon rect {\n    fill: var(--color-background);\n  }\n\n  .close-button__icon g {\n    clip-path: url(#clip0_1606_24);\n  }\n}\n')}return t.prototype.create=function(){var t=this,n=this.props.account.globalContext.document,e=n.createElement("button");e.setAttribute("class","close-button"),e.setAttribute("type","button"),e.setAttribute("aria-label","Close advertisement"),e.addEventListener("click",(function(){t.props.onClick()}));var i=n.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("class","close-button__icon"),i.setAttribute("width","9"),i.setAttribute("height","9"),i.setAttribute("viewBox","0 0 11 11");var r=n.createElementNS("http://www.w3.org/2000/svg","g"),o=n.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d","M0.954505 8.45448C0.515165 8.89383 0.515165 9.60618 0.954505 10.0455C1.39385 10.4848 2.10615 10.4848 2.5455 10.0455L5.5 7.09099L8.45448 10.0455C8.89383 10.4848 9.60618 10.4848 10.0455 10.0455C10.4848 9.60618 10.4848 8.89383 10.0455 8.45448L7.09099 5.5L10.0455 2.5455C10.4848 2.10615 10.4848 1.39385 10.0455 0.954505C9.60618 0.515165 8.89383 0.515165 8.45448 0.954505L5.5 3.90901L2.5455 0.954505C2.10615 0.515165 1.39385 0.515165 0.954506 0.954505C0.515166 1.39385 0.515166 2.10615 0.954506 2.5455L3.90901 5.5L0.954505 8.45448Z");var a=n.createElementNS("http://www.w3.org/2000/svg","defs"),u=n.createElementNS("http://www.w3.org/2000/svg","clipPath");u.setAttribute("id","clip0_1606_24");var c=n.createElementNS("http://www.w3.org/2000/svg","rect");return c.setAttribute("width","9.75"),c.setAttribute("height","9.75"),c.setAttribute("transform","translate(0.625 0.625)"),u.appendChild(c),a.appendChild(u),r.appendChild(o),i.appendChild(r),i.appendChild(a),e.appendChild(i),e},t}(),du=function(){function t(t){this.props=t,this.state={showAd:!1},ou.injectStyles(t.account,"variables",au),ou.injectStyles(t.account,"overlay",'\n[id^="aps-formats-root-"] {\n  .overlay {\n    z-index: var(--z-index-modal);\n  }\n\n  .overlay__button-container {\n    position: fixed;\n    bottom: var(--overlay-button-bottom);\n    left: var(--overlay-button-left);\n  }\n\n  .overlay__close-container {\n    position: fixed;\n    bottom: calc(var(--overlay-button-bottom) + var(--overlay-button-height) - 0.5em);\n    left: calc(var(--overlay-button-left) + var(--overlay-button-width) - 0.5em);\n    z-index: calc(var(--z-index-modal) + 1);\n  }\n\n  .overlay__ad-container {\n    position: fixed;\n    left: calc(var(--overlay-button-left) + 1.4em);\n    bottom: calc(var(--overlay-button-bottom) + var(--overlay-button-height) - 0.5em);\n  }\n  \n  @media (max-width: 399px) {\n    .overlay__ad-container {\n      left: 0;\n      right: 0;\n      margin-inline: auto;\n      width: max-content;\n      bottom: calc(var(--overlay-button-bottom) + var(--overlay-button-height) + 0.5rem);\n    }\n  }\n\n  .overlay__ad-close {\n    position: absolute;\n    right: -4%;\n    top: 0;\n    z-index: calc(var(--z-index-modal) + 1);\n  }\n}\n')}return t.prototype.mount=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){return[2]}))}))},t.prototype.setState=function(t){this.state=t,this.container&&this.updateDOM()},t.prototype.updateDOM=function(){var t=this,n=this.props.account.globalContext.document;if(this.container.innerHTML="",this.props.show){var e=n.createElement("div");if(e.className="overlay__button-container",e.appendChild(new cu({onClick:this.handleButtonClick.bind(this),account:this.props.account}).create()),this.container.appendChild(e),!this.state.showAd){var i=n.createElement("div");i.className="overlay__close-container",i.appendChild(new su({onClick:this.handleFormatCloseClick.bind(this),account:this.props.account}).create()),this.container.appendChild(i)}}if(this.state.showAd&&this.props.show){var a=n.createElement("div");a.className="overlay__ad-container",a.style.setProperty("--creative-width","".concat(this.props.creativeWidth)),a.style.setProperty("--creative-ratio","".concat(this.props.creativeWidth," / ").concat(this.props.creativeHeight));var u=n.createElement("div");u.className="overlay__iframe-container";var c=new uu({srcdoc:this.props.ad.adHtml,width:this.props.creativeWidth,height:this.props.creativeHeight,account:this.props.account}).create();c.className="overlay__iframe",u.appendChild(c),a.appendChild(u);var s=n.createElement("div");s.className="overlay__ad-close",s.appendChild(new su({onClick:function(){return r(t,void 0,void 0,(function(){return o(this,(function(t){return[2,this.setState({showAd:!1})]}))}))},account:this.props.account}).create()),a.appendChild(s),this.container.appendChild(a)}},t.prototype.handleButtonClick=function(){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return t=!this.state.showAd,this.setState({showAd:t}),t?[4,this.props.onShowAd()]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.handleFormatCloseClick=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.props.onHide()];case 1:return t.sent(),this.setState({showAd:!1}),[2]}}))}))},t.prototype.create=function(){var t=this.props.account.globalContext.document;return this.container=t.createElement("div"),this.container.className="overlay",this.updateDOM(),this.container},t}(),lu={width:300,height:250};!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}n(e,t),e.prototype.getDefaultCreativeSize=function(){return lu},e.prototype.getName=function(){return"OVERLAY/WEB/BOTTOM_LEFT"},e.prototype.getSlotName=function(){return"aps-custom-ad-formats-overlay"},e.prototype.renderFormat=function(t,n){return r(this,void 0,void 0,(function(){var e,i,a=this;return o(this,(function(u){switch(u.label){case 0:return e=new du({creativeWidth:"".concat(this.getDefaultCreativeSize().width,"px"),creativeHeight:"".concat(this.getDefaultCreativeSize().height,"px"),ad:t,show:n,onHide:function(){return r(a,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this.eventEmitter.emitFormatClosed("overlay"),[4,this.setShowFormat(!1)];case 1:return t.sent(),[2]}}))}))},onShowAd:function(){return r(a,void 0,void 0,(function(){return o(this,(function(t){return this.eventEmitter.emitAdShown("overlay"),[2]}))}))},account:this.account}),i=e.create(),[4,e.mount()];case 1:return u.sent(),[2,i]}}))}))}}(ru);var vu=function(){function t(t){this.props=t,ou.injectStyles(this.props.account,"variables",au),ou.injectStyles(this.props.account,"adhesion",'\n[id^="aps-formats-root-"] {\n  .adhesion {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    z-index: var(--z-index-modal);\n    background: linear-gradient(to bottom, transparent, #000000);\n  }\n\n  .adhesion__container {\n    position: relative;\n    margin: 0 auto;\n    width: fit-content;\n  }\n\n  .adhesion__content {\n    position: relative;\n    width: var(--creative-width);\n    aspect-ratio: var(--creative-ratio);\n    display: flex;\n    align-items: center;\n  }\n\n  .adhesion__iframe {\n    width: 100%;\n    height: 100%;\n  }\n\n  .adhesion__close {\n    position: absolute;\n    right: -1.0em;\n    top: 15%;\n    transform: translateY(-50%);\n  }\n}\n')}return t.prototype.mount=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.props.onShowAd()];case 1:return t.sent(),[2]}}))}))},t.prototype.updateDOM=function(){var t=this,n=this.props.account.globalContext.document;if(this.container.innerHTML="",this.props.show){var e=n.createElement("div");e.className="adhesion__container",e.setAttribute("role","complementary"),e.setAttribute("aria-label","Advertisement");var i=n.createElement("div");i.className="adhesion__content",i.style.setProperty("--creative-width","".concat(this.props.creativeWidth)),i.style.setProperty("--creative-ratio","".concat(this.props.creativeWidth," / ").concat(this.props.creativeHeight));var r=new uu({srcdoc:this.props.ad.adHtml,width:this.props.creativeWidth,height:this.props.creativeHeight,account:this.props.account}).create();r.className="adhesion__iframe",i.appendChild(r),e.appendChild(i);var o=n.createElement("div");o.className="adhesion__close";var a=new su({onClick:function(){return t.props.onHide()},account:this.props.account}).create();a.setAttribute("aria-label","Close advertisement"),o.appendChild(a),i.appendChild(o),this.container.appendChild(e)}},t.prototype.create=function(){var t=this.props.account.globalContext.document;return this.container=t.createElement("div"),this.container.className="adhesion",this.updateDOM(),this.container},t}(),fu={width:320,height:50};!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}n(e,t),e.prototype.getDefaultCreativeSize=function(){return fu},e.prototype.getName=function(){return"ADHESION/WEB"},e.prototype.getSlotName=function(){return"aps-custom-ad-formats-adhesion"},e.prototype.renderFormat=function(t,n){return r(this,void 0,void 0,(function(){var e,i,a=this;return o(this,(function(u){switch(u.label){case 0:return e=new vu({creativeWidth:"".concat(this.getDefaultCreativeSize().width,"px"),creativeHeight:"".concat(this.getDefaultCreativeSize().height,"px"),ad:t,show:n,onHide:function(){return r(a,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this.eventEmitter.emitFormatClosed("adhesion"),[4,this.setShowFormat(!1)];case 1:return t.sent(),[2]}}))}))},onShowAd:function(){return r(a,void 0,void 0,(function(){return o(this,(function(t){return this.eventEmitter.emitAdShown("adhesion"),[2]}))}))},account:this.account}),i=e.create(),[4,e.mount()];case 1:return u.sent(),[2,i]}}))}))}}(ru);var hu={key:"customFormats/enabledFormats",default:[]},pu=new ot({scope:"customFormats",object:"client",action:"bootstrap",validators:{detail:{detail:Z,"detail.config":Z,"detail.config.pages":Z,"detail.config.pages.key()":$,"detail.config.pages.*":Y,"detail.config.pages.*[]":$}},handler:function(t){var n=t.account,e=t.detail;return r(void 0,void 0,void 0,(function(){var t,i,r;return o(this,(function(o){if(!(t=n.use(w)))return[2,{status:x.waiting}];if("US"!==t)return[2,{status:x.cancelled}];if(i=e.config,0===(r=Za.getEnabledFormats(i.pages,n.globalContext.location.href)).length)throw new Error("No enabled custom formats for this page.");var a,u;return n.update(hu,(function(){return r})),(u=(a=n.globalContext.document).createElement("script")).src="https://client.aps.amazon-adsystem.com/publisher-custom_formats.js",u.async=!0,a.head.appendChild(u),[2,{status:x.completed}]}))}))}}),mu=at([pu]),wu="publisher";!function(t){void 0===t&&(t={});var n=e(e({},A),t),i=n.C,r=n.O;try{i((function(){!function(t){void 0===t&&(t={});var n=e(e({},A),t),i=n.A,r=n.I,o=n.j,a=n.O;try{var u=i();if(void 0===u||0===u.length)return;!function(t,n){if(!n()){_(p.postulate,t);var e=n.toString(),i="Assertion failed: ".concat(e);throw t&&(i+=" - ".concat(t)),new Error(i)}}("5c098d",(function(){return Array.isArray(u)}));var c=u.shift();if(void 0===c)return;r(p.postulate,c.hash,o(c.context,t.R||A.R))}catch(t){a(t)}}(e(e({},A),t))}),3e3)}catch(t){r(t)}}();try{b.fireReferencePixel(wu);var yu=new Map(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c([],u(M),!1),u(H),!1),u(xr),!1),u(Ve),!1),u(_r),!1),u(Ji),!1),u(O),!1),u(Rr),!1),u(Te),!1),u(Ki),!1),u(mn),!1),u(ii),!1),u(Qe),!1),u(Ir),!1),u(Nr),!1),u(xn),!1),u(Xe),!1),u(Ht),!1),u(Pe),!1),u(So),!1),u(Ko),!1),u(gi),!1),u(Xo),!1),u(Vi),!1),u(ra),!1),u(ca),!1),u(qa),!1),u(Ba),!1),u(Va),!1),u($a),!1),u(mu),!1)),bu=new Mt,gu=bu.registerEventSource(wu);gu.recordListener(Ye,{restrictions:{block:{accounts:[mt]}}}),gu.recordListener(ua,{restrictions:{block:{accounts:[mt]}}}),gu.recordListener(Fa,{restrictions:{block:{accounts:[mt]}}}),bu.load({listeners:yu})}catch(t){b.logCoreError({id:wu,error:t,account:null}),h()&&gt.error(t)}}();/*! @amzn/apswebapstaglibrary - apstag-legacy - 25.510.1915 */
!function(t){var e={};function n(r){var o;return(e[r]||(o=e[r]={i:r,l:!1,exports:{}},t[r].call(o.exports,o,o.exports,n),o.l=!0,o)).exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=38)}([function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){try{var e=parseInt(t,10);if(!isNaN(e))return!(e<=0)&&(100<=e||100*Math.random()<=e)}catch(t){}return!1}function i(){return"".concat(Math.round(1e12*Math.random())).concat(Date.now())}function a(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=new Array(t),r=0;r<t;r++)n[r]=e[Math.floor(Math.random()*e.length)];return n.join("")}function c(t){return"object"===r(t)&&null!==t}function s(t){return"[object Array]"===Object.prototype.toString.call(t)}function u(t,e){return c(t)&&void 0!==t[e]&&""!==t[e]}function l(t,e){return-1!==t.indexOf(e)}function f(t){var e=new Date;return e.setDate(e.getDate()+t),e.toUTCString()}function d(t){try{var e=t.innerWidth||t.document.documentElement.clientWidth||t.document.body.clientWidth,n=t.innerHeight||t.document.documentElement.clientHeight||t.document.body.clientHeight;return"".concat(e,"x").concat(n)}catch(t){}return"x"}function b(t,e){return decodeURIComponent(t).split("?")[0].split("#")[0]===decodeURIComponent(e).split("?")[0].split("#")[0]}function p(t){var e=Object.keys(t);return e.filter((function(e){return t[e]})).length===e.length}n.d(e,"k",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return a})),n.d(e,"i",(function(){return c})),n.d(e,"h",(function(){return s})),n.d(e,"j",(function(){return u})),n.d(e,"g",(function(){return l})),n.d(e,"e",(function(){return f})),n.d(e,"f",(function(){return d})),n.d(e,"b",(function(){return b})),n.d(e,"a",(function(){return p}))},function(t,e,n){"use strict";n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return d})),n.d(e,"d",(function(){return b})),n.d(e,"a",(function(){return p}));e=n(0);var r=n(2),o=n(6),i=n(9),a=n(15),c=n(3),s=Object(e.k)(10),u=[],l=(!0===Object(o.c)("exposeErrors")&&(window.apstagErrors=u),function(t,e,n){try{var r=Date.now(),o={eventSource:"apstag",eventTime:r,eventCategory:"error",eventName:null!=n?n:"unknown",eventProperties:{accountID:t,libraryVersion:c.l,url:Object(i.f)(window),error:{name:"string"==typeof e?e:e.name,message:"string"==typeof e?e:e.message}}},a={Data:window.btoa(JSON.stringify(o)),PartitionKey:r};fetch("https://prod.tahoe-analytics.publishers.advertising.a2z.com/logevent/putRecords?encoded=true",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":"5e0b19374596b1c8abfb0560fcb956220131d0a7f7100979de5d18cfada355d5"},body:JSON.stringify({Records:[a]})}).catch((function(){}))}catch(t){}});function f(t,e,n){try{(null!=n&&n.makeVisibleToAllUsers||Object(o.d)("errors"))&&console.error(t);var c,f,d={ts:Date.now(),url:encodeURIComponent(Object(i.f)(window)),r:encodeURIComponent(Object(i.g)(window)),_type:"apsLibraryError",e:{et:t.name,el:e,msg:t.message}};return u.push(d),r.a.dispatch({type:"LOG_ERROR",error:d}),Math.random()<=.001&&(f=null!=(c=null==n?void 0:n.accountId)?c:Object(a.unsafelyGuessAccountID)(),l(f,t,e)),!!s}catch(t){console.error(t)}return!1}function d(t,e,n,r){return f({name:e,message:"".concat(t," was of type '").concat(e,"' instead of '").concat(n,"'")},"TypeError-".concat(t),r)}function b(t,e){return function(){try{return t.apply(null,arguments)}catch(t){return f(t,e,{makeVisibleToAllUsers:!0}),null}}}function p(t){(1<arguments.length&&void 0!==arguments[1]&&arguments[1]||Object(o.d)("errors"))&&console.warn(t)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r,o=n(3),i=(e=n(7),n(0));n=n(6);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return(e=function(t){return t=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==a(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===a(t)?t:String(t)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var n;if(t)return"string"==typeof t?f(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var d={AAXReqs:[],aaxViewabilityEnabled:!1,bidConfigs:{},bidReqs:{},bsPixels:{},cfg:{v:-1,CSM_JS:"//c.amazon-adsystem.com/aax2/csm.js.gz",CSM_RTB_COMMUNICATOR_JS:"".concat(o.v,"c.amazon-adsystem.com/bao-csm/aps-comm/aps_csm.js"),DEBUG_APP_HTML:"//c.amazon-adsystem.com/aax2/debugApp.html",DEBUG_APP_HTML_V2:"//c.amazon-adsystem.com/aax2/debug_app_v2.html",DEFAULT_TIMEOUT:2e3,DTB_PATH:"/e/dtb",TEST_PATH_FREQUENCY:0,TEST_BID_ENDPOINT:null,TEST_PATH_LATENCY_SAMPLE_RATE:null,PIXEL_PATH:"/x/px/",LATENCY_SAMPLING_RATE:1,COOKIE_MATCH_DELAY:0,MAX_SLOTS_PER_REQUEST:1,SLOT_RENDER_SAMPLING_RATE:1,FEATURE_SAMPLING_RATE:1,CONFIG_CALL_ENABLED:!1,LIB_CONFIG_PATH:"/cdn/prod/config"},cmpFired:!1,config:{pubID:""},displayAdServer:{noBidSlotIDs:[],shouldSampleRender:!1,slotRenderEndedSet:!1},errors:[],eventLog:[],experiments:{},gamSlotFetchLog:[],gamSlotRenderPixel:{aaxReqOffset:0,gamSlotFetchLogOffset:0},hosts:{DEFAULT_AAX_BID_HOST:"aax.amazon-adsystem.com",DEFAULT_AAX_PIXEL_HOST:"aax.amazon-adsystem.com",DEFAULT_CXM_HOST:"c.amazon-adsystem.com",DEFAULT_BS_HOST:"cxm-bcn.publisher-services.amazon.dev"},identityState:{},libraryLoadCallLatency:0,Q:[],slotBids:{},targetingKeys:{},tcfParseTime:0,outstream:{renderStart:0,shouldSample:!1},consentManagementPlatform:{}};function b(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:d,e=1<arguments.length?arguments[1]:void 0;return{AAXReqs:function(t,e){switch(e.type){case"RECORD_AAX_REQUEST":return[].concat(l(t),[e.data]);case"RECORD_AAX_REQ_PROP":return t.map((function(t){return(t=s({},t)).bidReqID===e.bidReqID&&(t[e.key]=e.value),t}));default:return l(t)}}(t.AAXReqs,e),aaxViewabilityEnabled:function(t,e){return"SET_VIEWABILITY"!==e.type?t:e.viewability}(t.aaxViewabilityEnabled,e),bidConfigs:function(t,e){return"RECORD_ORIGINAL_BID_CONFIG"!==e.type?s({},t):s(s({},t),{},u({},e.bidConfig.bidReqID,e.bidConfig))}(t.bidConfigs,e),bidReqs:function(t,e){var n;switch(e.type){case"ADD_CHUNKED_REQUESTS":return s(s({},t),{},u({},e.fid,s(s({},t[e.fid]),{},{networkReqs:new Array(e.numChunks)})));case"NEW_FETCH_BID_REQUEST":return s(s({},t),{},u({},e.fid,{pto:e.pto,hasCallbackExecuted:!1,networkReqs:[]}));case"RECORD_CALLBACK":return s(s({},t),{},u({},e.fid,s(s({},t[e.fid]),{},{hasCallbackExecuted:!0})));case"RECORD_NETWORK_EXCHANGE":var r=t[e.fid].networkReqs;return r[e.networkID]=s(s({},r[e.networkID]),{},(u(n={},"".concat(e.exchangeType,"Time"),e.timestamp),u(n,"inFlight","request"===e.exchangeType),n)),s(s({},t),{},u({},e.fid,s(s({},t[e.fid]),{},{networkReqs:r})));case"RECORD_TIMEOUT":return s(s({},t),{},u({},e.fid,s(s({},t[e.fid]),{},{networkReqs:t[e.fid].networkReqs.map((function(t){return t.inFlight?s(s({},t),{},{timeOut:e.timeOut}):t}))})));default:return s({},t)}}(t.bidReqs,e),bsPixels:function(t,e){return"RECORD_BID_INFO_SENT"!==e.type?s({},t):s(s({},t),{},u({},e.bidInfo.iid,e.bidInfo.state))}(t.bsPixels,e),cfg:function(t,e){return"SET_CFG"!==e.type?s({},t):s(s({},t),e.cfg)}(t.cfg,e),cmpFired:function(t,e){return"CMP_FIRED"===e.type||t}(t.cmpFired,e),config:function(t,e){return"SET_CONFIG"!==e.type?s({},t):s(s({},e.config),{},{gdpr:s({cmpTimeout:e.defaultCmpTimeout},e.config.gdpr),isSelfServePub:void 0!==e.config.pubID&&5<=e.config.pubID.length})}(t.config,e),displayAdServer:function(t,e){switch(e.type){case"SLOT_RENDER_ENDED_SET":return s(s({},t),{},{slotRenderEndedSet:!0});case"NO_BID_ON_ADSERVER_SLOTS":return s(s({},t),{},{noBidSlotIDs:t.noBidSlotIDs.concat(e.slotIDs)});case"REQUESTED_BID_FOR_ADSERVER_SLOTS":return s(s({},t),{},{noBidSlotIDs:t.noBidSlotIDs.filter((function(t){return!Object(i.g)(e.slotIDs,t)}))});case"SHOULD_SAMPLE_SLOT_RENDER":return s(s({},t),{},{shouldSampleRender:e.value});default:return s(s({},t),{},{noBidSlotIDs:l(t.noBidSlotIDs)})}}(t.displayAdServer,e),errors:function(t,e){return"LOG_ERROR"!==e.type?l(t):[].concat(l(t),[s({},e.error)])}(t.errors,e),eventLog:function(t,e){return"LOG_EVENT"!==e.type?l(t):[].concat(l(t),[s({},e.event)])}(t.eventLog,e),experiments:function(t,e){switch(e.type){case"SHOULD_CHUNK_REQUESTS":return s({chunkRequests:!0===t.shouldSampleLatency&&e.value},t);case"SHOULD_SAMPLE_LATENCY":return s(s({},t),{},{shouldSampleLatency:e.value});case"SHOULD_SAMPLE_FEATURES":return s(s({},t),{},{shouldSampleFeatures:e.value});case"SHOULD_USE_TEST_BID_ENDPOINT":return s(s({},t),{},{shouldUseTestBidEndpoint:e.value});default:return s({},t)}}(t.experiments,e),gamSlotFetchLog:function(t,e){return"LOG_GAM_EVENT"!==e.type?l(t):[].concat(l(t),[s({},e.event)])}(t.gamSlotFetchLog,e),gamSlotRenderPixel:function(t,e){return"UPDATE_RENDER_OFFSETS"!==e.type?s({},t):s(s({},t),e.offsets)}(t.gamSlotRenderPixel,e),hosts:function(t,e){return"SET_HOST"!==e.type?s({},t):s(s({},t),{},u({},e.hostName,e.hostValue))}(t.hosts,e),identityState:function(t,e){return"RECORD_IDENTITY_STATE"!==e.type?t:s(s({},t),{},u({},e.vendor,Object(i.j)(t,e.vendor)?t[e.vendor]:e.identityState))}(t.identityState,e),libraryLoadCallLatency:function(t,e){return"RECORD_LIBRARY_LOAD_CALL_LATENCY"!==e.type?t:e.latency}(t.libraryLoadCallLatency,e),Q:function(t,e){return"SET_Q"!==e.type?l(t):l(e.Q)}(t.Q,e),slotBids:function(t,e){switch(e.type){case"BID_STATE_CHANGE":return s(s({},t),{},u({},e.slotID,t[e.slotID].map((function(t){return t._targetingSetID===e._targetingSetID&&(t.bidState=e.bidState,e.bidState===o.c.rendered?t.timing.renderTime=e.ts:e.bidState===o.c.set&&t.timing.setAtTimes.push(e.ts)),t}))));case"UPDATE_BID_INFO_PROP":return void 0===t[e.slotID]||t[e.slotID].filter((function(t){return t.matchesBidCacheId(e.iid)})).length<1?s({},t):s(s({},t),{},u({},e.slotID,t[e.slotID].map((function(t){return t.matchesBidCacheId(e.iid)&&(t[e.key]=e.value),t}))));case"UPDATE_SLOT_BIDS":return s(s({},t),e.bids.reduce((function(e,n){return Object(i.j)(e,n.slotID)?e[n.slotID]=[].concat(l(e[n.slotID]),[n]):Object(i.j)(t,n.slotID)?e[n.slotID]=[].concat(l(t[n.slotID]),[n]):e[n.slotID]=[n],e}),{}));default:return s({},t)}}(t.slotBids,e),targetingKeys:function(t,e){return"UPDATE_SLOT_BIDS"!==e.type?s({},t):s(s({},t),e.bids.reduce((function(e,n){return Object(i.j)(t,n.slotID)?e[n.slotID]=[].concat(l(t[n.slotID]),l((n.bidConfig.targeting||o.i).filter((function(e){return-1===t[n.slotID].indexOf(e)})))):e[n.slotID]=n.bidConfig.targeting||o.i,e}),{}))}(t.targetingKeys,e),tcfParseTime:function(t,e){return"RECORD_TCF_PARSE_TIME"!==e.type?t:e.time}(t.tcfParseTime,e),outstream:function(t,e){switch(e.type){case"RECORD_OUTSTREAM_RENDER_START_TIME":return s(s({},t),{},{renderStart:e.time});case"OUTSTREAM_SHOULD_SAMPLE":return s(s({},t),{},{shouldSample:e.shouldSample});default:return t}}(t.outstream,e),consentManagementPlatform:function(t,e){switch(e.type){case"RECORD_CMP_LISTENED_TO":return s(s({},t),{},{isListenedTo:e.isListenedTo});case"RECORD_CMP_CONSENT_DATA":return s(s({},t),{},{tcData:e.tcData});default:return t}}(t.consentManagementPlatform,e)}}var p={getState:function(){return r},dispatch:function(t){r=b(r,t)}};(p=Object(n.d)("redux")&&Object(e.b)()&&Object(i.j)(window,"__REDUX_DEVTOOLS_EXTENSION__")?window.__REDUX_DEVTOOLS_EXTENSION__(b):p).dispatch({type:"NOOP"})},function(t,e,n){"use strict";n.d(e,"m",(function(){return a})),n.d(e,"i",(function(){return c})),n.d(e,"z",(function(){return s})),n.d(e,"c",(function(){return r})),n.d(e,"h",(function(){return u})),n.d(e,"y",(function(){return l})),n.d(e,"f",(function(){return f})),n.d(e,"g",(function(){return d})),n.d(e,"d",(function(){return b})),n.d(e,"p",(function(){return p})),n.d(e,"n",(function(){return y})),n.d(e,"e",(function(){return m})),n.d(e,"x",(function(){return g})),n.d(e,"w",(function(){return h})),n.d(e,"o",(function(){return o})),n.d(e,"u",(function(){return O})),n.d(e,"j",(function(){return v})),n.d(e,"t",(function(){return i})),n.d(e,"s",(function(){return j})),n.d(e,"l",(function(){return S})),n.d(e,"r",(function(){return w})),n.d(e,"v",(function(){return T})),n.d(e,"b",(function(){return E})),n.d(e,"k",(function(){return D})),n.d(e,"a",(function(){return _})),n.d(e,"q",(function(){return I})),n.d(e,"A",(function(){return P}));var r,o,i,a=25,c=["amznbid","amzniid","amznsz","amznp"],s=["amznbid","amzniid","amznp","r_amznbid","r_amzniid","r_amznp"],u=((n=r=r||{}).new="NEW",n.exposed="EXPOSED",n.set="SET",n.rendered="RENDERED","apstagDebug"),l=["redux","fake_bids","verbose","console","console_v2","errors"],f="apstagDebugHeight",d="apstagDEBUG",b="apstagCfg",p=0,y=0,m="apstagCxMEnabled",g="3pmetadata",h=5,O=((e=o=o||{}).amznbid="testBid",e.amzniid="testImpression",e.amznp="testP",e.crid="testCrid",["amznbid","amznp"]),v=new Map([["__apsid","ck"],["__aps_id_p","ckp"]]),j=((n=i=i||{}).noRequest="0",n.bidInFlight="1",n.noBid="2","600"),S="25.510.1915",w="https://",T="http".concat("s://"),E="".concat(w,"aax.amazon-adsystem.com/e/dtb/vast?"),D="function"==typeof XMLHttpRequest&&void 0!==(new XMLHttpRequest).withCredentials,_="apstagLOADED",I=13,P='<!DOCTYPE html>\n<html>\n  <head>\n    <title>APS Video Ads</title>\n    <script src="https://video-player.aps.amazon-adsystem.com/apsvid.js" onerror="$$apsvidonerror$$"><\/script>\n  </head>\n  <body>\n    <div id="amazon-ads-container" style="height: 100%; width: 100%; position: absolute;">\n    </div>\n    <script type="text/javascript">\nconst adsContainer = document.querySelector("#amazon-ads-container")\nconst companionContainers =\n  window.AmazonVideoAds.findCompanionDivs($$apstagCompanionContainers$$)\nconst videoPlayerProps = $$videoPlayerProps$$\n\nconst amazonVideoAds = new window.AmazonVideoAds(adsContainer,\n{ ...videoPlayerProps,\n  companions: companionContainers });\nwindow.adsM;\n\nfunction addListeners(adsM, amazonVideoAds) {\n  adsM.addListener(amazonVideoAds.eventNames.AdVideoPlayerEvents.COMPLETED, (e) => {\n    window.top.postMessage({"apsVideoPlayer": true, "event": "completed"}, window.top.location.origin);\n  })\n  adsM.addListener(amazonVideoAds.eventNames.AdVideoPlayerEvents.LOADED, (e) => {\n    window.top.postMessage({"apsVideoPlayer": true, "event": "loaded"}, window.top.location.origin);\n  })\n}\n \nwindow.requestAndPlay = () => {\n  amazonVideoAds.fetchAdsFromUrl("$$apstagVastTag$$")\n    .then(adsManager => {\n      adsM = adsManager;\n \n      adsM.init({\n        fullscreen: true,\n        muted: true,\n        volume: .3,\n        autoplay: false,\n        controls: false,\n        preload: "auto"\n      })\n\n      addListeners(adsM, amazonVideoAds);\n      adsM.startAds(2000, {shouldVideoRemainAfterPlay: true});\n    })\n    .catch(function(err) {\n      console.log("apstag failed to get APS ads manager", err);\n    });\n  }\n \n  requestAndPlay();\n    <\/script>\n  </body>\n</html>'},function(t,e,n){"use strict";var r,o;function i(t){return void 0!==t.amzniid}function a(t){return void 0!==t.kvMap}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return i})),n.d(e,"c",(function(){return a})),(n=r=r||{}).DISPLAY="display",n.VIDEO="video",n.MULTI_FORMAT="multi-format",(e=o=o||{}).MANAGED_WEB="mw",e.SELF_SERVE_WEB="ssw"},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function a(t,e,n){(e=c(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function c(t){return t=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==r(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===r(t)?t:String(t)}n.d(e,"a",(function(){return l}));var s=function(){function t(e){if(e=e.accountID,!(this instanceof t))throw new TypeError("Cannot call a class as a function");a(this,"accountID",void 0),this.accountID=e,this.init()}var e,n;return e=t,(n=[{key:"queue",get:function(){var t;return null==(t=window._aps.get(this.accountID))?void 0:t.queue}},{key:"init",value:function(){window._aps=window._aps||new Map,window._aps.has(this.accountID)||window._aps.set(this.accountID,{queue:[],store:new Map})}},{key:"safelyRecord",value:function(t,e){this.record(t,e).catch((function(){}))}},{key:"record",value:function(t,e){var n=this;return new Promise((function(r,i){window._aps.get(n.accountID).queue.push(new window.CustomEvent(t,{detail:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({resolve:r,reject:i,source:"apstag"},e)}))}))}},{key:"read",value:function(t){var e;return null==(e=window._aps)?void 0:e.get(this.accountID).store.get(t)}}])&&i(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),u={},l=function(t){return"string"!=typeof t&&(t=t.toString()),window._aps&&window._aps.has(t)&&u[t]||(u[t]=new s({accountID:t})),u[t]}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return m})),n.d(e,"d",(function(){return T})),n.d(e,"c",(function(){return D})),n.d(e,"e",(function(){return I}));var r=n(2),o=n(7),i=n(0),a=n(3),c=n(8),s=n(1),u=["getLog","getState"];function l(t,e,n){try{switch(Object(i.g)(u,t)&&(Object(s.b)(new Error("Debug call made: ".concat(t)),"debugPublicApi-call-".concat(t)),u=u.filter((function(e){return e!==t}))),t){case"getLog":return r.a.getState().eventLog;case"getState":return r.a.getState();case"enable":return E("fake_bids",!0),"DEBUG MODE ENABLED";case"disable":return E("fake_bids",!1),"DEBUG MODE DISABLED";case"enableConsole":return m(!1,"command"),"Debug console enabled";case"enableConsoleV2":return m(!0,"command"),"Debug console v2 enabled";case"disableConsole":try{E("console",!1),E("console_v2",!1),null!==f&&document.body.removeChild(f),y=!1,Object(o.b)()&&o.a.getDefault().localStorage.removeItem(a.f)}catch(e){Object(s.b)(e,"disableDebugConsole",{makeVisibleToAllUsers:!0})}return"Debug console disabled";case"setDebug":return(E(e,n)?"Set debug mode '":"Failed to set debug mode '").concat(e,"' to '").concat(n,"'");default:return"unknown debug argument"}}catch(e){return Object(s.b)(e,"debugPublicApi",{makeVisibleToAllUsers:!0}),"error"}}var f,d,b,p,y=!1;function m(){var t,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{E(e?"console_v2":"console",!0),y||(t={url:e?r.a.getState().cfg.DEBUG_APP_HTML_V2:r.a.getState().cfg.DEBUG_APP_HTML,onload:g,onerror:function(){return Object(s.b)(new Error("Error Loading Debug Console"),"enableDebugConsole-".concat(e?"v2":"v1","-onerror"),{makeVisibleToAllUsers:!0})}},Object(c.d)(t),setTimeout((function(){try{Object(i.j)(r.a.getState().config,"pubID")&&r.a.getState().config.pubID}catch(t){Object(s.b)(t,"enableDebugConsole-setTimeout",{makeVisibleToAllUsers:!0})}}),5e3))}catch(t){Object(s.b)(t,"enableDebugConsole",{makeVisibleToAllUsers:!0})}}function g(t){try{var e=t.responseText,n=(f=document.createElement("div"),d=document.createElement("div"),b=document.createElement("iframe"),200);T("console_v2")&&(n=330),Object(o.b)()&&null!==o.a.getDefault().localStorage.getItem(a.f)&&(n=parseInt(o.a.getDefault().localStorage.getItem(a.f),10)),(isNaN(n)||n>window.innerHeight)&&(n=200),f.style.background="#eaeded",f.style.zIndex="2147483647",f.style.bottom="0",f.style.position="fixed !important",f.style.display="block !important",f.style.left="0",f.style.right="0",f.style.height="".concat(n,"px"),d.style.cursor="row-resize",d.style.height="2px",d.style.position="absolute",d.style.top="0",d.style.left="0",d.style.right="0",d.style.backgroundColor="RGBA(0,0,0,0)",f.appendChild(d),b.frameBorder="0",b.marginHeight="0",b.marginWidth="0",b.scrolling="no",b.id="apstag-debug-iframe",b.src="about:blank",b.style.display="block",b.style.width="100%",b.style.height="".concat(n,"px"),f.appendChild(b),document.body.appendChild(f),null!==b.contentDocument&&(b.contentDocument.open(),b.contentDocument.write(e),b.contentDocument.close()),d.addEventListener("mousedown",v)}catch(t){Object(s.b)(t,"renderDebugConsole",{makeVisibleToAllUsers:!0})}}function h(t){try{var e=window.innerHeight-t.clientY;return e<200&&(e=200),f.style.height="".concat(e,"px"),b.style.height="".concat(e,"px"),e}catch(t){return Object(s.b)(t,"resizeDebugConsole",{makeVisibleToAllUsers:!0}),200}}function O(t){try{return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1}catch(t){return Object(s.b)(t,"preventEvent",{makeVisibleToAllUsers:!0}),!1}}function v(){try{void 0===p&&((p=document.createElement("div")).style.position="fixed",p.style.left="0",p.style.right="0",p.style.top="0",p.style.bottom="0",p.style.zIndex="9999999999"),f.appendChild(p),window.addEventListener("mouseup",S),window.addEventListener("mousemove",j)}catch(t){Object(s.b)(t,"resizeBarMouseDownListener",{makeVisibleToAllUsers:!0})}}function j(t){try{return h(t),O(t)}catch(t){return Object(s.b)(t,"resizeBarMouseMoveListener",{makeVisibleToAllUsers:!0}),!1}}function S(t){try{null!==p&&f.removeChild(p),window.removeEventListener("mousemove",j),window.removeEventListener("mouseup",S);var e=h(t);return Object(o.b)()&&o.a.getDefault().localStorage.setItem(a.f,"".concat(e)),O(t)}catch(t){return Object(s.b)(t,"resizeBarMouseUpListener",{makeVisibleToAllUsers:!0}),!1}}function w(){try{if(!Object(o.b)())return[];var t=o.a.getDefault().localStorage.getItem(a.h,{ignoreFailure:!0}),e=(null===t||"false"===t?t="[]":"true"===t&&(t='["fake_bids"]'),[]);try{e=JSON.parse(t)}catch(t){}return(e=Object(i.h)(e)?e:[]).filter((function(t){return Object(i.g)(a.y,t)}))}catch(t){return[]}}function T(t){try{return Object(i.g)(w(),t)}catch(t){return!1}}function E(t,e){try{var n;if(Object(o.b)()&&-1!==a.y.indexOf(t))return n=w(),e&&-1===n.indexOf(t)?n.push(t):e||(n=n.filter((function(e){return e!==t}))),0===n.length?o.a.getDefault().localStorage.removeItem(a.h):o.a.getDefault().localStorage.setItem(a.h,JSON.stringify(n)),I(),1}catch(e){Object(s.b)(e,"setDebugMode")}}function D(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;try{if(Object(i.j)(window,a.g)&&Object(i.j)(window[a.g],t))return window[a.g][t]}catch(t){Object(s.b)(t,"getDebugValue")}return e}var _=[];function I(){try{w().filter((function(t){return-1===_.indexOf(t)})).forEach((function(t){Object(s.b)(new Error("Debug method enabled: ".concat(t)),"debugPublicApi-enabled-".concat(t),{makeVisibleToAllUsers:!0}),_.push(t)}))}catch(t){Object(s.b)(t,"pixelDebugModes")}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return j})),n.d(e,"a",(function(){return D}));var r,o,i,a,c=n(1),s=n(16),u=n(24),l=n(2);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&function(t,e){(Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=y(t);n=e?(n=y(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===f(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return p(r)}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,v(r.key),r)}}function h(t,e,n){e&&g(t.prototype,e),n&&g(t,n),Object.defineProperty(t,"prototype",{writable:!1})}function O(t,e,n){(e=v(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function v(t){return t=function(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==f(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===f(t)?t:String(t)}function j(){try{var t,e,n,r;return!(null==(t=window)||null==(e=t.localStorage)||!e.setItem||null==(n=window)||null==(r=n.localStorage)||!r.removeItem)}catch(t){return!1}}(e=r=r||{}).sessionStorage="sessionStorage",e.localStorage="localStorage",(o=o||{}).document="document",(n=i=i||{}).clear="clear",n.getItem="getItem",n.key="key",n.removeItem="removeItem",n.setItem="setItem",n.length="length",(a=a||{}).cookie="cookie";var S=["AMZN-NoCookieConsent"],w=function(){function t(e,n){m(this,t),O(this,"globalContext",void 0),O(this,"stateContainer",void 0),this.globalContext=e,this.stateContainer=n}return h(t,[{key:"privacyRegulationApplies",value:function(){var t=null==(e=u.a.readStoredConsentData(this.stateContainer))?void 0:e.tcString,e=null==e?void 0:e.gdprApplies;return!!("string"==typeof t&&0<t.length||null!=(t=this.globalContext.apstag)&&t.isGDPRRegion||e)}},{key:"allowedToStoreAndAccessInformationOnDevice",value:function(){if(this.privacyRegulationApplies()){var t;if(!(t=null==(t=u.a.readStoredConsentData(this.stateContainer))?void 0:t.tcString)||"string"!=typeof t)return{allowed:!1,failures:["Invalid tcString: ".concat(t)]};var e=Object(s.c)(t);if(!e)return{allowed:!1,failures:["Invalid tcString: ".concat(t)]};if((t=Object(s.b)(e)).length)return{allowed:!1,failures:t}}return{allowed:!0,failures:[]}}},{key:"ensureStorageUsageIsAllowedOrThrowOnError",value:function(t,e,n){var r=(o=this.allowedToStoreAndAccessInformationOnDevice()).allowed,o=o.failures;if(!(r||n&&0<n.length&&0<=S.indexOf(n[0])))throw new Error("Not allowed to store or access information on device: ".concat(o));if(!(r=this.globalContext[t]))throw new ReferenceError("Object ".concat(t," isn't available"));if(void 0===r[e])throw new ReferenceError("Method ".concat(e," isn't available"))}},{key:"executeFunction",value:function(t,e,n,r,o){return e=this.globalContext[e],(n=(r=r||e[n]).apply(e,t))&&null!=o&&o.isJson?JSON.parse(n):n}},{key:"executeFunctionOrThrowOnError",value:function(t,e,n,r,o){return this.ensureStorageUsageIsAllowedOrThrowOnError(e,n,t),this.executeFunction(t,e,n,r,o)}},{key:"regulatedMethod",value:function(t,e,n,r){var o=this;return function(){try{for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return o.executeFunctionOrThrowOnError(a,t,e,n,r)}catch(i){if(null==r||!r.ignoreFailure)throw Object(c.b)(i,"RegulatedDataContainer-regulatedMethod"),i}}}}]),t}(),T=function(){d(e,w);var t=b(e);function e(){var n;m(this,e);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return O(p(n=t.call.apply(t,[this].concat(i))),"_getItem",(function(t){var e=n.globalContext.document.cookie.split("; ").reduce((function(e,n){return(n=n.split("="))[0]===t?decodeURIComponent(n.slice(1).join("=")):e}),"");return 0<e.length?e:null})),O(p(n),"_removeItem",(function(t){n.setItem(t,"",0,1<arguments.length&&void 0!==arguments[1]?arguments[1]:"/")})),O(p(n),"_setItem",(function(t,e,r){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"/";r=new Date(r);if(!n.isValidDate(r))throw new Error("Invalid expiration date");n.globalContext.document.cookie="".concat(t,"=").concat(e,"; expires=").concat(r.toUTCString(),"; path=").concat(o,";")})),O(p(n),"getItem",(function(t,e){return n.regulatedMethod(o.document,a.cookie,n._getItem,e)(t)})),O(p(n),"setItem",(function(t,e,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"/";return n.regulatedMethod(o.document,a.cookie,n._setItem,4<arguments.length?arguments[4]:void 0)(t,e,r,i)})),O(p(n),"removeItem",(function(t,e){return n.regulatedMethod(o.document,a.cookie,n._removeItem,e)(t)})),n}return h(e,[{key:"isValidDate",value:function(t){return t instanceof Date&&!isNaN(t)}}]),e}(),E=function(){d(e,w);var t=b(e);function e(n,r,o){var a;return m(this,e),O(p(a=t.call(this,n,r)),"storageType",void 0),O(p(a),"clear",(function(t){return a.regulatedMethod(a.storageType,i.clear,null,t)()})),O(p(a),"getItem",(function(t,e){return a.regulatedMethod(a.storageType,i.getItem,null,e)(t)})),O(p(a),"key",(function(t,e){return a.regulatedMethod(a.storageType,i.key,null,e)(t)})),O(p(a),"removeItem",(function(t,e){return a.regulatedMethod(a.storageType,i.removeItem,null,e)(t)})),O(p(a),"setItem",(function(t,e,n){return a.regulatedMethod(a.storageType,i.setItem,null,n)(t,e)})),a.storageType=o,a}return h(e,[{key:"length",get:function(){return this.ensureStorageUsageIsAllowedOrThrowOnError(this.storageType,i.length),this.globalContext[this.storageType].length}}]),e}(),D=function(){function t(e){m(this,t),O(this,"globalContext",void 0),O(this,"stateContainer",void 0),this.globalContext=e.globalContext,this.stateContainer=e.stateContainer}return h(t,[{key:"sessionStorage",get:function(){try{return new E(this.globalContext,this.stateContainer,r.sessionStorage)}catch(t){throw Object(c.b)(t,"RegulatedDataContainers-sessionStorage"),t}}},{key:"localStorage",get:function(){try{return new E(this.globalContext,this.stateContainer,r.localStorage)}catch(t){throw Object(c.b)(t,"RegulatedDataContainers-localStorage"),t}}},{key:"cookie",get:function(){try{return new T(this.globalContext,this.stateContainer)}catch(t){throw Object(c.b)(t,"RegulatedDataContainers-cookie"),t}}},{key:"indexedDB",get:function(){throw new ReferenceError("Interface isn't yet defined")}},{key:"allowedToStoreAndAccessInformationOnDevice",value:function(){try{return new w(this.globalContext,this.stateContainer).allowedToStoreAndAccessInformationOnDevice().allowed}catch(t){return Object(c.b)(t,"RegulatedDataContainers-allowedToStoreAndAccessInformationOnDevice"),!1}}}],[{key:"getDefault",value:function(){return new t({globalContext:window,stateContainer:l.a})}}]),t}()},function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return s}));var r=n(1);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){var e,n=t.url,i=t.onload,a=t.onerror,c=t.ontimeout,s=t.withCredentials,u=void 0===(u=t.body)?null:u,l=void 0===(e=t.headers)?null:e,f=(t=void 0===(e=t.trustTokenParameter)?null:e,new window.XMLHttpRequest);try{if(""===n)void 0!==a&&a.call(f,"error");else{f.onload=i.bind(null,f),void 0!==a&&(f.onerror=a),void 0!==c&&(f.ontimeout=c),void 0!==s&&(f.withCredentials=s);var d=null!==u?"POST":"GET";f.open(d,n),null!==l&&"object"===o(l)&&Object.keys(l).forEach((function(t){f.setRequestHeader(t,l[t])}));try{null!==t&&"object"===o(t)&&window.location===window.parent.location&&f.setTrustToken(t)}catch(t){Object(r.b)(t,"setTrustToken")}f.send(u)}}catch(t){void 0!==a&&a.call(f,"error"),Object(r.b)(t,"xhrRequest")}}function a(t,e,n,o){try{if(void 0===n&&(n=document),void 0===t)return"function"==typeof e&&e(!0),!1;var i=n.getElementsByTagName("script")[0]||n.body.firstChild,a=n.createElement("script");if(a.type="text/javascript",a.async=!0,a.src=t,e&&c(a,e),c(a,o||function(){Object(r.b)(new Error("Error Loading Script Tag"),"loadScriptTag-onerror")},[],"onerror"),null!==i.parentNode)return i.parentNode.insertBefore(a,i),!0}catch(t){Object(r.b)(t,"loadScriptTag",{makeVisibleToAllUsers:!0})}return!1}function c(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"onload";try{return"function"==typeof e&&(t[o]=function(){e.apply(null,n)},!0)}catch(t){return Object(r.b)(t,"addCallbackFunction"),!1}}function s(t){try{return encodeURIComponent(JSON.stringify(t))}catch(t){return Object(r.b)(t,"objToUrlParam"),""}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return f})),n.d(e,"f",(function(){return d})),n.d(e,"g",(function(){return b})),n.d(e,"c",(function(){return p})),n.d(e,"d",(function(){return y})),n.d(e,"e",(function(){return m})),n.d(e,"h",(function(){return h})),n.d(e,"a",(function(){return O})),n.d(e,"i",(function(){return v}));var r=n(6),o=n(0),i=n(7),a=n(1),c=n(3),s=n(2),u=n(15);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t){try{return t.split("_").pop()}catch(t){return Object(a.b)(t,"getAmpAmznBidValue"),""}}function d(t){try{var e,n=Object(r.c)("url");if(null!==n)return encodeURIComponent(n);try{v(t,!1)?(e=null,t.context&&(e=t.context.canonicalUrl||t.context.sourceUrl)):e=t.top.location.href}catch(t){e=null}if(null===e||!e||void 0===e){e="";try{t.top!==t.self&&(e=t.document.referrer)}catch(t){}}return encodeURIComponent(e)}catch(t){return Object(a.b)(t,"getCurrentUrl"),""}}function b(t){try{var e,n="",o=Object(r.c)("url");if(null!==o)return encodeURIComponent(o);try{try{e=(v(t,!1)&&t.context||t.top.document).referrer}catch(n){e=t.document.referrer}n=encodeURIComponent(e)}catch(n){}return n}catch(n){return Object(a.b)(n,"getReferrerUrl"),""}}function p(){try{var t={cookiesParams:""};return c.j.forEach((function(e,n){(n=i.a.getDefault().cookie.getItem(n))&&(t.cookiesParams+="&".concat(e,"=").concat(n))})),t}catch(t){return Object(a.b)(t,"getApsFirstPartyCookies"),{cookiesParams:""}}}function y(t,e){try{var n=Object(u._getInitConfig)({overrides:null==e?void 0:e.initConfig}).blockedBidders,r=(Object(o.j)(t,"blockedBidders")&&Object(o.h)(t.blockedBidders)&&(n=t.blockedBidders),"");return Object(o.h)(n)?JSON.stringify(n):r}catch(t){return Object(a.b)(t,"getBlockedBidders",{makeVisibleToAllUsers:!0}),""}}function m(){try{var t;return Object(i.b)()?(t=s.a.getState(),Object(o.j)(t,"cfg")&&Object(o.j)(t.cfg,"v")&&-1!==t.cfg.v?t.cfg.v:null):c.p}catch(t){return Object(a.b)(t,"getCfgVersion"),null}}function g(t){try{if(-1===["string","number"].indexOf(l(t)))return!1;var e=Math.floor(Number(t));if(e>c.n)return e}catch(t){Object(a.b)(t,"parseTimeout",{makeVisibleToAllUsers:!0})}return!1}function h(t,e){try{var n=g(t.timeout);return!1===(n=!1===n?g(e.config.bidTimeout):n)?g(e.cfg.DEFAULT_TIMEOUT):n}catch(t){return Object(a.b)(t,"getTimeout",{makeVisibleToAllUsers:!0}),2e3}}function O(t,e){var n,r=!1;function o(e){if(!r)try{t(e)}catch(e){Object(a.b)(e,"executeFunctionOnceWithTimeout-wrappedFunction",{makeVisibleToAllUsers:!0})}clearTimeout(n),r=!0}try{return n=setTimeout(o,e,!0),o.bind(null,!1)}catch(e){return Object(a.b)(e,"executeFunctionOnceWithTimeout",{makeVisibleToAllUsers:!0}),function(){}}}function v(t,e){try{var n=e?t.AMP_CONTEXT_DATA:t.context;return Boolean(n&&Object(o.j)(n,"tagName")&&"AMP-AD"===n.tagName)}catch(t){return Object(a.b)(t,"isInAmpAd"),!1}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return c}));var r=n(1),o=n(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t){try{return function(t){try{var e;return!!c(t,["number","string"])&&!(isNaN(t)||"number"!=typeof t&&(e=parseInt(t,10),isNaN(e)))}catch(t){return Object(r.b)(t,"isNumber"),!0}}(t)||void 0===t}catch(t){return Object(r.b)(t,"isNumberOrUndefined"),!0}}function c(t,e){try{return Object(o.g)(e,i(t))}catch(t){return Object(r.b)(t,"isVarOfTypes"),!0}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return a})),n.d(e,"d",(function(){return c})),n.d(e,"c",(function(){return s}));var r=n(1),o=n(0);function i(t){var e=[];try{t.hasAdServerObjectLoaded()&&(e=t.getSlots())}catch(t){Object(r.b)(t,"getDisplayAdServerSlots")}return e}function a(t){try{return Object(o.j)(t,"sizes")&&Object(o.h)(t.sizes)&&0!==t.sizes.length}catch(t){return Object(r.b)(t,"doesSlotHaveSizes"),!1}}function c(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){try{return!t.mediaType||-1<e.indexOf(t.mediaType)}catch(t){return Object(r.b)(t,"isSlotOfType"),!0}}}function s(t){try{return t.slotID}catch(t){return Object(r.b)(t,"getSlotID"),""}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return I})),n.d(e,"g",(function(){return C})),n.d(e,"c",(function(){return k})),n.d(e,"f",(function(){return R})),n.d(e,"b",(function(){return z})),n.d(e,"e",(function(){return L})),n.d(e,"d",(function(){return x}));var r=n(2),o=n(6),i=n(3),a=n(0),c=n(8),s=n(1),u=n(9),l=n(11),f=n(4),d=n(18),b=n(10),p=n(17),y=n(27),m=n(15),g=n(5);function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t){return function(t){if(Array.isArray(t))return T(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||w(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){D(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function S(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,e)||w(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t,e){var n;if(t)return"string"==typeof t?T(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(t,e):void 0}function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_(r.key),r)}}function D(t,e,n){(e=_(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function _(t){return t=function(t,e){if("object"!==h(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==h(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===h(t)?t:String(t)}var I=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");D(this,"bidConfig",void 0),D(this,"bidState",i.c.new),D(this,"_targetingSetID",void 0),D(this,"timing",{setAtTimes:[]}),D(this,"pixelSent",!1),D(this,"useSafeFrames",!1),D(this,"bidReqID",""),D(this,"host",void 0),D(this,"ev",void 0),D(this,"cfe",void 0),D(this,"isAmp",!1),D(this,"doc",void 0),D(this,"inheritSize",void 0),this.bidConfig=e,this._targetingSetID=Object(a.c)(),r.a.getState().config.useSafeFrames&&(this.useSafeFrames=!0),this.useSafeFrames&&Object(a.j)(e,"targeting")&&e.targeting.push("amznhost"),Object(a.j)(e,"meta")?Object(a.h)(e.meta)||(this.reportError({name:"TypeError",message:"'meta' is not an 'array': ".concat(JSON.stringify(e.meta))},"constructor-meta"),e.meta=[]):e.meta=[];try{var n=[];Object(a.j)(this.bidConfig,"amzndeals")&&(n=this.bidConfig.amzndeals.map((function(t){return"".concat(t,"amzniid")}))),this.bidConfig.targeting.filter((function(t){return-1!==t.indexOf("amzniid")&&!Object(a.g)(n,t)}))}catch(e){this.reportError(e,"pixeling")}}var e,n;return e=t,(n=[{key:"reportError",value:function(t,e,n){Object(s.b)(t,"Bid-".concat(e),n)}},{key:"mediaType",get:function(){var t="d";return this.bidConfig.mediaType!==f.a.VIDEO&&"v"!==this.bidConfig.mediaType&&"v"!==this.bidConfig.mediaType_sp?t:f.a.VIDEO}},{key:"targeting",get:function(){var t=this;try{return this.bidConfig.targeting.map((function(e){return"amznhost"===e?[e,encodeURIComponent(t.host)]:Object(a.j)(t.bidConfig,e)&&Object(a.h)(t.bidConfig[e])?[e,encodeURIComponent(t.bidConfig[e].join(","))]:Object(a.j)(t.bidConfig,e)?[e,encodeURIComponent(t.bidConfig[e])]:[e,""]})).map((function(t){var e=(t=S(t,2))[0];t=t[1];return"&".concat(e,"=").concat(t)})).join("")}catch(t){return this.reportError(t,"targeting"),""}}},{key:"bidObject",get:function(){try{var t={slotID:this.bidConfig.slotID,amzniid:this.bidConfig.amzniid,amznbid:this.bidConfig.amznbid,amznp:this.bidConfig.amznp,amznsz:this.bidConfig.amznsz,size:this.bidConfig.amznsz};return this.bidConfig.amznactt&&(t.amznactt=this.bidConfig.amznactt),Object(a.j)(this.bidConfig,"amznadm")&&(t.amznadm=this.bidConfig.amznadm),this.mediaType===f.a.VIDEO&&(t.mediaType=f.a.VIDEO,t.qsParams=this.targeting,t.encodedQsParams=encodeURIComponent(this.targeting),t.r_amznbid=this.bidConfig.r_amznbid,t.r_amzniid=this.bidConfig.r_amzniid,t.r_amznp=this.bidConfig.r_amznp),this.useSafeFrames&&(t.amznhost=this.host),t}catch(t){return this.reportError(t,"bidObject",{makeVisibleToAllUsers:!0}),{slotID:"",amzniid:"error",amznbid:"error",amznp:"error",amznsz:"error",size:"error"}}}},{key:"newBidObject",get:function(){var t=this;try{var e={slotID:this.bidConfig.slotID,size:this.bidConfig.amznsz,mediaType:this.mediaType,targeting:{},helpers:{targetingKeys:this.bidConfig.targeting,qsParams:function(){return t.targeting},encodedQsParams:function(){return encodeURIComponent(t.targeting)}}},n=["slotID","size","mediaType"];return this.bidConfig.meta.filter((function(t){return-1===n.indexOf(t)})).forEach((function(n){e[n]=t.bidConfig[n]})),this.bidConfig.targeting.forEach((function(n){e.targeting[n]="amznhost"===n?t.host:t.bidConfig[n]})),void 0!==this.slotID&&-1!==this.slotID.indexOf("_")&&(e.sasTargeting=e.helpers.targetingKeys.map((function(n){return"".concat(n,"_").concat(t.slotID.split("_")[1],"=").concat(e.targeting[n])})).join(";")),e}catch(t){return this.reportError(t,"newBidObject",{makeVisibleToAllUsers:!0}),{slotID:"",size:"",mediaType:"d",targeting:{},helpers:{targetingKeys:[],qsParams:function(){return""},encodedQsParams:function(){return""}}}}}},{key:"slotID",get:function(){try{return this.bidConfig.slotID}catch(t){return this.reportError(t,"slotID"),""}}},{key:"matchesBidCacheId",value:function(t){var e=this;try{return this.bidConfig.targeting.reduce((function(n,r){return n||-1!==r.indexOf("amzniid")&&e.bidConfig[r]===t}),!1)}catch(t){return this.reportError(t,"matchesBidCacheId"),!1}}}])&&E(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),P=Object(a.d)(i.q);function A(t,e,n){try{var r=Object(a.i)(t.config.params)?t.config.params:{},o=Object(a.i)(e.params)?e.params:{},i="string"==typeof n?function(t){if(t=Object(g.a)(t).read("deviceSignal/sua"))try{return{device:{sua:JSON.parse(t)}}}catch(t){Object(s.b)(t,"getDeviceNode")}return{}}(n):{},u=j(j(j({},r),o),i);return 0===Object.keys(u).length?"":Object(c.c)(u)}catch(t){return Object(s.b)(t,"getBidParams",{makeVisibleToAllUsers:!0}),""}}function C(t){var e="validateSupplyChainObject",n=!1;function r(t,r){return Object(s.b)({name:"TypeError",message:r},"".concat(e,"-").concat(t),{makeVisibleToAllUsers:!0}),!(n=!0)}try{return Object(a.i)(t)?(Object(a.j)(t,"complete")?-1===[1,0].indexOf(t.complete)&&r("schain-complete-type","The `schain.complete` property must be a `1` or `0`"):r("schain-complete","The `schain.complete` property must be provided"),Object(a.j)(t,"ver")?Object(b.b)(t.ver,["string"])||r("schain-ver-type","The `schain.ver` property must be a string"):r("schain-ver","The `schain.ver` property must be provided"),Object(a.j)(t,"nodes")?Object(a.h)(t.nodes)?t.nodes.reduce((function(t,e){return Object(a.i)(e)?(Object(a.j)(e,"asi")?Object(b.b)(e.asi,["string"])||r("schain-node-asi-type","All `schain.nodes` items must have an `asi` property of type `string`"):r("schain-node-asi","All `schain.nodes` items must have an `asi` property"),Object(a.j)(e,"sid")?Object(b.b)(e.sid,["string"])||r("schain-node-sid-type","All `schain.nodes` items must have an `sid` property of type `string`"):r("schain-node-sid","All `schain.nodes` items must have an `sid` property"),Object(a.j)(e,"hp")?-1===[1,0].indexOf(e.hp)&&r("schain-node-hp-type","All `schain.nodes` items must have an `hp` property which is `1` or `0`"):r("schain-node-hp","All `schain.nodes` items must have an `hp` property"),Object(b.b)(e.rid,["string","undefined"])||r("schain-node-rid-type","If provided, the `rid` property on an `schain.nodes` item must be of type `string`"),Object(b.b)(e.name,["string","undefined"])||r("schain-node-name-type","If provided, the `name` property on an `schain.nodes` item must be of type `string`"),Object(b.b)(e.domain,["string","undefined"])||r("schain-node-domain-type","If provided, the `domain` property on an `schain.nodes` item must be of type `string`"),t&&!n):r("schain-node-type","All `schain.nodes` items must be objects")}),!n):r("schain-nodes-type","The `schain.nodes` property must be an `Array`"):r("schain-nodes","The `schain.nodes` property must be provided")):r("schain","The `schain` value must be an object")}catch(t){return Object(s.b)(t,e,{makeVisibleToAllUsers:!0}),!1}}function k(t,e,n,l,b){try{var h,v,S,w,T,E=null!=(h=null==b||null==(v=b.initConfig)?void 0:v.pubID)?h:null==(S=r.a.getState().config)?void 0:S.pubID,D=r.a.getState(),_=t._endpointDomain||Object(o.c)("host",D.hosts.DEFAULT_AAX_BID_HOST),I=D.cfg.DTB_PATH,k="bid",R=(D.experiments.shouldUseTestBidEndpoint&&null!==D.cfg.TEST_BID_ENDPOINT&&(k=D.cfg.TEST_BID_ENDPOINT),{src:Object(m._getInitConfig)({overrides:null==b?void 0:b.initConfig}).pubID,u:null!=b&&b.contextURL?encodeURIComponent(b.contextURL):Object(u.f)(window),pr:Object(u.g)(window),pid:P,cb:t.bidReqID,ws:Object(a.f)(window),v:i.l,t:e,slots:function(t){try{return Object(c.c)(t.map((function(t){var e;if(Object(a.j)(t,"mediaType")&&t.mediaType===f.a.VIDEO||t.mediaType===f.a.MULTI_FORMAT)e=t.aaxSlot;else{if(!(Object(a.j)(t,"sizes")&&0<t.sizes.length&&Object(a.j)(t,"slotID")))return Object(s.b)({name:"SlotError",message:"There was an error with the configuration for this slot: ".concat(JSON.stringify(t.rawSlot))},"buildSlotsUrlParam-invalidSlot",{makeVisibleToAllUsers:!0}),{id:"ERROR",mt:d.a.VIDEO,error:!0};var n=t.aaxSlot;Object(a.j)(t,"slotName")&&t.slotName!==t.slotID&&(n.sd=t.slotID,n.sn=t.slotName),e=n}return e})).filter((function(t){return!0!==t.error})))}catch(t){return Object(s.b)(t,"buildSlotsUrlParam",{makeVisibleToAllUsers:!0}),""}}(t.validSlots),pj:A(D,t,E),sg:Object(y.a)(E),cfgv:Object(u.e)(),bb:Object(u.d)(t),schain:function(t,e){try{var n,r=Object(g.a)(e).read("ad/schain");if(Object(a.j)(t.config,"schain"))n=t.config.schain;else{if(!r||!C(r))return"";n=r}return encodeURIComponent(["".concat(n.ver,",").concat(n.complete)].concat(O(n.nodes.map((function(t){return["asi","sid","hp","rid","name","domain"].map((function(e){return Object(a.j)(t,e)?t[e]:""})).map((function(t){return encodeURIComponent(t)})).map((function(t){return t.replace(/\!/g,"%21")})).join(",")})))).join("!"))}catch(t){return Object(s.b)(t,"getSupplyChainObject",{makeVisibleToAllUsers:!0}),""}}(D,E)});try{var z=Object(g.a)(E).read("deviceSignal/cookieDeprecationLabel");z&&""!==z&&(R.cdep=encodeURIComponent(z))}catch(t){}try{var L=Object(g.a)(E).read("consent/GPPData")||{},x=L.gppString,U=L.applicableSections,B=0<(x||"").length,M=0<(U||[]).length;B&&(R.gpp=encodeURIComponent(x)),M&&(R.gpp_sid=encodeURIComponent(JSON.stringify(U)))}catch(t){Object(s.b)(t,"gpp")}if("[]"===R.slots||""===R.slots)throw new Error("No slots available for bid request");try{var N=Object(g.a)(E).read("sessionMarker/marker");0<(null!=N?N:"").length&&(R.sm=encodeURIComponent(N.split("_")[0]))}catch(t){}r.a.dispatch({type:"RECORD_AAX_REQUEST",data:{bidConfig:t,bidReqID:t.bidReqID,timeout:e,ws:R.ws,url:R.u,rqTs:Date.now()}}),D.experiments.chunkRequests&&(T=t.bidReqID.split("-"),r.a.dispatch({type:"RECORD_NETWORK_EXCHANGE",fid:T[0],networkID:parseInt(T[1],10),timestamp:Date.now(),exchangeType:"request"})),Object(m._getInitConfig)({overrides:null==b?void 0:b.initConfig}).isSelfServePub&&(R.pubid=R.src,R.src=600);var V=Object(u.c)(),F=Object(o.c)("bidParams"),q=(Object(a.i)(F)&&(R=j(j({},R),F)),Object(a.i)(n)&&(Object(a.j)(n,"enabled")&&(R.gdpre=encodeURIComponent(n.enabled)),Object(a.j)(n,"consent")&&(R.gdprc=encodeURIComponent(n.consent)),Object(a.j)(n,"log"))&&(R.gdprl=Object(c.c)(n.log)),Object(a.j)(Object(m._getInitConfig)({overrides:null==b?void 0:b.initConfig}),"useSafeFrames")&&Object(m._getInitConfig)({overrides:null==b?void 0:b.initConfig}).useSafeFrames&&(R.sf="1"),Object(p.b)()),H=(q&&(l.ids.at=q),R.vm=function(t,e){var n=!t||0===Object.keys(t.ids).length,r=n?"":Object(c.c)({ids:t.ids,md:t.md});try{Object(g.a)(e).safelyRecord("cxm/vendors/set");var o=Object(g.a)(e).read("cxm/vendors");o&&(r=n?Object(c.c)({vendors:o}):Object(c.c)({ids:t.ids,md:t.md,vendors:o}))}catch(t){Object(s.b)(t,"getVmParam")}return r}(l,E),Object.keys(R).filter((function(t){return Object(a.j)(R,t)&&"undefined"!==R[t]&&""!==R[t]&&null!==R[t]})).map((function(t){return"".concat(t,"=").concat(R[t])})).join("&")),G=(V.cookiesParams&&(H+=V.cookiesParams),"".concat(i.r).concat(_).concat(I,"/").concat(k,"?").concat(H)),Q=(Object(g.a)(E).safelyRecord("adExchangeBidFetching/bidURLs/update",{legacyURL:G,bidRequestIndex:t.bidReqID}),null==(w=Object(g.a)(E).read("adExchangeBidFetching/bidURLs"))?void 0:w.get(t.bidReqID)),W=(Q&&0!==Q.length||Object(s.b)(new Error("Missing updatedURL from client"),"buildBidUrl-readBidURLS"),null!=Q?Q:G);return r.a.dispatch({type:"RECORD_AAX_REQ_PROP",bidReqID:t.bidReqID,key:"urlLength",value:W.length}),W}catch(t){return Object(s.b)(t,"buildBidUrl",{makeVisibleToAllUsers:!0}),""}}function R(t,e){try{return Object(a.j)(t,"deals")&&!0===t.deals||!0===e.needNewBidObject}catch(t){return Object(s.b)(t,"isNewBidObjectRequired"),!1}}function z(t,e,n){try{var r=t.map(l.c),o=e.slots.filter(Object(l.d)(f.a.DISPLAY,f.a.MULTI_FORMAT)).map(l.c).filter((function(t){return!Object(a.g)(r,t)})),c=n?i.t.bidInFlight:i.t.noBid;return t.concat(o.map((function(t){return new I({size:"0x0",crid:"",slotID:t,mediaType:"d",meta:["slotID","mediaType","size"],amznbid:c,amzniid:"",amznp:c,amznsz:"0x0",targeting:["amzniid","amznbid","amznp","amznsz"]})})))}catch(e){return Object(s.b)(e,"addStateTrackingBidsToRealBids"),t}}function L(t,e){try{var n;return!Object(a.g)(r.a.getState().displayAdServer.noBidSlotIDs,t.slotID)&&(n=r.a.getState().AAXReqs.filter((function(e){return e.bidReqID===t.bidReqID}))[0],!(Object(a.j)(n,"rqTs")&&Date.now()-n.rqTs>24e4||Object(a.j)(n,"url")&&!Object(a.b)(n.url,null!=e&&e.contextURL?encodeURIComponent(e.contextURL):Object(u.f)(window))||t.bidState===i.c.rendered))}catch(e){return Object(s.b)(e,"isBidEligible"),!1}}function x(t,e){try{var n=t.map(l.c),o=r.a.getState();return Object.keys(o.slotBids).filter((function(t){return Object(a.g)(n,t)})).reduce((function(t,n){var a=o.slotBids[n].filter((function(t){return t.bidState===i.c.new})).filter((function(t){return L(t,e)}));return 0<a.length&&(a=a[a.length-1],r.a.dispatch({type:"BID_STATE_CHANGE",slotID:n,_targetingSetID:a._targetingSetID,bidState:i.c.exposed}),t[n]=a),t}),{})}catch(t){return Object(s.b)(t,"getNewSlotBidsAndExposeForRequestedSlots"),{}}}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function i(t,e,n){(e=a(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function a(t){return t=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==r(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===r(t)?t:String(t)}n.d(e,"a",(function(){return c}));var c=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");i(this,"isSupported",!1),i(this,"needNewBidObject",!1)}var e,n;return e=t,(n=[{key:"cmdQueuePush",value:function(t){}},{key:"slotRenderEndedEvent",value:function(t){}},{key:"setTargeting",value:function(t,e){}},{key:"getTargeting",value:function(t){return[]}},{key:"clearTargeting",value:function(t,e){}},{key:"hasAdServerObjectLoaded",value:function(){return!1}},{key:"isCommandQueueDefined",value:function(){return!1}},{key:"getSlots",value:function(){return[]}}])&&o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(0),o=n(1),i=n(4);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function s(t,e,n){(e=u(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function u(t){return t=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==a(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===a(t)?t:String(t)}var l=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");s(this,"_slotConfig",void 0),s(this,"rawSlot",void 0),this._slotConfig=e,this.rawSlot=e}var e,n;return e=t,(n=[{key:"slotID",get:function(){return this._slotConfig.slotID}},{key:"slotName",get:function(){return this._slotConfig.slotName}},{key:"slotParams",get:function(){return this._slotConfig.slotParams}},{key:"companions",get:function(){return this._slotConfig.companions}},{key:"slotConfig",get:function(){return{slotID:this.slotID,slotName:this.slotName,sizes:this.sizes}}},{key:"mediaType",get:function(){return i.a.DISPLAY}},{key:"sizes",get:function(){return[]}},{key:"floor",get:function(){var t;return Object(r.j)(this._slotConfig,"floor")&&"USD"===this._slotConfig.floor.currency&&this.validateFloorValue(this._slotConfig.floor.value)?this._slotConfig.floor:t}},{key:"aaxSlotParams",get:function(){var t=this;try{return Object(r.j)(this,"slotParams")&&Object(r.i)(this.slotParams)?Object.keys(this.slotParams).filter((function(e){return t.validateSlotParamValue(t.slotParams[e])})).reduce((function(e,n){return e[n]=t.slotParams[n],e}),{}):void 0}catch(t){return this.reportError(t,"aaxSlotParams"),this.slotParams}}},{key:"aaxSlot",get:function(){var t={kv:this.aaxSlotParams};return this.floor&&(t.fc=this.floor.currency,t.fp=this.floor.value),t}},{key:"isValid",value:function(){var t,e,n=[],o=[];return void 0===this.slotID?n.push("'slotID' must be provided and a string"):"string"!=typeof this.slotID&&o.push("'slotID' must be a string"),Object(r.j)(this._slotConfig,"floor")&&Object(r.i)(this._slotConfig.floor)&&(t=(e=this._slotConfig.floor).currency,e=e.value,"USD"!==t&&o.push("'floor' currency only supports USD"),this.validateFloorValue(e)||o.push("'floor' value must be a positive integer")),Object(r.j)(this,"companions")&&(Object(r.h)(this.companions)?this.companions.forEach((function(t){"string"!=typeof t&&n.push("'companions' contains a non-string item : ".concat(t))})):n.push("'companions' contains non-array")),0<n.length?(this.reportIsValidMessages([].concat(n,o),!0),!1):(0<o.length&&this.reportIsValidMessages(o,!1),!0)}},{key:"reportError",value:function(t,e,n){Object(o.b)(t,"Slot-".concat(e),n)}},{key:"setTargeting",value:function(t,e){}},{key:"getTargeting",value:function(t){return[]}},{key:"clearTargeting",value:function(t){}},{key:"reportIsValidMessages",value:function(t,e){this.reportError({name:"SlotValidationError",message:this.buildIsValidMessage(t,this._slotConfig)},"validation-".concat(e?"error":"warn"),{makeVisibleToAllUsers:!0})}},{key:"validateSlotParamValue",value:function(t){var e=this;try{return Object(r.h)(t)?0<t.length&&t.reduce((function(t,n){return t&&e.validateSlotParamValue(n)}),!0):"string"==typeof t&&0<t.length}catch(t){return Object(o.b)(t,"validateSlotParamValue"),!1}}},{key:"validateFloorValue",value:function(t){return"number"==typeof t&&0<t&&t%1==0}},{key:"buildIsValidMessage",value:function(t,e){return"There was an issue with the configuration for this slot: ".concat(JSON.stringify(e),"\n")+t.map((function(t){return"- ".concat(t)})).join("\n")}}])&&c(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(i,t,e){"use strict";e.r(t),e.d(t,"unsafelyGuessAccountID",(function(){return Jt})),e.d(t,"_getInitConfig",(function(){return te}));var Dt=e(16),Tt=e(2),_t=e(9),Et=e(0),It=e(11),Pt=e(6),At=e(3),Ct=e(29),kt=e(23),Rt=e(20),zt=e(1),Lt=e(8),ee=e(26),n=e(30),xt=e(28),Ut=e(12),a=e(13),Nt=e(4),Bt=e(10),Mt=e(19),Vt=e(17),Ft=e(31),ne=e(35),qt=e(22),re=e(37),oe=e(24),Ht=e(5),Gt=e(7),Qt=e(32),ie=e(27),ae=e(36);function Xt(t){return l(t)||u(t)||s(t)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,e){var n;if(t)return"string"==typeof t?r(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}function u(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function l(t){if(Array.isArray(t))return r(t)}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Wt(t){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function Yt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){$t(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $t(t,e,n){return(e=f(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t){return"symbol"===Wt(t=d(t,"string"))?t:String(t)}function d(t,e){if("object"!==Wt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!==Wt(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}var Kt=new a.a;function Jt(t){try{var e;if("string"==typeof t&&0<t.trim().length)return t;if("number"==typeof t&&0<t)return t.toString();var n=null==(e=Tt.a.getState().config)?void 0:e.pubID;if(n&&"number"==typeof n&&0<n)return n.toString();if(n&&"string"==typeof n&&""!==n)return n;var r=Array.from(window._aps.keys()).filter((function(t){return"_system"!==t&&""!==t}))[0];if(r)return r}catch(t){}return"_system"}function Zt(t,e,n,r){try{Object(Ht.a)(t).safelyRecord("cellophane/".concat(e,"/enter"),$t({},r,n));var o=Object(Ht.a)(t).read("cellophane/".concat(r));void 0!==n&&void 0===o?Object(Et.k)(1)&&Object(zt.b)(new Error("Missing ".concat(r," from client")),"cellophaneWrap"):n=o}catch(t){Object(zt.b)(t,"cellophaneWrap")}return n}function te(t){return t=t.overrides,Yt(Yt({},Tt.a.getState().config),t)}try{var b=Object(n.b)(window.apstag);b?Object(zt.b)(new Error("apstag has already loaded - preventing duplicate load"),"apstag-duplicateLoad"):(Object(n.a)(window)&&Object(zt.b)(new Error("apstag was loaded and then destroyed"),"apstag-destroyReload",{makeVisibleToAllUsers:!0}),window.apstagLOADED=!0,function(){Object(Et.k)(1)&&Object(zt.b)(new Error("apstag-".concat(At.l," reference pixel - Used to compute ratios for other errors")),"REFERENCE");var a=new oe.a({stateContainer:Tt.a,globalContext:window}),t=(a.attemptConsentDataSync(),"ls"),n=Object(Pt.d)("console")||function(){try{return-1!==window.location.href.indexOf("amzn_debug_console=1")&&(t="url",!0)}catch(t){return!1}}(),r=Object(Pt.d)("console_v2")||function(){try{return-1!==window.location.href.indexOf("amzn_debug_console=2")&&(t="url",!0)}catch(t){return!1}}();function o(t){try{return!Tt.a.getState().experiments.chunkRequests||0===Tt.a.getState().bidReqs[t.split("-")[0]].networkReqs.filter((function(t){return t.inFlight})).length}catch(t){return Object(zt.b)(t,"_isRequestComplete"),1}}function i(t,e){try{!Tt.a.getState().bidReqs[t].hasCallbackExecuted&&o(t)&&(Tt.a.dispatch({type:"RECORD_CALLBACK",fid:t}),e())}catch(t){Object(zt.b)(t,"_checkAndCallCallback")}}function c(t){try{Tt.a.getState().experiments.chunkRequests&&Tt.a.dispatch({type:"RECORD_NETWORK_EXCHANGE",fid:t[0],timestamp:Date.now(),exchangeType:"response",networkID:parseInt(t[1],10)})}catch(t){Object(zt.b)(t,"_recordResponse")}}function b(t,e,n,r){var o=n.split("-");Object(Ht.a)(r).record("adExchangeBidFetching/amazonAdExchange/fetch",{URL:t}).catch((function(){})).finally((function(){c(o),i(o[0],e)}))}function s(t){try{var e=new Date;return e.setTime(e.getTime()+1e3*t),e.toUTCString()}catch(t){return Object(zt.b)(t,"_getCookieExpiry"),"Thu, 01 Jan 1970 00:00:00 GMT"}}function e(t){try{Object(Et.j)(t,"cr")&&t.cr.forEach((function(t){var e=-1!==t.exp?s(t.exp):Object(Et.e)(365);Gt.a.getDefault().cookie.setItem(t.k,t.v,e)}))}catch(t){Object(zt.b)(t,"_setFirstPartyCookies")}}function x(t,e,n){try{var r;Object(Et.j)(t,"cb")&&(Tt.a.dispatch({type:"RECORD_AAX_REQ_PROP",bidReqID:t.cb,key:"resTs",value:Date.now()}),r=new RegExp("e/dtb/bid.*cb=".concat(t.cb)),Tt.a.dispatch({type:"RECORD_AAX_REQ_PROP",bidReqID:t.cb,key:"perf",value:Object(Ct.b)(window,r)})),Object(Et.j)(t,"cfg")&&Tt.a.dispatch({type:"SET_CFG",cfg:t.cfg}),nt(t,e,n)}catch(t){Object(zt.b)(t,"_doOnAaxResponse",{makeVisibleToAllUsers:!0})}}function U(t){try{Object(Qt.b)(t),e(t),Object(Et.j)(t,"cfg")&&Gt.a.getDefault().localStorage.setItem(At.d,JSON.stringify(t.cfg),{ignoreFailure:!0}),N(t)}catch(t){Object(zt.b)(t,"_doAfterAaxResponse",{makeVisibleToAllUsers:!0})}}function N(t){try{var e;Object(Et.j)(t,"fp")&&(e=t.fp,Object(Et.j)(e,"length"))&&e.forEach((function(t){var e=t.d||0;setTimeout((function(){Object(ae.a)(t.s)}),e)}))}catch(t){Object(zt.b)(t,"fireAAXPixels")}}function B(){try{Tt.a.getState().Q.forEach((function(t){var e="init";switch(t[0]){case"i":e="init";break;case"f":e="fetchBids";break;case"di":e="deleteId";break;case"ri":e="renewId";break;case"ui":e="updateId";break;default:return}window.apstag[e].apply(null,t[1])}))}catch(t){Object(zt.b)(t,"_QHandler",{makeVisibleToAllUsers:!0})}}function M(t){try{Object(Et.i)(t)||(Object(zt.c)("init.config",Wt(t),"object"),t={pubID:"err"}),Object(Bt.b)(t.pubID,["string","number"])?"number"==typeof t.pubID&&(t.pubID="".concat(t.pubID)):Object(zt.c)("init.config.pubID",Wt(t.pubID),"string"),Object(Bt.b)(t.adServer,["undefined","string"])||Object(zt.c)("init.config.adServer",Wt(t.adServer),"string"),Object(Bt.a)(t.bidTimeout)||("string"==typeof t.bidTimeout?Object(zt.b)({name:"string-".concat(t.bidTimeout),message:"init.config.bidTimeout was a non-numeric string '".concat(t.bidTimeout,"'")},"TypeError-init.config.bidTimeout",{makeVisibleToAllUsers:!0}):Object(zt.c)("init.config.bidTimeout",Wt(t.bidTimeout),"number")),Object(Bt.b)(t.gdpr,["undefined","object"])?"object"!==Wt(t.gdpr)||Object(Bt.a)(t.gdpr.cmpTimeout)||(Object(Bt.b)(t.gdpr.cmpTimeout,["string","undefined"])?Object(zt.b)({name:"string-".concat(t.bidTimeout),message:"init.config.gdpr.cmpTimeout was a non-numeric string '".concat(t.gdpr.cmpTimeout,"'")},"TypeError-init.config.gdpr.cmpTimeout",{makeVisibleToAllUsers:!0}):Object(zt.c)("init.config.gdpr.cmpTimeout",Wt(t.gdpr.cmpTimeout),"number")):Object(zt.c)("init.config.gdpr",Wt(t.gdpr),"object"),Object(Et.j)(t,"params")&&!Object(Et.i)(t.params)?Object(zt.c)("init.config.params",Wt(t.params),"object"):Object(Et.j)(t,"params")&&Object.keys(t.params).forEach((function(e){return!(!Object(Et.j)(t,"params")||"string"!=typeof t.params[e]&&"number"!=typeof t.params[e]&&(Object(Et.h)(t.params[e])?!t.params[e].reduce((function(t,e){return t&&("string"==typeof e||"number"==typeof e)}),!0)&&(Object(zt.b)({name:"non-string array item",message:"'init.config.params.".concat(e," contains a non-string item")},"TypeError-init.config.params.".concat(e),{makeVisibleToAllUsers:!0}),1):(Object(zt.c)("init.config.params.".concat(e),Wt(t.params[e]),"string' or 'array"),1)))})),Object(Et.j)(t,"blockedBidders")&&!Object(Et.h)(t.blockedBidders)?Object(zt.c)("init.config.blockedBidders",Wt(t.blockedBidders),"array"):Object(Et.j)(t,"blockedBidders")&&Object(Et.h)(t.blockedBidders)&&(t.blockedBidders.reduce((function(t,e){return t&&("string"==typeof e||"number"==typeof e)}),!0)||Object(zt.b)({name:"non-string array item",message:"'init.config.blockedBidders contains a non-string item"},"TypeError-init.config.blockedBidders",{makeVisibleToAllUsers:!0})),Object(Bt.b)(t.simplerGPT,["undefined","boolean"])||Object(zt.c)("init.config.simplerGPT",Wt(t.simplerGPT),"boolean"),Object(Bt.b)(t.deals,["undefined","boolean"])||Object(zt.c)("init.config.deals",Wt(t.deals),"boolean"),Object(Bt.b)(t.schain,["undefined","object"])&&null!==t.schain?Object(Et.j)(t,"schain")&&!Object(Ut.g)(t.schain)&&delete t.schain:(Object(zt.c)("init.config.schain",Wt(t.schain),"object"),delete t.schain),Object(Bt.b)(t.useSafeFrames,["undefined","boolean"])||(Object(zt.c)("init.config.useSafeFrames",Wt(t.useSafeFrames),"boolean"),delete t.useSafeFrames),Object(Bt.b)(t.signals,["undefined","object"])?delete t.signals:Object(zt.c)("init.config.signals",Wt(t.signals),"object")}catch(e){Object(zt.b)(e,"_validateAndStoreConfig-validateConfig")}try{var e=Tt.a.getState().config;Object(Et.j)(e,"pubID")&&Object(Et.j)(t,"pubID")&&e.pubID!==t.pubID&&Object(zt.b)(new Error("`apstag.init` was called multiple times with different pubIDs (".concat(e.pubID," then ").concat(t.pubID,")")),"_validateAndStoreConfig-diffPubId",{makeVisibleToAllUsers:!0}),Tt.a.dispatch({type:"SET_CONFIG",config:t,defaultCmpTimeout:Tt.a.getState().cfg.GDPR_CMP_TIMEOUT})}catch(e){Object(zt.b)(e,"_validateAndStoreConfig",{makeVisibleToAllUsers:!0})}}function u(t,e,n){try{var r=t.slotID,o=!1;Object(Et.j)(t.bidConfig,"amznbid")&&"o_"===t.bidConfig.amznbid.slice(0,2)&&(o=!0),Object(Et.j)(t.bidConfig,"mediaType")&&"v"===t.bidConfig.mediaType&&!1===o||(!window.IntersectionObserver&&o?Object(zt.b)({name:"IntersectionObserver",message:"IntersectionObserver not supported "},"_safeApplySlotTargeting"):e.hasAdServerObjectLoaded()?e.isCommandQueueDefined()?e.hasAdServerObjectLoaded()?null!==l(r,e)?y(t,e,n):Object(zt.a)("".concat(r," isn't defined when trying to set amazon bid!")):e.cmdQueuePush((function(){u(t,e,n)})):Object(zt.a)("displayAdServer Object's cmd queue hasn't been defined",!0):Object(zt.a)("displayAdServer Object hasn't been defined",!0))}catch(t){Object(zt.b)(t,"_safeApplySlotTargeting",{makeVisibleToAllUsers:!0})}}function l(t,e){var n=null;try{n=Object(It.b)(e).filter((function(e){return e.slotID===t}))[0]||null}catch(e){Object(zt.b)(e,"_getAdServerSlot")}return n}function f(t,e){try{var n=Tt.a.getState().targetingKeys[t.slotID];e.hasAdServerObjectLoaded()&&Object(Et.h)(n)&&n.forEach((function(e){return 0<t.getTargeting(e).length&&t.clearTargeting(e)}))}catch(e){Object(zt.b)(e,"_clearTargetingFromSlot",{makeVisibleToAllUsers:!0})}}function d(t){try{var e;Object(Et.j)(Tt.a.getState().slotBids,t.slotID)&&(e=Tt.a.getState().slotBids[t.slotID].filter((function(t){return t.bidState===At.c.set}))[0])&&e.bidState===At.c.set&&Tt.a.dispatch({type:"BID_STATE_CHANGE",slotID:t.slotID,_targetingSetID:e._targetingSetID,bidState:At.c.exposed})}catch(t){Object(zt.b)(t,"_clearBidSetOnSlot",{makeVisibleToAllUsers:!0})}}function V(t,e){try{return t.map((function(t){return Object(Et.g)(e,t)})).filter((function(t){return t})).length===t.length}catch(t){Object(zt.b)(t,"_hasAllItemsInArray")}}function p(t){var e={};try{Object.keys(Tt.a.getState().slotBids).forEach((function(n){var r=Tt.a.getState().slotBids[n].filter((function(e){return Object(Ut.e)(e,t)}));0<r.length&&(e[n]=r.map((function(t){var e=Tt.a.getState().AAXReqs.filter((function(e){return e.bidReqID===t.bidReqID})),n=0;return 0<e.length?n=e[0].rqTs:(e=Tt.a.getState().AAXReqs.map((function(t){return t.bidReqID})).join(", "),Object(zt.b)({name:"BidError",message:"Request not found: ".concat(t.bidReqID," not found in ").concat(e)},"_getCurrentSlotBids-noRequest")),{rqTs:n,bid:t}})).reduce((function(t,e){return t.rqTs>e.rqTs?t:e})).bid)}))}catch(t){Object(zt.b)(t,"_getCurrentSlotBids",{makeVisibleToAllUsers:!0})}return e}function F(t,e){try{return Object(Et.h)(Tt.a.getState().targetingKeys[t])?e?["amzniid_sp"]:Tt.a.getState().targetingKeys[t].filter((function(t){return-1<t.indexOf("amzniid")&&t.indexOf("amzniid_sp")<0})):["amzniid"]}catch(t){return Object(zt.b)(t,"_getAllBidIdKeys"),[]}}function q(t,e){var n,r;try{var o=Tt.a.getState().slotBids;Object.keys(o).forEach((function(i){o[i].forEach((function(o){F(i,e).forEach((function(e){o.bidConfig[e]===t&&(n=o,"amzniid_sp"===e?r="sp":"amzniid"!==e&&(r=e.substr(0,e.indexOf("amzniid"))))}))}))}))}catch(t){Object(zt.b)(t,"_findSlotBidByBidID",{makeVisibleToAllUsers:!0})}return{slotBid:n,dealId:r}}function H(t,e,n){var r="";try{e.bidConfig[n+"amzniid"]===t&&(r=n.split("_").pop().trim())}catch(t){Object(zt.b)(t,"_getPMPBidSize")}return r}function G(t){try{var e;return void 0===t.slots?[]:(e={},t.slots.forEach((function(t){t.mediaType!==Nt.a.VIDEO&&"v"!==t.mediaType&&"v"!==t.mediaType_sp||(0<=t.slotID.indexOf("rsv-")&&(t={slotID:t.slotID.substring(4),r_amznbid:t.amznbid,r_amzniid:t.amzniid,r_amznp:t.amznp,mediaType:Nt.a.VIDEO,targeting:["r_amznbid","r_amzniid","r_amznp"],amznsz:t.amznsz,size:t.size,crid:t.crid,meta:t.meta}),!Object(Et.j)(e,t.slotID))?e[t.slotID]=new Ut.a(t):t.targeting.forEach((function(n){e[t.slotID].bidConfig[n]=t[n],-1===e[t.slotID].bidConfig.targeting.indexOf(n)&&e[t.slotID].bidConfig.targeting.push(n)}))})),Object.keys(e).map((function(t){return e[t]})))}catch(t){return Object(zt.b)(t,"_mergeVideoBids"),[]}}function Q(t){var e=G(t),n=[];try{n=e.map((function(e){return e.bidReqID=t.cb,e.host=t.host,e.ev=t.ev,e.cfe=t.cfe,e}))}catch(e){Object(zt.b)(e,"_convertAaxResponse")}return n}function y(t,e,n){try{var r,o,i=t.slotID,a=t._targetingSetID;t.bidState!==At.c.set&&null!==(r=l(i,e))&&(d(r),o=t.newBidObject,Object(Mt.a)(n),Object.keys(o.targeting).forEach((function(t){return r.setTargeting(t,o.targeting[t])})),Tt.a.dispatch({type:"BID_STATE_CHANGE",slotID:i,_targetingSetID:a,bidState:At.c.set,ts:Date.now()}))}catch(t){Object(zt.b)(t,"_applyTargetingToAdServerSlot",{makeVisibleToAllUsers:!0})}}function X(t,e,n,r){try{var o=p(r);t.forEach((function(t){o[t]&&u(o[t],e,n)}))}catch(t){Object(zt.b)(t,"_applySuppliedSlotBidsToAdServerObject",{makeVisibleToAllUsers:!0})}}function W(t,e,n){try{var r=p(n);Object.keys(r).forEach((function(n){return u(r[n],t,e)}))}catch(n){Object(zt.b)(n,"_applyAllCurrentSlotBidsTargetingToAdServerObject",{makeVisibleToAllUsers:!0})}}function Y(t,e,n,r){try{n?X(n,t,e,r):W(t,e,r),Tt.a.getState().displayAdServer.slotRenderEndedSet||(t.cmdQueuePush((function(){try{t.slotRenderEndedEvent((function(e){try{f(e,t),d(e)}catch(e){Object(zt.b)(e,"_applySlotTargeting-cmdQueue-slotCb",{makeVisibleToAllUsers:!0})}}))}catch(t){Object(zt.b)(t,"_applySlotTargeting-cmdQueue",{makeVisibleToAllUsers:!0})}})),Tt.a.dispatch({type:"SLOT_RENDER_ENDED_SET"}))}catch(e){Object(zt.b)(e,"_applySlotTargeting",{makeVisibleToAllUsers:!0})}}function m(t,e){function n(){if(!o)if(20<=i++)Object(zt.b)({name:"LoopError",message:"Too many attempts to append to document.body"},"_safeDocumentBodyAppendChild-callback-loops",{makeVisibleToAllUsers:!0});else{try{if(t&&t.body&&null!==t.body&&"function"==typeof t.body.appendChild)return t.body.appendChild(e),r(),void(o=!0)}catch(t){Object(zt.b)(t,"_safeDocumentBodyAppendChild-callback")}setTimeout(n,100)}}var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},o=!1,i=0;try{"complete"===t.readyState||"interactive"===t.readyState?n():t.addEventListener("DOMContentLoaded",n)}catch(t){Object(zt.b)(t,"_safeDocumentBodyAppendChild")}}function $(t){try{var e="".concat(t.host).concat(Tt.a.getState().cfg.DTB_PATH,"/imp"),n="".concat(t.host).concat(Tt.a.getState().cfg.DTB_PATH,"/adm");return t.cfe||t.isAmp||t.isSf?n:e}catch(t){return Object(zt.b)(t,"determineCreativeFetchEndpoint"),""}}function w(t){try{var e="?b=".concat(t.bidID,"&rnd=").concat(Object(Et.c)()),n=(Object(Et.j)(t,"pp")&&(e+="&pp=".concat(t.pp)),Object(Et.j)(t,"amznp")&&(e+="&p=".concat(t.amznp)),Object(Et.j)(t,"crID")&&(e+="&crid=".concat(t.crID)),Object(Et.j)(t,"isSharedPMP")&&!0===t.isSharedPMP&&(e+="&sp=true"),Object(Mt.e)()&&(e+="&ep=%7B%22ce%22%3A%221%22%7D"),$(t));return(t.fif?"".concat(n,"j"):"".concat(n,"i")).concat(e)}catch(t){return Object(zt.b)(t,"_creativeURL"),""}}function g(t){try{var e=t.doc.createElement("iframe");return e.frameBorder="0",e.marginHeight="0",e.marginWidth="0",e.style.marginTop="0",e.style.marginLeft="0",e.scrolling="no",t.inheritSize?(e.style.width="100%",e.style.height="100%"):(e.style.width="".concat(t.sizes[0],"px"),e.style.height="".concat(t.sizes[1],"px")),e}catch(t){return Object(zt.b)(t,"_baseIframe"),window.document.createElement("iframe")}}function K(t){try{if(Object(Et.j)(t,"bidType")){var e,n=t.kvMap;switch(t.bidType){case"sharedPMP":return{bidID:n.amzniid_sp[0],pp:n.amznbid_sp[0],sizes:n.amznsz_sp[0].split("x"),amznp:n.amznp_sp[0],inheritSize:t.inheritSize,isSharedPMP:t.isSharedPMP};case"preferredPMP":if(Object(Nt.c)(t)&&Object(Et.j)(t,"amzndeal"))return e=t.amzndeal.split("_").pop().trim(),{bidID:n["".concat(t.amzndeal,"amzniid")][0],sizes:C(e)};break;case"openAuction":if(Object(Nt.c)(t))return{bidID:n.amzniid[0],pp:Object(_t.b)(n.amznbid[0]),amznp:n.amznp[0],inheritSize:t.inheritSize,sizes:n.amznsz[0].split("x")};if(Object(Nt.d)(t))return{bidID:t.amzniid,pp:Object(_t.b)(t.amznbid),amznp:t.amznp,sizes:t.amznsz.split("x")};break;default:Object(zt.b)({name:"Invalid AMP Bid Type: ".concat(t.bidType),message:"No valid AMP bid type"},"getAmpAdData-invalidBidType")}}}catch(t){Object(zt.b)(t,"getAmpAdData")}return{bidID:"ERROR",sizes:[]}}function D(t,e,n){try{var r,o=null;void 0!==e&&(Object(Et.j)(e,"ampEnv")&&e.ampEnv||Object(Et.j)(e,"sfEnv")&&e.sfEnv)&&(o=e,Object(Et.j)(e,"bidType")&&"sharedPMP"===e.bidType?o.isSharedPMP=!0:o.isSharedPMP=!1,o.document=t,o.amznhost=o.kvMap.amznhost[0]),A(t)&&((o=t).bidType="openAuction",o.ampEnv=!0),null===o?Object(zt.b)(new Error("Invalid AMP parameters"),"_renderAmpImpression-invalidParams",{makeVisibleToAllUsers:!0}):"ERROR"!==(r=K(o)).bidID&&(r.doc=o.document,r.host=o.amznhost.replace("http://","https://"),r.adID="amznad".concat(Object(Et.c)()),r.isAmp=o.ampEnv,r.isSf=Object(kt.c)(window),Tt.a.getState().aaxViewabilityEnabled?R(r,r.doc,n):_(r))}catch(t){Object(zt.b)(t,"_renderAmpImpression")}}function T(t){var e,n="unknown";function r(r){try{r&&(t.hasTimedOut=!0),r&&!t.hasRendered&&Object(zt.b)({name:"RenderTimeout",message:"renderAd was called from timeout. fifFlowMethod: ".concat(n)},"__loadAdIntoFriendlyIframe-renderAd-timeout-isOutstream:".concat(t.isOutstream)),null===e.contentDocument?Object(zt.b)({name:"NoDocument",message:"iframe.contentDocument was null inside renderAd. isFromTimeout: ".concat(r,". fifFlowMethod: ").concat(n)},"__loadAdIntoFriendlyIframe-renderAd-noDocument-isOutstream:".concat(t.isOutstream),{makeVisibleToAllUsers:!0}):t.hasRendered&&!t.hasTimedOut?Object(zt.b)({name:"DupeRender",message:"Render was called twice"},"__loadAdIntoFriendlyIframe-renderAd-rerender-isOutstream:".concat(t.isOutstream),{makeVisibleToAllUsers:!0}):t.hasRendered||(t.hasRendered=!0,e.contentDocument.open(),e.contentDocument.write(t.html),e.contentDocument.close())}catch(r){Object(zt.b)(r,"__loadAdIntoFriendlyIframe-renderAd-isOutstream:".concat(t.isOutstream))}}function o(){var o=r.bind(null,!1);try{n=null!==e.contentDocument&&Object(Et.g)(["complete","interactive"],e.contentDocument.readyState)?(o(),"doc-ready"):null!==e.contentDocument&&"uninitialized"!==e.contentDocument.readyState?(e.contentDocument.addEventListener("DOMContentLoaded",o),"dom-listener"):(e.addEventListener("load",o),"iframe-listener"),setTimeout(r,1e3,!0)}catch(o){Object(zt.b)(o,"_loadAdIntoFriendlyIframe-setAttributes-isOutstream:".concat(t.isOutstream))}}try{if(void 0===t.html)throw new Error("No HTML available for ad, most likely the creative has expired");if(t=Yt({hasRendered:!1,hasTimedOut:!1},t),(e=g(t)).id="apstag-f-iframe-".concat(Object(Et.c)()),t.isOutstream)try{var i=Object(Rt.d)(document,t);if(void 0===i)throw new Error("gpt video div element is undefined");i&&i.firstElementChild&&i.firstElementChild.style.setProperty("display","none","important");var a=Object(Rt.f)(t.sizes);Object(Rt.a)(a,i),Object(Rt.e)(a,e),o(),Object(Rt.g)(a,e,t.bidID)}catch(o){Object(zt.b)(o,"_loadAdIntoFriendlyIframe-outstream",{makeVisibleToAllUsers:!0})}else m(t.doc,e,o)}catch(o){Object(zt.b)(o,"_loadAdIntoFriendlyIframe",{makeVisibleToAllUsers:!0})}}function _(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{states:{csmLoaded:!1,iframeLoaded:!1,shouldRunViewability:!1}},n=2<arguments.length?arguments[2]:void 0;try{var r,o=g(t);o.id=t.adID,o.setAttribute("sandbox","allow-forms allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"),Object(Pt.d)("fake_bids")?(r='<body style="background-color: #FF9900;">'.concat(50<parseInt(t.sizes[1],10)?"<h3>apstag Test Creative</h3>":"","<h4>amzniid - ").concat(t.bidID," | amznbid: ").concat(t.pp," | size: ").concat(t.sizes.join("x"),"</h4></body>"),o.src="javascript:'".concat(r,"'")):o.src=w(t),!(t.isAmp&&t.isSf&&Object(kt.b)(window))&&(!t.isSf||t.isAmp||t.inheritSize)||Object(kt.a)(t.sizes,window),m(t.doc,o),(e.iframe=o).onload=function(){e.states.iframeLoaded=!0,n&&n()}}catch(t){Object(zt.b)(t,"_loadAdIntoUnfriendlyIframe",{makeVisibleToAllUsers:!0})}}function J(t,e){var n,r=t.states,o=t.doc,i=t.bidID;t=t.iframe;try{Object(Et.a)(r)||(r.shouldRunViewability=!1,Object(Et.j)(window,"amzncsm")?n=window.amzncsm:void 0!==o&&null!==o.defaultView&&Object(Et.j)(o.defaultView,"amzncsm")&&(n=o.defaultView.amzncsm),void 0!==o&&void 0!==n&&Object(Et.j)(n,"rmD")&&(n.host=Object(Pt.c)("host",Tt.a.getState().hosts.DEFAULT_AAX_PIXEL_HOST),n.rmD(t,i,o.defaultView,o,te({overrides:null==e?void 0:e.initConfig}).pubID)))}catch(t){Object(zt.b)(t,"_triggerViewability")}}function Z(t,e,n,r){return function(o){try{var i=Object(Ut.d)(e.slots,r),a=Object.keys(i),c=[],s=(o&&(Tt.a.dispatch({type:"RECORD_AAX_REQ_PROP",bidReqID:e.bidReqID,key:"timedOutAt",value:Date.now()}),Tt.a.getState().experiments.chunkRequests)&&Tt.a.dispatch({type:"RECORD_TIMEOUT",fid:e.bidReqID,timeOut:Date.now()}),a.forEach((function(t){Object(Et.j)(i,t)&&(t=i[t],Object(Ut.f)(te({overrides:null==r?void 0:r.initConfig}),n)||Object(Et.j)(t.bidConfig,"amznbid")?Object(Et.j)(t.bidConfig,"amznp")||(t.bidConfig.amznp=""):(t.mediaType!==Nt.a.VIDEO&&(t.bidConfig.targeting.unshift("amznsz"),t.bidConfig.amznsz="0x0"),t.bidConfig.targeting.unshift("amzniid","amznbid","amznp"),t.bidConfig.amzniid="",t.bidConfig.amznbid=At.t.noBid,t.bidConfig.amznp=At.t.noBid),c.push(t))})),n.isSupported&&(c=Object(Ut.b)(c,e,o)),{fromTimeout:o}),u=Object(Ut.f)(te({overrides:null==r?void 0:r.initConfig}),n);try{t(c.map((function(t){return u?t.newBidObject:t.bidObject})),s)}catch(a){console.error(a)}}catch(a){Object(zt.b)(a,"_bidCallbackHandler",{makeVisibleToAllUsers:!0});try{t([],{fromTimeout:o,fromError:!0})}catch(a){console.error(a)}}}}function tt(t,e){try{var n,r;e.inheritSize||(r=t.defaultView&&t.defaultView.frameElement?(n=t.defaultView.frameElement,"defaultView"):(n=window.frameElement,"frameElement"),null!==n?(n.style.width="".concat(e.sizes[0],"px"),n.style.height="".concat(e.sizes[1],"px")):Object(zt.b)({name:"FrameNotFound",message:"'win' is 'null'. Method used: ".concat(r)},"_resizeIframe-win"))}catch(t){Object(zt.b)(t,"_resizeIframe")}}function h(t){try{return"".concat(t[0],"x").concat(t[1])}catch(t){return Object(zt.b)(t,"_sizeArrayToSring"),"x"}}function O(t){try{return 1===t.length?h(t[0]):h(t[Math.floor(t.length*Math.random())])}catch(t){return Object(zt.b)(t,"_pickRandomSizeForMockBid",{makeVisibleToAllUsers:!0}),""}}function et(t){try{var e,n=Object(Pt.c)("host",Tt.a.getState().hosts.DEFAULT_AAX_BID_HOST),r=Object(_t.f)(window),o=t.bidReqID,i=Object(Et.f)(window),a=Object(Pt.c)("testBidTimeout",200);Tt.a.dispatch({type:"RECORD_AAX_REQUEST",data:{bidConfig:t,timeout:a,bidReqID:o,ws:i,url:r,rqTs:Date.now()}}),e=t.slots.map((function(t){var e=O(t.sizes),n=(e="testDeal".concat(Object(Et.c)(),"_").concat(e),"testDealIi-".concat(Object(Et.c)())),r=O(t.sizes);$t(r={slotID:t.slotID,crid:"".concat(At.o.crid,"-").concat(Object(Et.c)()),size:r,amzniid:"".concat(At.o.amzniid,"-").concat(Object(Et.c)()),amznbid:At.o.amznbid,amznp:At.o.amznp,amznsz:r,amzniid_sp:"".concat(At.o.amzniid,"-").concat(Object(Et.c)()),amznbid_sp:"".concat(At.o.amznbid,"SP"),amznp_sp:"".concat(At.o.amznp,"SP"),amznsz_sp:O(t.sizes),amzndeals:[e]},"".concat(e,"amzniid"),n),$t(r,"mediaType","d"),$t(r,"meta",["slotID","mediaType","size"]),$t(r,"targeting",["amzniid","amznbid","amznp","amznsz","amzniid_sp","amznbid_sp","amznp_sp","amznsz_sp","amzndeal_sp","amzndeals","".concat(e,"amzniid")]),n=r;return t.mediaType===Nt.a.VIDEO&&(n.mediaType=Nt.a.VIDEO,n.amznbid="v_".concat(n.amznbid)),n})),setTimeout((function(){window.apstag.bids({slots:e,host:n,status:"ok",cb:o})}),a)}catch(t){Object(zt.b)(t,"_doMockBid",{makeVisibleToAllUsers:!0})}}function nt(t,e,n){try{var r,o,i,a=Tt.a.getState().AAXReqs.filter((function(e){return e.bidReqID===t.cb}))[0];a&&a.bidConfig&&a.bidConfig.slots&&(r=a.bidConfig.slots.filter(Object(It.d)(Nt.a.DISPLAY,Nt.a.MULTI_FORMAT)).map((function(t){return t.slotID})),o=Object(Et.j)(t,"slots")?t.slots.map((function(t){return t.slotID})):[],i=r.filter((function(t){return!Object(Et.g)(o,t)})),Tt.a.dispatch({type:"NO_BID_ON_ADSERVER_SLOTS",slotIDs:i}),e.hasAdServerObjectLoaded()?j(e,n):e.isCommandQueueDefined()&&e.cmdQueuePush((function(){j(e,n)})))}catch(e){Object(zt.b)(e,"_determineNoBidStateForAdServerObject")}}function rt(t){return Object(Et.g)(Tt.a.getState().AAXReqs.filter((function(t){return!t.resTs})).map((function(t){return t.bidConfig.slots})).reduce((function(t,e){return t.concat(e)}),[]).map(It.c),t)}function v(t){try{var e=t.getTargeting("amznbid");return 0<e.length&&2<e[0].length}catch(t){return Object(zt.b)(t,"_isRealAmznbidTargetingSetOnSlot"),1}}function j(t,e){try{t.hasAdServerObjectLoaded()&&"1"===t.getTargeting("amznbid")[0]&&E(t),Object(It.b)(t).forEach((function(t){!Object(Et.g)(Tt.a.getState().displayAdServer.noBidSlotIDs,t.slotID)||rt(t.slotID)||v(t)||"2"===t.getTargeting("amznbid")[0]||(S("noBid",t),Object(Mt.a)(e))}))}catch(t){Object(zt.b)(t,"_applyNoBidFromAAXState")}}function S(t,e){At.u.forEach((function(n){return e.setTargeting(n,At.t[t])}))}function E(t){At.u.forEach((function(e){return t.clearTargeting(e)}))}!function(){var t;Object(Gt.b)()&&(t=Gt.a.getDefault().localStorage.getItem(At.d,{ignoreFailure:!0}))&&null!==(t=JSON.parse(t))&&Tt.a.dispatch({type:"SET_CFG",cfg:t})}(),Object(Mt.d)();var ot=0;function I(){try{Object(Et.j)(window,"googletag")&&Object(Et.j)(window.googletag,"cmd")?(new ee.a).cmdQueuePush((function(){try{window.googletag.pubads().addEventListener("slotRequested",(function(t){try{var e=t.slot;Tt.a.dispatch({type:"LOG_GAM_EVENT",event:Yt(Yt({},new qt.a(e).slotConfig),{},{ts:Date.now(),targeting:e.getTargetingMap()})})}catch(t){Object(zt.b)(t,"_initializeSlotRequestedEventListener-cmdQueue-listener")}}))}catch(t){Object(zt.b)(t,"_initializeSlotRequestedEventListener-cmdQueue")}})):++ot<5&&setTimeout(I,100)}catch(t){Object(zt.b)(t,"_initializeSlotRequestedEventListener")}}function it(t){try{var e=t.AAXReqs.slice(t.gamSlotRenderPixel.aaxReqOffset).reduce((function(t,e){return t.concat(e.bidConfig.slots)}),[]).map((function(t){return Yt(Yt({},t),{},{type:"a"})})).filter((function(t){return t.mediaType!==Nt.a.VIDEO})),n=t.gamSlotFetchLog.slice(t.gamSlotRenderPixel.gamSlotFetchLogOffset).map((function(t){return Yt(Yt({},t),{},{type:"g"})})),r=[].concat(Xt(e),Xt(n)).reduce((function(t,e){return void 0===t[e.slotID]&&(t[e.slotID]={sd:e.slotID,a:{c:0},g:{c:0}}),t[e.slotID][e.type].c++,t[e.slotID][e.type].s=e.sizes,t[e.slotID][e.type].sn=e.slotName||"",t}),{});return Object.keys(r).map((function(t){return r[t]})).filter((function(t){return 0!==t.a.c||0!==t.g.c}))}catch(t){return Object(zt.b)(t,"getSlotFetchCounts"),[]}}function at(t){try{var e=ut(t),n=[];return null!==e&&Object.keys(Tt.a.getState().slotBids).forEach((function(t){Tt.a.getState().slotBids[t][0].bidConfig.mediaType!==Nt.a.VIDEO&&Tt.a.getState().slotBids[t].filter((function(t){return Object(Et.j)(t.bidConfig,"amzniid")})).forEach((function(r){var o,i,a;null!==e&&(o={state:-1,slotID:t,iid:r.bidConfig.amzniid,fid:r.bidReqID},a=[],i=[],t in e&&(a=e[t].fetchedAt.filter((function(t){return t.AAXReqInfo&&t.AAXReqInfo.bidReqID===r.bidReqID})),i=e[t].targetedAt.filter((function(t){return t.targeting===r.bidConfig.amzniid}))),0<a.length?0<a.length&&i.length>=a.length&&a.slice(a.length-1)[0].ts>i.slice(a.length-1)[0].ts?1===e[t].fetchWithIID.filter((function(t){return t===r.bidConfig.amzniid})).length?o.state=1:o.state=4:Object(Et.g)(e[t].fetchWithIID,r.bidConfig.amzniid)?o.state=3:o.state=2:o.state=0,1!==o.state&&2!==o.state||(a=P(i=Tt.a.getState().AAXReqs.filter((function(t){return t.bidReqID===r.bidReqID}))[0].resTs,e[t].fetchedAt,2===o.state))&&Object(Et.j)(a,"ts")&&(o.delta=i-a.ts),n.push(o))}))})),n}catch(t){return Object(zt.b)(t,"_getBidSetInfo"),[]}}function P(t,e,n){var r=e.map((function(e){return e=t-e.ts,!n&&e<=0?-e:n&&0<=e?e:null}));return e[ct(r)]}function ct(t){for(var e=-1,n=-1,r=0;r<t.length;r++)null!==t[r]&&(-1===n||t[r]<e)&&(e=t[n=r]);return n}function st(t,e){return Tt.a.getState().AAXReqs.filter((function(t){return Object(Et.g)(t.bidConfig.slots.map((function(t){return t.slotID})),e)}))[t]}function ut(t){try{var e;return t.hasAdServerObjectLoaded()?(e=Tt.a.getState().gamSlotFetchLog.reduce((function(t,e){Object(Et.j)(t,e.slotID)||(t[e.slotID]={fetchedAt:[],targetedAt:[]});var n=t[e.slotID];return n.fetchedAt.push({ts:e.ts,AAXReqInfo:st(n.fetchedAt.length,e.slotID)}),Object(Et.j)(e.targeting,"amzniid")&&0<e.targeting.amzniid.length?n.targetedAt.push({ts:e.ts-1,targeting:e.targeting.amzniid[0]}):n.targetedAt.push({ts:e.ts-1,targeting:""}),t}),{}),Object.keys(e).forEach((function(t){var n;Object(Et.j)(e,t)&&((n=e[t]).fetchWithIID=n.fetchedAt.map((function(t){return(t=P(t.ts,n.targetedAt,!0))?t.targeting:0})),e[t]=n)})),e):null}catch(t){return Object(zt.b)(t,"_getDFPSlotFetches"),null}}function lt(t){try{t.hasAdServerObjectLoaded()?S("noRequest",t):t.isCommandQueueDefined()&&t.cmdQueuePush((function(){S("noRequest",t)}))}catch(t){Object(zt.b)(t,"_applyNoRequestToAAXState")}}function ft(t,e){try{Tt.a.dispatch({type:"REQUESTED_BID_FOR_ADSERVER_SLOTS",slotIDs:t}),e.isCommandQueueDefined()&&e.cmdQueuePush((function(){try{var n=Object(It.b)(e);"0"===e.getTargeting("amznbid")[0]&&E(e),V(t.filter((function(t){return void 0!==t})),n.map((function(t){return t.slotID})))?n.forEach((function(e){Object(Et.g)(t,e.slotID)&&!v(e)&&S("bidInFlight",e)})):e.cmdQueuePush((function(){try{S("bidInFlight",e)}catch(t){Object(zt.b)(t,"_setRequestToAAXInFlightState-cmdQueue-cmdQueue")}}))}catch(n){Object(zt.b)(n,"_setRequestToAAXInFlightState-cmdQueue")}}))}catch(t){Object(zt.b)(t,"_setRequestToAAXInFlightState")}}function A(t){try{return Object(Et.j)(t,"type")&&!(t instanceof Document)&&"amp"===t.type}catch(t){return Object(zt.b)(t,"_isLegacyAmpCreative"),!1}}function dt(t,e){try{return void 0!==e&&Object(Et.j)(e,"ampEnv")&&e.ampEnv||A(t)}catch(t){Object(zt.b)(t,"_isAmpImpression")}}function C(t){return t.split("x")}function bt(t,e,n,r){var o=Zt(Jt(),"renderImp",{doc:t,bidID:e,kvBidObject:n},"renderImpArgs");t=o.doc,e=o.bidID,n=o.kvBidObject;try{if(dt(t,n)&&Object(_t.i)(window,!0))D(t,n,r);else if(Object(kt.c)(window)&&void 0!==n&&Object(Et.j)(n,"kvMap")&&Object(Et.j)(n.kvMap,"amznhost"))D(t,n,r);else{var i=!1,a=("string"==typeof e&&0===e.indexOf("sp|")&&(e=e.substring(3),i=!0),e||t.amzniid),c=q(a,i),s=c.slotBid,u=c.dealId,l=!1;if(void 0!==n&&Object(Et.j)(n,"bidType")&&"outstream"===n.bidType&&(l=!0),s){var f,d,b,p,y,m,g,h,O,v,j,S=u&&1<=u.length?C("sp"===u?s.bidConfig.amznsz_sp:H(a,s,u)):C(s.bidConfig.amznsz);1===arguments.length?T({doc:s.doc,bidID:s.bidConfig.amzniid,sizes:S,html:t.html,inheritSize:s.inheritSize||!1,isOutstream:l}):(f=s.host,d=s.bidConfig.slotID,b="amznad".concat(Math.round(1e6*Math.random())),p={bidID:a,doc:t,slotID:d,pp:k("amznbid",s,u),host:f,adID:b,sizes:S,amznp:k("amznp",s,u),crID:k("crid",s,u),fif:!1,dealId:u,isSharedPMP:i,cfe:s.cfe,isOutstream:l,inheritSize:Object(Et.i)(n)&&Object(Et.j)(n,"inheritSize")&&!0===n.inheritSize},"1"===s.bidConfig.fif&&!1===l&&!1===i?(p.fif=!0,Tt.a.dispatch({type:"UPDATE_BID_INFO_PROP",slotID:s.slotID,iid:e,key:"doc",value:t}),Tt.a.dispatch({type:"UPDATE_BID_INFO_PROP",slotID:s.slotID,iid:e,key:"inheritSize",value:p.inheritSize}),Object(Lt.b)(w(p),(function(){}),document,(function(){return Object(zt.b)(new Error("Error Loading JSONP Render Callback"),"renderImp-fif-callback-load",{makeVisibleToAllUsers:!0})}))):l?(Tt.a.dispatch({type:"OUTSTREAM_SHOULD_SAMPLE",shouldSample:Object(Et.k)(10)}),h=Object(Rt.c)(p,At.b),v=1<=(null==(O=null==(y=Tt.a.getState().bidConfigs[s.bidReqID])||null==(m=y.slots)?void 0:m.filter((function(t){return(null==t?void 0:t.slotID)===(null==p?void 0:p.slotID)})))?void 0:O.length)?null==(g=O[0])?void 0:g.companions:[],j=Object(Rt.b)(h,At.A,p,v),p.html=j,T(p)):Tt.a.getState().aaxViewabilityEnabled?R(p,t,r):_(p),l||tt(t,p))}else try{Object(zt.b)(new Error("Invalid bid ID. '".concat("(bidID value: "+e+", bID value: "+a+")","' tried to render into document ").concat(t instanceof Document?t.documentURI:"with type "+Wt(t))),"_renderImp-invalidId",{makeVisibleToAllUsers:!0})}catch(t){Object(zt.b)(t,"_renderImp-invalidId")}}}catch(t){Object(zt.b)(t,"_renderImp",{makeVisibleToAllUsers:!0})}}function k(t,e,n){try{var r,o="";return void 0!==n&&1<=n.length?(r="".concat(t,"_sp"),"sp"===n&&Object(Et.j)(e.bidConfig,r)&&(o=e.bidConfig[r])):Object(Et.j)(e.bidConfig,t)&&(o=e.bidConfig[t]),o}catch(t){return Object(zt.b)(t,"_getProperBidInfoValue"),""}}function R(t,e,n){try{var r=e.createElement("script"),o=(r.type="text/javascript",r.async=!0,{doc:e,bidID:t.bidID,states:{csmLoaded:!1,iframeLoaded:!1,shouldRunViewability:!0}}),i=J.bind(null,o,n);Object(Lt.a)(r,(function(){o.states.csmLoaded=!0,i()})),_(t,o,i),r.src=Tt.a.getState().cfg.CSM_JS,m(e,r)}catch(t){Object(zt.b)(t,"_loadViewabilityAd")}}function z(t){var e=Jt();try{t=Zt(e,"bids",t,"aaxResp"),Object(Ht.a)(e).safelyRecord("_legacy/bidRequest/didComplete",{pairedEvents:["_legacy/bidRequest/monitor"],eventIdentifier:t.cb,statusUpdate:"completed"})}catch(t){}var n=Kt;try{x(t,n,e),Object(Et.j)(t,"slots")&&(Tt.a.dispatch({type:"UPDATE_SLOT_BIDS",bids:Q(t)}),Object(Et.j)(t,"ev")&&Tt.a.dispatch({type:"SET_VIEWABILITY",viewability:t.ev}),Object(Et.j)(t,"cfn"))&&Tt.a.dispatch({type:"SET_CFG",cfg:{CSM_JS:"//"===t.cfn.substring(0,2)?t.cfn:"//c.amazon-adsystem.com/".concat(t.cfn)}}),U(t)}catch(t){Object(zt.b)(t,"_bids",{makeVisibleToAllUsers:!0})}}function pt(){return"number"==typeof Tt.a.getState().cfg.MAX_SLOTS_PER_REQUEST&&0<Tt.a.getState().cfg.MAX_SLOTS_PER_REQUEST}function yt(t,e,n){var r,o=null!=(r=null==n||null==(r=n.initConfig)?void 0:r.pubID)?r:Tt.a.getState().config.pubID;t=Zt(o,"fetchBids",t,"bidConfig");try{Object(Ht.a)(o).safelyRecord("consent/tcfapi/attemptSync"),Object(Ht.a)(o).safelyRecord("consent/gppapi/attemptSync"),a.attemptConsentDataSync();var i=Object(Mt.b)(o);Object(Dt.a)(Tt.a.getState().config.gdpr,(function(r){L(t,e,r,i,{initConfig:null==n?void 0:n.initConfig,contextURL:null==n?void 0:n.contextURL,accountID:o})}),o)}catch(r){Object(zt.b)(r,"_getConfigsAndFetchBids",{makeVisibleToAllUsers:!0})}}function mt(t,e,n){var r=n.initConfig.pubID,o=(Object(Ht.a)(r).safelyRecord("consent/tcfapi/attemptSync"),Object(Ht.a)(r).safelyRecord("consent/gppapi/attemptSync"),a.attemptConsentDataSync(),Object(Mt.b)(r));Object(Dt.a)(Tt.a.getState().config.gdpr,(function(i){L(t,e,i,o,{initConfig:null==n?void 0:n.initConfig,contextURL:null==n?void 0:n.contextURL,accountID:r})}),r)}function L(t,e,n,r,o){var i=o.accountID,a=(Object(Ht.a)(i).safelyRecord("deviceSignal/cookieDeprecationLabel/set"),null!=o&&o.adServer?Object(xt.a)(o.adServer):Kt);Object(Ht.a)(i).safelyRecord("sessionMarker/marker/sync");try{Object(Bt.b)(e,["function","undefined"])||Object(zt.c)("fetchBids.callback",Wt(e),"function"),"function"!=typeof e&&(e=function(){}),Object(Et.i)(t)||(Object(zt.c)("fetchBids.bidConfig",Wt(t),"object"),t={}),Object(Bt.a)(t.timeout)||("string"==typeof t.timeout?Object(zt.b)({name:"string-".concat(t.timeout),message:"fetchBids.bidConfig.timeout was a non-numeric string '".concat(t.timeout,"'")},"TypeError-fetchBids.bidConfig.timeout",{makeVisibleToAllUsers:!0}):Object(zt.c)("fetchBids.bidConfig.timeout",Wt(t.timeout),"number")),Object(Et.j)(t,"params")&&!Object(Et.i)(t.params)?Object(zt.c)("fetchBids.bidConfig.params",Wt(t.params),"object"):Object(Et.j)(t,"params")&&Object(Et.i)(t.params)&&Object.keys(t.params).forEach((function(e){return!(void 0===t.params||"string"!=typeof t.params[e]&&"number"!=typeof t.params[e]&&(Object(Et.h)(t.params[e])?!t.params[e].reduce((function(t,e){return t&&("string"==typeof e||"number"==typeof e)}),!0)&&(Object(zt.b)({name:"non-string array item",message:"'fetchBids.bidConfig.params.".concat(e," contains a non-string item")},"TypeError-fetchBids.bidConfig.params.".concat(e),{makeVisibleToAllUsers:!0}),1):(Object(zt.c)("fetchBids.bidConfig.params.".concat(e),Wt(t.params[e]),"string' or 'array"),1)))})),Object(Et.j)(t,"blockedBidders")&&!Object(Et.h)(t.blockedBidders)?Object(zt.c)("fetchBids.bidConfig.blockedBidders",Wt(t.blockedBidders),"array"):Object(Et.j)(t,"blockedBidders")&&Object(Et.h)(t.blockedBidders)&&(t.blockedBidders.reduce((function(t,e){return t&&("string"==typeof e||"number"==typeof e)}),!0)||Object(zt.b)({name:"non-string array item",message:"'fetchBids.bidConfig.blockedBidders contains a non-string item"},"TypeError-fetchBids.bidConfig.blockedBidders",{makeVisibleToAllUsers:!0})),Object(Et.j)(t,"slots")&&!Object(Et.h)(t.slots)&&Object(zt.c)("fetchBids.bidConfig.slots",Wt(t.slots),"array")}catch(a){Object(zt.b)(a,"_fetchBids-validation",{makeVisibleToAllUsers:!0})}var c=!1,s=((te({overrides:null==o?void 0:o.initConfig}).simplerGPT||Object(Ht.a)(i).read("ad/googletagSlotAutoImport"))&&(c=!0),Yt(Yt({},t),{},{bidReqID:"".concat(Tt.a.getState().AAXReqs.length),slots:[],validSlots:[],networkReqs:[]})),u=!1;try{!0===c&&(!Object(Et.j)(t,"slots")||Object(Et.j)(t,"slots")&&Object(Et.h)(t.slots)&&0<t.slots.length&&Object(Et.j)(t.slots[0],"getSlotElementId"))?0===Object(It.b)(a).length?(Object(zt.b)(new Error("fetchBids was called in simplerGPT mode before any slots were defined in GPT"),"_fetchBids-simplerGpt-NoSlots",{makeVisibleToAllUsers:!0}),u=!0,s.slots=[]):(t.slots?s.slots=t.slots.map((function(t){return new qt.a(t)})):s.slots=Object(It.b)(a),s.slots=s.slots.filter(It.a),0===s.slots.length&&(Object(zt.b)(new Error("No GPT slots provided to apstag.fetchBids() had valid sizes"),"_fetchBids-simplerGpt-NoValidSizes",{makeVisibleToAllUsers:!0}),u=!0)):Object(Et.j)(t,"slots")&&Object(Et.h)(t.slots)&&(s.slots=t.slots.map((function(t){switch(t.mediaType){case Nt.a.DISPLAY:return new Ft.a(t);case Nt.a.VIDEO:return new ne.a(t);case Nt.a.MULTI_FORMAT:return new re.a(t);default:return new Ft.a(t)}}))),s.validSlots=s.slots.filter((function(t){return t.isValid()})),s.validSlots.length>At.m&&(s.validSlots=s.validSlots.slice(s.validSlots.length-At.m))}catch(a){Object(zt.b)(a,"_fetchBids-getSlots",{makeVisibleToAllUsers:!0})}var l=Object(_t.h)(s,Tt.a.getState());try{e=Object(_t.a)(Z(e,s,a,o),l)}catch(a){Object(zt.b)(a,"_fetchBids-wrapCallback",{makeVisibleToAllUsers:!0})}try{if(0===s.validSlots.length)!1===u&&Object(zt.b)(new Error("No valid slots provided to apstag.fetchBids"),"_fetchBids-noSlots",{makeVisibleToAllUsers:!0}),setTimeout(e.bind(null,[]),10);else if(ft(s.slots.filter(Object(It.d)(Nt.a.DISPLAY,Nt.a.MULTI_FORMAT)).map(It.c),a),Tt.a.dispatch({type:"NEW_FETCH_BID_REQUEST",fid:s.bidReqID,pto:l}),Tt.a.dispatch({type:"RECORD_ORIGINAL_BID_CONFIG",bidConfig:s}),Object(Ht.a)(i).safelyRecord("_legacy/bidRequest/monitor",{eventIdentifier:s.bidReqID}),Object(Pt.d)("fake_bids"))et(s);else if(At.k)if(Tt.a.dispatch({type:"SHOULD_CHUNK_REQUESTS",value:Object(Et.k)(Tt.a.getState().cfg.CHUNK_BID_REQUESTS_PROPORTION)}),Tt.a.getState().experiments.chunkRequests&&pt()){for(var f=gt(s),d=0;d<f.length;d++)f[d].bidReqID="".concat(s.bidReqID,"-").concat(d);Tt.a.dispatch({type:"ADD_CHUNKED_REQUESTS",fid:s.bidReqID,numChunks:f.length}),f.forEach((function(t){b(Object(Ut.c)(t,l,n,r,o),e,t.bidReqID,i)}))}else b(Object(Ut.c)(s,l,n,r,o),e,s.bidReqID,i);else Object(Lt.b)(Object(Ut.c)(s,l,n,r,o),e)}catch(a){Object(zt.b)(a,"_fetchBids",{makeVisibleToAllUsers:!0})}}function gt(t){try{for(var e=Math.ceil(t.validSlots.length/Tt.a.getState().cfg.MAX_SLOTS_PER_REQUEST),n=new Array(e),r=0;r<e;r++){var o=r*Tt.a.getState().cfg.MAX_SLOTS_PER_REQUEST;n[r]={slots:t.validSlots.slice(o,o+Tt.a.getState().cfg.MAX_SLOTS_PER_REQUEST)}}return n.map((function(e){return Yt(Yt({},t),e)}))}catch(e){return Object(zt.b)(e,"chunkConfig",{makeVisibleToAllUsers:!0}),[]}}function ht(t,e){var n=null!=(n=null==e||null==(n=e.initConfig)?void 0:n.pubID)?n:Tt.a.getState().config.pubID;try{t=Zt(n,"setDisplayBids",t,"slotIDList")}catch(t){}var r=null!=e&&e.adServer?Object(xt.a)(e.adServer):Kt;try{null!=e&&e.adServer||Object(Et.j)(Tt.a.getState().config,"adServer")?r.isSupported?(Y(r,n,t,e),j(r,n)):Object(zt.b)(new Error("apstag.setDisplayBids called with unsupported ad server: ".concat(Tt.a.getState().config.adServer)),"_setDisplayBids-invalidAdServer",{makeVisibleToAllUsers:!0}):Object(zt.b)(new Error("apstag.setDisplayBids called without specifying ad server"),"_setDisplayBids-noAdServer",{makeVisibleToAllUsers:!0})}catch(t){Object(zt.b)(t,"_setDisplayBids",{makeVisibleToAllUsers:!0})}}function Ot(t,e){var n;(null!=(n=t.gdpr)&&n.consent||null!=(n=t.gdpr)&&n.enabled)&&(n={tcString:null==(n=t.gdpr)?void 0:n.consent,gdprApplies:null==(n=t.gdpr)?void 0:n.enabled},a.writeConsentDataToStore(n)),a.attemptConsentDataSync(),M(t),"function"==typeof e&&e()}function vt(t,e){var n=t.pubID;t=Zt(n,"init",t,"config");try{var r=Kt=t.adServer?Object(xt.a)(t.adServer):Kt;Ot(t),lt(r),Object(ie.b)(),Object(Mt.c)(n)}catch(t){Object(zt.b)(t,"_init")}"function"==typeof e&&e()}function jt(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"display",n=Kt,r=Tt.a.getState();try{switch(e){case Nt.a.DISPLAY:return r.config.useSafeFrames?[].concat(Xt(At.i),["amznhost"]):At.i;case Nt.a.VIDEO:return r.config.useSafeFrames?[].concat(Xt(At.z),["amznhost"]):At.z;default:return Object(Ut.f)(null==(t=Tt.a.getState())?void 0:t.config,n)&&Object(Et.h)(Tt.a.getState().targetingKeys[e])?Tt.a.getState().targetingKeys[e]:[]}}catch(t){return Object(zt.b)(t,"_targetingKeys",{makeVisibleToAllUsers:!0}),[]}}function St(){try{return Tt.a.getState().AAXReqs.reduce((function(t,e){return e.bidConfig.slots.reduce((function(t,e){return t[e.slotID]=e.slotName,t}),t)}),{})}catch(t){return Object(zt.b)(t,"_getSlotIdToNameMapping",{makeVisibleToAllUsers:!0}),{}}}function wt(){return Gt.a.getDefault().allowedToStoreAndAccessInformationOnDevice()}try{Object(Et.j)(window,"apstag")&&Object(Et.j)(window.apstag,"_Q")&&0<window.apstag._Q.length&&Tt.a.dispatch({type:"SET_Q",Q:window.apstag._Q})}catch(t){Object(zt.b)(t,"apstag-storeQ",{makeVisibleToAllUsers:!0})}window.apstag=function(){var e={punt:z,init:vt,debug:Pt.a,_getSlotIdToNameMapping:St,targetingKeys:jt,fetchBids:yt,setDisplayBids:ht,renderImp:bt,bids:z,deleteId:Vt.a,updateId:Vt.e,renewId:Vt.c,dpa:Vt.a,upa:Vt.e,rpa:Vt.c,thirdPartyData:{},isGDPRRegion:!1,rr:Vt.d,re:zt.b,_load3PLibraryConfig:Mt.c,_atsaaiod:wt,clientFetchBids:mt};return Object.keys(e).forEach((function(t){"function"==typeof e[t]&&(e[t]=Object(Qt.a)(t,e[t]),e[t]=Object(zt.d)(e[t],t))})),r?Object(Pt.b)(!0,t):n&&Object(Pt.b)(!1,t),!0===Object(Pt.c)("exposeApi")&&(e._api={_getBidSetInfo:at,_applyTargetingToGPTSlot:y,dispatch:Tt.a.dispatch,_clearTargetingFromGPTSlot:f,_clearBidSetOnSlot:d,_getCurrentSlotBids:p,_creativeURL:w,getSlotFetchCounts:it,buildBidUrl:Ut.c}),Yt(Yt({},window.apstag),e)}(),function(){try{var t,e=(Tt.a.dispatch({type:"SHOULD_SAMPLE_FEATURES",value:Object(Et.k)(Tt.a.getState().cfg.FEATURE_SAMPLING_RATE)}),Tt.a.dispatch({type:"SET_HOST",hostName:"DEFAULT_AAX_BID_HOST",hostValue:"aax.amazon-adsystem.com"}),Tt.a.dispatch({type:"SHOULD_SAMPLE_LATENCY",value:Object(Et.k)(Tt.a.getState().cfg.LATENCY_SAMPLING_RATE)}),null!==Tt.a.getState().cfg.TEST_BID_ENDPOINT&&(t=Object(Et.k)(Tt.a.getState().cfg.TEST_PATH_FREQUENCY),Tt.a.dispatch({type:"SHOULD_USE_TEST_BID_ENDPOINT",value:t}),t)&&null!==Tt.a.getState().cfg.TEST_PATH_LATENCY_SAMPLE_RATE&&Tt.a.dispatch({type:"SHOULD_SAMPLE_LATENCY",value:Object(Et.k)(Tt.a.getState().cfg.TEST_PATH_LATENCY_SAMPLE_RATE)}),Tt.a.dispatch({type:"SHOULD_SAMPLE_SLOT_RENDER",value:Object(Et.k)(Tt.a.getState().cfg.SLOT_RENDER_SAMPLING_RATE)}),Tt.a.getState());(e.experiments.shouldSampleLatency||e.displayAdServer.shouldSampleRender)&&I()}catch(t){Object(zt.b)(t,"apstag-sampleLatency")}try{B()}catch(t){Object(zt.b)(t,"apstag-doLast")}if(!Object(_t.i)(window,!0))try{var n=function(t){t&&"object"!==Wt(t)||(t="Request Timeout or Error"),Object(zt.b)({message:"csm-rtb-comm-js loading failed",name:t},"__csm-rtb-comm-js__")};Object(Lt.d)({url:Tt.a.getState().cfg.CSM_RTB_COMMUNICATOR_JS,onload:function t(e){e.readyState===XMLHttpRequest.DONE&&200===e.status?eval(e.responseText):n(JSON.stringify({status:e.statusText,response:e.responseXML}))},onerror:n,ontimeout:n})}catch(t){Object(zt.b)(t,"__load-csm-rtb-comm-js__")}Object(Pt.e)()}()}(),Object(Ht.a)("_system").safelyRecord("apstag/library/didLoad",{source:"bundle"}))}catch(t){Object(zt.b)(t,"apstag")}},function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"c",(function(){return g})),n.d(e,"b",(function(){return h})),n.d(e,"d",(function(){return O}));var r=n(1),o=n(0),i=n(2),a=n(5);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){var r,o;r=t,o=n[e=e],(e=function(t){return t=function(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==c(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===c(t)?t:String(t)}(e))in r?Object.defineProperty(r,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},f="__tcfapi";function d(t,e,n){if(b=Object(a.a)(n).read("consent/TCData"))e({enabled:b.gdprApplies?1:0,consent:b.tcString,log:{status:"tcfv2-success"},gdprApplies:b.gdprApplies});else{Object(a.a)(n).safelyRecord("_legacy/getGdprConfig_legacy/willExecute");var i,s=!1,d={log:{status:"no-status"}},b=50,p="global-func-error";e=Object(r.d)(e,"GdprCallback");try{if(!1===(t=Object(o.i)(t)?u({},t):{}).enabled||0===t.enabled?(d.log.status="explicit-no-gdpr",d.enabled=0):!0===t.enabled||1===t.enabled?(d.log.status=Object(o.j)(t,"consent")?"explicit-consent-passed":"explicit-no-consent-passed",d.enabled=1,d.consent=t.consent):Object(o.j)(t,"enabled")&&(d.log.status=Object(o.j)(t,"consent")?"malformed-with-consent":"malformed-without-consent",d.consent=t.consent,l(t.enabled)?d.enabled=t.enabled:d.enabled=1),Object(o.j)(t,"enabled")&&(d.log.enabled=t.enabled),Object(o.j)(t,"cmpTimeout")&&l(t.cmpTimeout)&&(b=t.cmpTimeout,d.log.cmpTimeout=b),void 0!==d.enabled)return Object(o.j)(d,"consent")&&"string"!=typeof d.consent&&(delete d.consent,Object(r.b)(new Error("Invalid consent: must be string, given ".concat(c(d.consent))),"getGdprConfig-pub-consent-invalid",{makeVisibleToAllUsers:!0})),void y()}catch(t){Object(r.b)(t,"getGdprConfig-parseConfig",{makeVisibleToAllUsers:!0})}try{Object(o.j)(window,f)&&"function"==typeof window[f]?(i="tcfv2",setTimeout((function(){d.log.status="".concat(i,"-timeout"),y()}),b),p="".concat(i,"-internal-error"),window[f]("getTCData",2,(function(t,e){try{e&&Object(o.i)(t)?(d.log.status="".concat(i,"-success"),Object(o.j)(t,"tcString")?d.consent=t.tcString:Object(o.j)(t,"consentData")&&(d.consent=t.consentData),d.enabled=t.gdprApplies?1:0,0===d.enabled&&delete d.consent,d.gdprApplies=t.gdprApplies,y()):(d.log.status="".concat(i,"-error"),y())}catch(t){d.log.status="func-error",y(),Object(r.b)(t,"cmpCallback-".concat(i),{makeVisibleToAllUsers:!0})}}))):(d.log.status="no-cmp",y())}catch(t){d.log.status=p,y(),Object(r.b)(t,"getGdprConfig-".concat(p),{makeVisibleToAllUsers:!0})}}function y(){s||(s=!0,d.consent&&Object(r.b)(new Error("Legacy getTCData logic was successful when addEventListener logic wasn't"),"LEGACY-TCFAPI-SUCCESS",{makeVisibleToAllUsers:!1,accountId:n}),e(u(u({},d),{},{log:u({},d.log)})))}}function b(t){for(var e=[],n=-1;0<=(n=t.indexOf("1",n+1));)e.push(n+1);return e}function p(t){for(var e=[],n=parseInt(m(t,12),2),r=0;r<n;r++){var o=parseInt(m(t,1),2),i=parseInt(m(t,16),2);if(e.push(i),o)for(var a=parseInt(m(t,16),2),c=i+1;c<=a;c++)e.push(c)}return e}function y(t){var e=parseInt(m(t,16),2);return parseInt(m(t,1),2)?p(t):b(m(t,e))}function m(t,e){var n=t.bits.substr(t.index,e);return t.index+=e,n}function g(t){try{var e,n,o;return!!t&&(!((e=function(t){try{for(var e=(t=(t=t.replace(/-/g,"+")).replace(/_/g,"/")).split(".")[0],n=window.atob(e),o="",i=0;i<n.length;i++)o+=("0000000"+n.charCodeAt(i).toString(2)).substr(-8);return o}catch(e){return Object(r.b)(new Error("TCF string conversion failed. (TCF string: ".concat(t,")")),"TCFToBinary",{makeVisibleToAllUsers:!0}),""}}(t)).length<230)&&(o={bits:e,index:0},(n={}).version=parseInt(m(o,6),2),2===n.version)&&(n.created=parseInt(m(o,36),2),n.lastUpdated=parseInt(m(o,36),2),n.cmpId=parseInt(m(o,12),2),n.cmpVersion=parseInt(m(o,12),2),n.consentScreen=parseInt(m(o,6),2),n.consentLanguage=String.fromCharCode(parseInt(m(o,6),2)+65)+String.fromCharCode(parseInt(m(o,6),2)+65),n.vendorListVersion=parseInt(m(o,12),2),n.tcfPolicyVersion=parseInt(m(o,6),2),n.isServiceSpecific="1"===m(o,1),n.useNonStandardStacks="1"===m(o,1),n.specialFeatureOptIns=b(m(o,12)),n.purposesConsent=b(m(o,24)),n.purposesLITransparency=b(m(o,24)),n.purposeOneTreatment="1"===m(o,1),n.publisherCC=String.fromCharCode(parseInt(m(o,6),2)+65)+String.fromCharCode(parseInt(m(o,6),2)+65),n.vendorConsents=y(o),n.vendorLegitimateInterests=y(o),n.publisherRestrictions=function(t){for(var e=parseInt(m(t,12),2),n=[],r=0;r<e;r++){var o=parseInt(m(t,6),2),i=parseInt(m(t,2),2);n.push({purposeId:o,restrictionType:i,vendorIds:p(t)})}return n}(o),n))}catch(t){return Object(r.b)(t,"parseTCFString",{makeVisibleToAllUsers:!0}),!1}}function h(t){var e=[];try{var n=Date.now(),r=(t||e.push("Invalid tcString: ".concat(t)),2!==t.version&&e.push("tcString version not supported: ".concat(t.version)),t.useNonStandardStacks&&e.push("tcString's useNonStandardStacks should not be true"),t.isServiceSpecific||e.push("tcString needs to be service specific"),t.publisherRestrictions?t.publisherRestrictions.filter((function(t){return 1===t.purposeId&&0<=t.vendorIds.indexOf(793)})):[]);if(0===r.length)v(t)||e.push("Invalid publisher restrictions");else switch(r[0].restrictionType){case 0:case 2:e.push("Invalid publisher restrictions");break;default:v(t)||e.push("Invalid publisher restrictions")}return i.a.dispatch({type:"RECORD_TCF_PARSE_TIME",time:Date.now()-n}),e}catch(t){if(e.length)return e;throw t}}function O(t,e){if(!t)return!!window.apstag&&!window.apstag.isGDPRRegion&&!0!==e;if(window.apstag&&!window.apstag.isGDPRRegion&&!1===e)return!0;if(2!==t.version)return!1;if(t.useNonStandardStacks)return!1;if(!t.isServiceSpecific)return!1;if(0===(e=t.publisherRestrictions.filter((function(t){return 1===t.purposeId&&0<=t.vendorIds.indexOf(793)}))).length)return v(t);switch(e[0].restrictionType){case 0:case 2:return!1;default:return v(t)}}function v(t){return!(!Object(o.j)(t,"vendorConsents")||!Object(o.j)(t,"purposesConsent"))&&0<=t.vendorConsents.indexOf(793)&&0<=t.purposesConsent.indexOf(1)}},function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return f})),n.d(e,"e",(function(){return d})),n.d(e,"c",(function(){return b})),n.d(e,"d",(function(){return p}));var r,o=n(1),i=n(7),a=n(2),c=n(5),s="AMZN-Token",u="AMZN-NoCookieConsent";function l(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r.token;try{var e=i.a.getDefault().cookie.getItem(t===r.noConsent?u:s);return e||""}catch(e){return Object(o.b)(e,"getAmznToken-".concat(t)),""}}function f(t){var e=a.a.getState().config.pubID;return Object(c.a)(e).record("ad/record/delete").then((function(){"function"==typeof t&&t()})).catch((function(){"function"==typeof t&&t()}))}function d(t,e,n){"boolean"!=typeof n&&(n=!0);var r=a.a.getState().config.pubID;return Object(c.a)(r).record("ad/record/update",{config:t,setCookie:n}).then((function(){"function"==typeof e&&e()})).catch((function(){"function"==typeof e&&e()}))}function b(t,e,n){"boolean"!=typeof n&&(n=!0);var r=a.a.getState().config.pubID;return Object(c.a)(r).record("ad/record/renew",{config:t,setCookie:n}).then((function(){"function"==typeof e&&e()})).catch((function(){"function"==typeof e&&e()}))}function p(t){var e=a.a.getState().config.pubID;return Object(c.a)(e).safelyRecord("ad/record/rr",{config:t})}(e=r=r||{})[e.noConsent=0]="noConsent",e[e.token=1]="token"},function(t,e,n){"use strict";var r;n.d(e,"a",(function(){return r})),(n=r=r||{}).DISPLAY="d",n.VIDEO="v",n.MULTI_FORMAT="mf"},function(t,e,n){"use strict";n.d(e,"a",(function(){return v})),n.d(e,"c",(function(){return j})),n.d(e,"e",(function(){return S})),n.d(e,"d",(function(){return w})),n.d(e,"b",(function(){return D}));var c=n(8),s=n(1),u=n(33),l=n(3),f=n(2),d=n(7),r=n(0),b=n(16),o=n(34),p=n(25),i=n(5);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function g(t,e,n){(e=h(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function h(t){return"symbol"===a(t=O(t,"string"))?t:String(t)}function O(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!==a(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}function v(t){Object(i.a)(t).record("cxm/contextual/set").catch((function(){}))}function j(r,o,i,e){var a=Date.now(),t=Object(u.a)(window.location,window.top.location,o);if(null!==t){var n={url:t,withCredentials:!0,onload:function t(e){if(200===e.status)try{f.a.dispatch({type:"RECORD_LIBRARY_LOAD_CALL_LATENCY",latency:Date.now()-a});var n=JSON.parse(e.response);eval(n["3pvendor"]),Object(b.a)(f.a.getState().config.gdpr,(function(t){var e;t&&(e=Object(b.c)(t.consent),Object(d.b)())&&Object(b.d)(e,t.gdprApplies)&&d.a.getDefault().localStorage.setItem(l.e,"1")}),r),Object(p.b)(n,o)}catch(t){Object(s.b)(t,"load3PLibraryConfig-onload"),Object(p.a)(t,"load3PLibraryConfig-onload",o)}null!=i&&i()},onerror:function(t){t=new Error("".concat(t.type,": ").concat(t.loaded," bytes transferred")),Object(s.b)(t,"load3PLibraryConfig-onerror"),Object(p.a)(t,"load3PLibraryConfig-onerror",o),null!=e&&e(t)}};try{Object(c.d)(n)}catch(t){Object(s.b)(t,"load3PLibraryConfig"),Object(p.a)(t,"load3PLibraryConfig",o),null!=e&&e(t)}}}function S(){return Object(r.j)(window,"creativeVendorLibraryLoaded")&&!0===window.creativeVendorLibraryLoaded||Object(r.j)(window,"confiant")}function w(){var t={renderTimes:{}};window.addEventListener("message",(function(e){Object(o.a)(t,e)}))}function D(t){var e={ids:{}};try{if("1"!==d.a.getDefault().localStorage.getItem(l.e))return e;Object(i.a)(t).record("idVendors/ids/get").catch((function(){})),e.ids=m({},Object(i.a)(t).read("idVendors/ids"));var n=Object(i.a)(t).read("idVendors/metadata");n&&(e.md=n)}catch(t){Object(s.b)(t,"getIdentityConfig")}return e}},function(t,e,n){"use strict";n.d(e,"d",(function(){return d})),n.d(e,"c",(function(){return b})),n.d(e,"b",(function(){return p})),n.d(e,"g",(function(){return h})),n.d(e,"a",(function(){return S})),n.d(e,"e",(function(){return w})),n.d(e,"f",(function(){return T}));var r=n(1),o=n(0),i=n(2),a=n(3),c=n(4);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l(r.key),r)}}function l(t){return t=function(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==s(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===s(t)?t:String(t)}var f=function(){function t(){var e,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=this,o=t;if(!(r instanceof o))throw new TypeError("Cannot call a class as a function");r=this,o=void 0,(e=l(e="_rawProps"))in r?Object.defineProperty(r,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[e]=o,this._rawProps=n}var e,n;return e=t,(n=[{key:"source",get:function(){return"web"}},{key:"omsdkAccessMode",get:function(){return"limited"}},{key:"publisherType",get:function(){var t=i.a.getState().config;return t&&!0===t.isSelfServePub?c.b.SELF_SERVE_WEB:c.b.MANAGED_WEB}},{key:"publisherUUID",get:function(){var t=i.a.getState().config;if(t)return t.pubID}},{key:"integratorVersion",get:function(){return a.l}},{key:"bidId",get:function(){var t=this._rawProps.bidId;if("string"==typeof t)return t}},{key:"dealId",get:function(){var t=this._rawProps.dealId;if("string"==typeof t)return t}},{key:"hostName",get:function(){var t=this._rawProps.hostName;if("string"==typeof t)return t}},{key:"pricePoint",get:function(){var t=this._rawProps.pricePoint;if("string"==typeof t)return t}},{key:"targetingMap",get:function(){var t=this._rawProps.targetingMap;if("string"==typeof t)return t}},{key:"adServerType",get:function(){var t=i.a.getState().config;if(t)return t.adServer}},{key:"adServerAdUnitId",get:function(){var t=this._rawProps.adServerAdUnitId;if("string"==typeof t)return t}},{key:"apsAdUnitId",get:function(){var t=this._rawProps.apsAdUnitId;if("string"==typeof t)return t}},{key:"getProperties",value:function(){return JSON.stringify({source:this.source,omsdkAccessMode:this.omsdkAccessMode,publisherType:this.publisherType,publisherUUID:this.publisherUUID,integratorVersion:this.integratorVersion,bidId:this.bidId,hostName:this.hostName,dealId:this.dealId,pricePoint:this.pricePoint,targetingMap:this.targetingMap,adServerType:this.adServerType,adServerAdUnitId:this.adServerAdUnitId,apsAdUnitId:this.apsAdUnitId})}}])&&u(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function d(t,e){try{if(Object(o.j)(e,"slotID")){var n=e.slotID,i=t.getElementById(n);if(i instanceof HTMLDivElement)return i}}catch(t){Object(r.b)(t,"getVideoDivElement-outstream")}}function b(t,e){try{Object(o.j)(t,"bidID")&&(e+="b=".concat(t.bidID)),Object(o.j)(t,"pp")&&void 0===t.dealId&&(e+="&pp=".concat(t.pp)),e+="&rnd=".concat(Object(o.c)())}catch(t){Object(r.b)(t,"constructVastTag")}return e}function p(t,e,n,o){try{var i={bidId:null==n?void 0:n.bidID,hostName:null==n?void 0:n.host,dealId:null==n?void 0:n.dealId,pricePoint:null==n?void 0:n.pp,apsAdUnitId:null==n?void 0:n.slotID},a={key:"$$videoPlayerProps$$",value:new f(i).getProperties()},c={key:"$$apstagVastTag$$",value:t},s={key:"$$apstagCompanionContainers$$",value:JSON.stringify(o||[])},u=e;return[a,c,s,{key:"$$apsvidonerror$$",value:"try { window.parent.apstag.re(new Error('video player load error'), 'vsdk-load-fail'); } catch(e) {}"}].forEach((function(t){var e=t.key;t=t.value;return u=u.replace(e,t)})),u}catch(t){return Object(r.b)(t,"constructVastTag"),""}}var y={},m=function(t){return y[t]||(y[t]={started:!1,completed:!1,loaded:!1,isPaused:!1}),y[t]},g={root:null,rootMargin:"0px",threshold:.5};function h(t,e,n){try{var o;window.addEventListener("message",(function(t){!function(t,e){if(t.origin===window.top.location.origin&&!0===t.data.apsVideoPlayer)switch(t.data.event){case"completed":m(e).completed=!0;break;case"loaded":m(e).loaded=!0}}(t,n)})),window.IntersectionObserver?(o=new window.IntersectionObserver((function(r){r.forEach((function(r){.5<r.intersectionRatio&&e.contentWindow&&(O(e,t,n),o.disconnect())}))}),g)).observe(t):Object(r.b)({name:"IntersectionObserver",message:"IntersectionObserver not supported "},"startVideoAndHandlePlayback")}catch(t){Object(r.b)(t,"startVideoAndHandlePlayback")}}function O(t,e,n){try{null!==t.contentDocument&&Object(o.g)(["complete","interactive"],t.contentDocument.readyState)?j(t,e,n):null!==t.contentDocument&&"uninitialized"!==t.contentDocument.readyState?t.contentDocument.addEventListener("DOMContentLoaded",(function(){j(t,e,n)})):t.addEventListener("load",(function(){j(t,e,n)})),setTimeout(j,1e3,!0)}catch(t){Object(r.b)(t,"loadVideoAd")}}function v(t,e,n){try{var o;window.IntersectionObserver&&(o=new window.IntersectionObserver((function(e){e.forEach((function(e){m(n).completed&&o.disconnect(),e.intersectionRatio<.5&&!m(n).isPaused?t.contentWindow&&t.contentWindow.adsM&&(t.contentWindow.adsM.pause(),m(n).isPaused=!0):m(n).isPaused&&t.contentWindow&&t.contentWindow.adsM&&(t.contentWindow.adsM.play(),m(n).isPaused=!1)}))}),{threshold:.5})).observe(e)}catch(e){Object(r.b)(e,"handleAutoPauseAndPlay")}}function j(t,e,n){t.contentWindow&&!m(n).started&&(m(n).started=!0,function(t,e,n){var r=Number(new Date)+(e||2e3);return n=n||100,new Promise((function e(o,i){var a=t();a?o(a):Number(new Date)<r?setTimeout(e,n,o,i):i(new Error("apsVideoPlayer timed out"))}))}((function(){return m(n).loaded}),3e4,100).then((function(){t.contentWindow&&t.contentWindow.adsM&&(t.contentWindow.adsM.play(),v(t,e,n))})).catch((function(){v(t,e,n),Object(r.b)({name:"VideoPlayerTimeout",message:"video player took more than 30 seconds to load"},"startAd")})))}function S(t,e){try{e&&e.appendChild(t)}catch(t){Object(r.b)(t,"_appendDivElement")}}function w(t,e){try{t.appendChild(e)}catch(t){Object(r.b)(t,"_insertVideoIframeInsideDiv")}}function T(t){var e=document.createElement("div");return e.style.width="".concat(t[0],"px"),e.style.height="".concat(t[1],"px"),e.style.margin="0 auto",e.id="apsVideoDiv-".concat(Object(o.c)()),e}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(0),o=n(1);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function c(t,e,n){(e=s(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function s(t){return t=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==i(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===i(t)?t:String(t)}var u=function(){function t(e){var n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],o=this,i=t;if(!(o instanceof i))throw new TypeError("Cannot call a class as a function");c(this,"validSizeStringRegex",/^[0-9]+x[0-9]+$/),c(this,"numberStringRegex",/^[0-9]+$/),c(this,"_sizes",void 0),c(this,"_permit1D",!0),c(this,"_allowUndefined",!1),this._sizes=e,this._permit1D=n,this._allowUndefined=r}var e,n;return e=t,(n=[{key:"isValid",value:function(){return!(void 0!==this._sizes||!this._allowUndefined)||0<this.sizes.length}},{key:"sizes",get:function(){var t=this;try{var e=[];if(Object(r.h)(this._sizes)){this._sizes=this._sizes.filter((function(t){return"fluid"!==t}));var n="2d",i=this._sizes;if(i&&0<i.length&&!Object(r.h)(i[0])&&("string"!=typeof i[0]||!this.validSizeStringRegex.test(i[0]))){if(!this._permit1D)throw new Error("Sizes must be 2d array");n="1d",i=[i]}e=i.filter((function(e){return t.isValidSize(n,e)})).map((function(t){return Object(r.h)(t)?t:t.split("x").map((function(t){return parseInt(t,10)}))}))}return e}catch(e){return Object(o.b)(e,"SizesDelegate-getSizes"),[]}}},{key:"aaxSizes",get:function(){if(void 0!==this._sizes||!this._allowUndefined)return this.sizes.filter(r.h).map((function(t){return t.join("x")}))}},{key:"isValidSize",value:function(t,e){var n=this,i=[];function a(t){t=JSON.stringify(t),-1===i.indexOf(t)&&(i.push(t),Object(o.b)({name:"SizesDelegate-isValidSize-invalid",message:"Invalid Slot Size: ".concat(JSON.stringify(e))},"SizesDelegate-isValidSize-invalid"))}try{return!("string"!=typeof e||!this.validSizeStringRegex.test(e))||(Object(r.h)(e)&&1!==e.length?(2<e.length&&a(e),e.slice(0,2).reduce((function(t,e){return t&&!("number"!=typeof e&&"string"!=typeof e||"string"==typeof e&&!n.numberStringRegex.test(e))}),!0)):(a(e),!1))}catch(t){return Object(o.b)(t,"isValidSize"),!0}}}])&&a(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));e=n(14);var r=n(0),o=n(1),i=n(4);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:n):r.value}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p(t);n=e?(n=p(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===a(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return b(r)}}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e,n){(e=m(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function m(t){return t=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==a(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===a(t)?t:String(t)}var g=function(t){var e=a;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t);var n=d(a);function a(t){var e;if(this instanceof a)return y(b(e=n.call(this,{slotID:t.getSlotElementId(),slotName:t.getAdUnitPath()})),"rawSlot",void 0),e.rawSlot=t,e;throw new TypeError("Cannot call a class as a function")}return e=a,(t=[{key:"mediaType",get:function(){return i.a.DISPLAY}},{key:"sizes",get:function(){try{var t=Object(r.f)(window).split("x").map((function(t){return Number(t)})),e=this.rawSlot.getSizes(t[0],t[1]);return null===e?[]:e.filter((function(t){return"fluid"!==t})).map((function(t){return[t.getWidth(),t.getHeight()]}))}catch(t){return this.reportError(t,"sizes"),[]}}},{key:"aaxSlot",get:function(){var t=s(s({},l(p(a.prototype),"aaxSlot",this)),{},{sd:this.slotID,s:this.sizes.filter(r.h).map((function(t){return t.join("x")}))});return this.slotID!==this.slotName&&(t.sn=this.slotName),t}},{key:"isValid",value:function(){return!(!l(p(a.prototype),"isValid",this).call(this)||0===this.sizes.length&&(this.reportIsValidMessages(["'sizes' must have at least 1 valid item"],!0),1))}},{key:"reportError",value:function(t,e,n){Object(o.b)(t,"GptSlot-".concat(e),n)}},{key:"setTargeting",value:function(t,e){try{this.rawSlot.setTargeting(t,e)}catch(t){this.reportError(t,"setTargeting")}}},{key:"getTargeting",value:function(t){try{return this.rawSlot.getTargeting(t)}catch(t){return this.reportError(t,"getTargeting"),[]}}},{key:"clearTargeting",value:function(t){try{this.rawSlot.clearTargeting(t)}catch(t){this.reportError(t,"clearTargeting")}}}])&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),a}(e.a)},function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return c}));var r=n(1),o=n(0);function i(t){try{return!(!Object(o.j)(t,"$sf")||!Object(o.j)(t.$sf,"ext"))}catch(t){return Object(r.b)(t,"isSafeFrame"),!1}}function a(t,e){try{var n,o,i,a=e.innerWidth,c=e.innerHeight,s=parseInt(t[0],10),u=parseInt(t[1],10),l=s-a,f=u-c,d=e.sfAPI||(null==(n=e.$sf)?void 0:n.ext);!d||a===s&&c===u||(null!=(o=d.register)&&o.call(d,s,u),null!=(i=d.expand)&&i.call(d,{r:l,b:f,push:!0}))}catch(t){Object(r.b)(t,"expandSf")}}function c(t){try{return 1===t.innerWidth&&1===t.innerHeight}catch(t){return Object(r.b)(t,"is1x1Creative"),!1}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(1);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function a(t,e,n){return(e=c(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){return t=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==o(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===o(t)?t:String(t)}var s="__tcfapi",u="isListenedTo",l="consentManagementPlatform",f=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");a(this,"store",void 0),a(this,"globalContext",void 0),this.store=e.stateContainer,this.globalContext=e.globalContext}var e,n,o;return e=t,o=[{key:"readStoredConsentData",value:function(t){return null==(t=t.getState()[l])?void 0:t.tcData}}],(n=[{key:"isListenerActive",get:function(){return this.isListenedTo}},{key:"isListenedTo",get:function(){var t;return(null==(t=this.store.getState()[l])?void 0:t[u])||!1},set:function(t){this.store.dispatch(a({type:"RECORD_CMP_LISTENED_TO"},u,t))}},{key:"writeConsentDataToStore",value:function(t){this.store.dispatch(a({type:"RECORD_CMP_CONSENT_DATA"},"tcData",t))}},{key:"onConsentDataChange",value:function(t,e,n){try{e?(this.isListenedTo=!0,t&&this.writeConsentDataToStore(t),null!=n&&n(!0)):null!=n&&n(!1)}catch(t){Object(r.b)(t,"attemptConsentDataSync-onConsentDataChange")}}},{key:"syncConsentData",value:function(t){var e=this;this.globalContext[s]?this.globalContext[s]("addEventListener",2,(function(n,r){return e.onConsentDataChange(n,r,t)})):null!=t&&t(!1)}},{key:"syncConsentDataIfNotSynced",value:function(t){this.isListenedTo?null!=t&&t(!0):this.syncConsentData(t)}},{key:"attemptConsentDataSync",value:function(t){try{this.syncConsentDataIfNotSynced(t)}catch(e){Object(r.b)(e,"attemptConsentDataSync"),null!=t&&t(!1)}}}])&&i(e.prototype,n),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return b}));var r=n(8),o=n(1),i=n(2),a=n(3),c=n(6),s=n(0);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function f(t){var e=Object(c.c)("bsHost",i.a.getState().hosts.DEFAULT_BS_HOST);e={url:"".concat(a.r).concat("prod",".").concat("us-east-1",".").concat(e).concat("/v1/recordVendorsLoaded"),body:JSON.stringify(t),headers:{"Content-Type":"application/json"},onload:function(){}};try{Object(r.d)(e)}catch(t){Object(o.b)(t,"load3PLibraryConfig-VendorLoadedEvent-SendError")}}function d(t,e,n){if(Object(s.k)(a.w))try{var r=i.a.getState().config;f([{publisherId:("600"===(null==n?void 0:n.sourceID)?null==n?void 0:n.publisherUUID:null==n?void 0:n.sourceID)||r.pubID,sourceId:(null==n?void 0:n.sourceID)||(r.isSelfServePub?a.s:r.pubID),failure:e,errorName:t.name,errorMessage:t.message}])}catch(t){Object(o.b)(t,"load3PLibraryConfig-VendorLoadedEventError-ConstructError")}}function b(t,e){var n;if(n=t,Object(s.k)("number"==typeof n["3psamplerate"]?n["3psamplerate"]:a.w))try{var r=JSON.parse(t[a.x]),c=(c="600"===(null==e?void 0:e.sourceID)?null==e?void 0:e.publisherUUID:null==e?void 0:e.sourceID)||i.a.getState().config.pubID;f(r.map((function(t){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){var r,o;r=t,o=n[e=e],(e=function(t){return t=function(t,e){if("object"!==u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==u(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===u(t)?t:String(t)}(e))in r?Object.defineProperty(r,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({publisherId:c},t)})))}catch(t){Object(o.b)(t,"load3PLibraryConfig-VendorLoadedEvent-ConstructError")}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var r=n(0),o=(e=n(13),n(1)),i=n(22);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d(r.key),r)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f(t);n=e?(n=f(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===a(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return l(r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t){return t=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==a(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===a(t)?t:String(t)}var b=function(t){var e=a;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t);var n=u(a);function a(){var t=this,e=a;if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");for(var r,o,i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return e=l(t=n.call.apply(n,[this].concat(c))),o=!0,(r=d(r="isSupported"))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o,t}return e=a,(t=[{key:"reportError",value:function(t,e){Object(o.b)(t,"GoogletagAdServer-".concat(e))}},{key:"cmdQueuePush",value:function(t){try{window.googletag.cmd.push(t)}catch(t){this.reportError(t,"cmdQueuePush")}}},{key:"slotRenderEndedEvent",value:function(t){try{window.googletag.pubads().addEventListener("slotRenderEnded",(function(e){e=new i.a(e.slot),t(e)}))}catch(t){this.reportError(t,"slotRenderEndedEvent")}}},{key:"setTargeting",value:function(t,e){try{window.googletag.pubads().setTargeting(t,e)}catch(t){this.reportError(t,"setTargeting")}}},{key:"getTargeting",value:function(t){try{return window.googletag.pubads().getTargeting(t)||[]}catch(t){return this.reportError(t,"getTargeting"),[]}}},{key:"clearTargeting",value:function(t){try{window.googletag.pubads().clearTargeting(t)}catch(t){this.reportError(t,"clearTargeting")}}},{key:"hasAdServerObjectLoaded",value:function(){try{return Object(r.j)(window,"googletag")&&Object(r.j)(window.googletag,"apiReady")&&!0===window.googletag.apiReady}catch(t){return this.reportError(t,"hasAdServerObjectLoaded"),!1}}},{key:"isCommandQueueDefined",value:function(){try{return Object(r.j)(window,"googletag")&&Object(r.j)(window.googletag,"cmd")}catch(t){return this.reportError(t,"isCommandQueueDefined"),!1}}},{key:"getSlots",value:function(){try{return window.googletag.pubads().getSlots().map((function(t){return new i.a(t)}))}catch(t){return this.reportError(t,"getSlots"),[]}}}])&&c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),a}(e.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return j})),n.d(e,"b",(function(){return S}));var r=n(1),o=n(8),i=n(0),a=n(5),c=n(3),s=n(9),u=n(6),l=n(2);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */d=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o=(m="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",i=m.asyncIterator||"@@asyncIterator",a=m.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(e){c=function(t,e,n){return t[e]=n}}function s(t,e,n,o){var i,a,c,s;e=e&&e.prototype instanceof b?e:b,e=Object.create(e.prototype),o=new w(o||[]);return r(e,"_invoke",{value:(i=t,a=n,c=o,s="suspendedStart",function(t,e){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===t)throw e;return{value:void 0,done:!0}}for(c.method=t,c.arg=e;;){var n=c.delegate;if(n&&(n=function t(e,n){var r=n.method,o=e.iterator[r];return void 0===o?(n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=void 0,t(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),l):"throw"===(r=u(o,e.iterator,n.arg)).type?(n.method="throw",n.arg=r.arg,n.delegate=null,l):(o=r.arg)?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,l):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,l)}(n,c))){if(n===l)continue;return n}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if("suspendedStart"===s)throw s="completed",c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);if(s="executing","normal"===(n=u(i,a,c)).type){if(s=c.done?"completed":"suspendedYield",n.arg===l)continue;return{value:n.arg,done:c.done}}"throw"===n.type&&(s="completed",c.method="throw",c.arg=n.arg)}})}),e}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var l={};function b(){}function p(){}function y(){}var m,g,h=((g=(g=(c(m={},o,(function(){return this})),Object.getPrototypeOf))&&g(g(T([]))))&&g!==e&&n.call(g,o)&&(m=g),y.prototype=b.prototype=Object.create(m));function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function v(t,e){var o;r(this,"_invoke",{value:function(r,i){function a(){return new e((function(o,a){!function r(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==f(i)&&n.call(i,"__await")?e.resolve(i.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}));c(o.arg)}(r,i,o,a)}))}return o=o?o.then(a,a):a()}})}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function T(t){if(t){var e,r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(r=function r(){for(;++e<t.length;)if(n.call(t,e))return r.value=t[e],r.done=!1,r;return r.value=void 0,r.done=!0,r}).next=r}return{next:E}}function E(){return{value:void 0,done:!0}}return r(h,"constructor",{value:p.prototype=y,configurable:!0}),r(y,"constructor",{value:p,configurable:!0}),p.displayName=c(y,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,a,"GeneratorFunction")),t.prototype=Object.create(h),t},t.awrap=function(t){return{__await:t}},O(v.prototype),c(v.prototype,i,(function(){return this})),t.AsyncIterator=v,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new v(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(h),c(h,a,"Generator"),c(h,o,(function(){return this})),c(h,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,n=Object(t),r=[];for(e in n)r.push(e);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},t.values=T,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;0<=r;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(n=o.completion).type&&(r=n.arg,S(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function b(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function p(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,v(r.key),r)}}function h(t,e,n){e&&g(t.prototype,e),n&&g(t,n),Object.defineProperty(t,"prototype",{writable:!1})}function O(t,e,n){(e=v(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function v(t){return t=function(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==f(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===f(t)?t:String(t)}function j(t){try{var e=function(t){try{var e=Object(a.a)(t).read("ad/context");return Object(i.i)(e)?{ortb2:e}:{}}catch(t){return Object(r.b)(t,"getSignals"),{}}}(t);return 0===Object.keys(e).length?"":Object(o.c)(e)}catch(t){return Object(r.b)(t,"getSignalsParams"),""}}function S(){P.get().log(E,"init");var t=window.apscustom||[];if(window.apscustom={push:_,loaded:!0},Array.isArray(t))for(;t.length;)_(t.shift())}var w=Object(u.c)("ASR_ENDPOINT_HOST","c.aps.amazon-adsystem.com"),T=Object(u.c)("ASR_ENDPOINT_IS","86355855cc6ed9e335d0382c8563aa10"),E=(e=function(){function t(){m(this,t),O(this,"ignoreKeys",["apsCustomSlotname","apsCustomProgram"]),O(this,"programKey","apscustom"),O(this,"dataParamPrefix","apsCustom")}return h(t,[{key:"init",value:function(t){var e,n,r,o=this;t&&t.id&&(n=document.getElementById(t.id))&&(t._element=n,e=Object.assign({},n.dataset),n.setAttribute("data-aps-custom-status","read"),n={program:e.apsCustomProgram||this.programKey,is:T},Object.keys(e).filter((function(t){return t.indexOf(o.dataParamPrefix)<=-1||o.ignoreKeys.includes(t)})).forEach((function(t){return delete e[t]})),r={slotID:t.id,slotName:e.apsCustomSlotname||t.id,sizes:[[999,999]]},this.fetchBidsAndRender(r,t,y(y({},n),e)))}},{key:"fetchBidsAndRender",value:function(t,e,n){var r=this;(t=(P.get().log(E,"fetchBids/start"),{slots:[t],params:n})).timeout=null!=(n=e.timeout)?n:6e4,t._endpointDomain=w,window.apstag.fetchBids(t,(function(t){P.get().log(E,"fetchBids/end"),r.renderBids(t,e)}))}},{key:"renderBids",value:function(t,e){t.forEach((function(t){new I(e,t).render()}))}}]),t}(),"customPlacements"),D=new e;function _(t){P.get().log(E,"implementation/legacyPush",.01),t=Object.assign({},t),D.init(t)}var I=function(){function t(e,n){var r=this;m(this,t),O(this,"slotProps",void 0),O(this,"rawResponse",void 0),O(this,"getPageStyles",(function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:["p","h1","h2"]).map(r.getTagStyle).filter((function(t){return 0<Object.keys(t).length})).reduce((function(t,e){return y(y({},t),e)}),{})})),O(this,"getContainerStyles",(function(t){try{var e,n,r;return t?(e=window.getComputedStyle(t),n="--aps-custom-container-",(r=new Map).set("".concat(n,"width"),e.width),r.set("".concat(n,"margin"),e.margin),r.set("".concat(n,"padding"),e.padding),Object.fromEntries(r.entries())):{}}catch(t){return{}}})),this.slotProps=e,this.rawResponse=n}return h(t,[{key:"getTagStyle",value:function(t){var e,n,r=document.getElementsByTagName(t);return r&&r[0]?(r=window.getComputedStyle(document.getElementsByTagName(t)[0]),(e=new Map).set("".concat(n="--aps-custom-page-").concat(t,"-color"),r.color),e.set("".concat(n).concat(t,"-fontFamily"),r.fontFamily),e.set("".concat(n).concat(t,"-fontSize"),r.fontSize),e.set("".concat(n).concat(t,"-fontWeight"),r.fontWeight),e.set("".concat(n).concat(t,"-lineHeight"),r.lineHeight),Object.fromEntries(e)):{}}},{key:"getDynamicFrameBodyHeight",value:function(t,e,n){if(e){P.get().log(E,"render/".concat(n,"/").concat(this.slotProps.id,"/loaded"));var r=(null==e?void 0:e.contentDocument)||(null==e||null==(o=e.contentWindow)?void 0:o.document),o=null==r?void 0:r.body.scrollHeight;e.style.height="".concat(o,"px");try{var i=y(y({},this.getPageStyles()),this.getContainerStyles(t));Object.keys(i).forEach((function(t){null!=r&&r.documentElement.style.setProperty(t,i[t])})),P.get().trackEvent(E,"renderComplete",{asrEndpoint:w,height:o,source:n})}catch(t){}}}},{key:"render",value:function(){return this._renderInIframe()}},{key:"_renderInIframe",value:function(){var t=this;if(!this.rawResponse||!this.slotProps)return!1;try{var e,n,o=this.rawResponse.size.split("x"),i=(null==(e=this.rawResponse.targeting)?void 0:e.amzniid)||this.rawResponse.amzniid,a=(null==(n=this.rawResponse.targeting)?void 0:n.amznadm)||this.rawResponse.amznadm;if(!i)return!1;P.get().log(E,"render/".concat(this.slotProps.id,"/start"));var c,s,u,l,f=this.slotProps._element;return this.slotProps.location&&this.slotProps.id&&(s=document.createElement("div"),null!=(c=document.getElementById(this.slotProps.id))&&c.insertAdjacentElement(this.slotProps.location,s),f=s),!!f&&((u=document.createElement("iframe")).style.marginLeft="0",u.style.marginTop="0",u.style.height="".concat(o[1],"px"),u.style.width="100%",u.setAttribute("scrolling","no"),u.setAttribute("frameborder","0"),u.onload=function(){return t.getDynamicFrameBodyHeight(f,u,a?"amznadm":"admi")},l='\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <meta charset="UTF-8">\n          <style>html{height:100%}body{height:100%;margin:0;overflow:hidden}</style>\n        </head>\n        <body>\n          <script>\n            window.parent.apstag.renderImp(document, "'.concat(i,'", {"inheritSize": true});\n          <\/script>\n        </body>\n      </html>'),u.srcdoc=a||l,f.appendChild(u),this.updateSlotAttribute("status","rendered"),!0)}catch(t){return Object(r.b)(new Error("Error while rendering"),"CustomPlacements"),!1}}},{key:"updateSlotAttribute",value:function(t,e){var n;null!=(n=this.slotProps._element)&&n.setAttribute("data-aps-custom-".concat(t),e)}}]),t}(),P=function(){function t(){var e=this,n=(m(this,t),O(this,"TAHOE_PROD","04a6c6a40ec6c493437745b4ff085efb826e05c276ad857733462915bc4c35e0"),O(this,"TAHOE_PROD_URL","https://prod.tahoe-analytics.publishers.advertising.a2z.com/logevent/postEquinoxEvent"),O(this,"level",Object(u.c)("APS_ANALYTICS_LEVEL","TAHOE")),O(this,"config",void 0),O(this,"timings",void 0),O(this,"log",void 0),O(this,"setLevel",(function(t){e.level=t})),O(this,"trackEvent",function(){n=d().mark((function n(r,o){var i,a,u=arguments;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=2<u.length&&void 0!==u[2]?u[2]:{},a=3<u.length&&void 0!==u[3]?u[3]:t.getDefaultSamplingRate(),n.abrupt("return",new Promise((function(t){try{var n,u;Math.random()>a?t(!1):(n=y({url:decodeURIComponent(Object(s.f)(window)),libraryVersion:c.l,timings:e.timings},e.getBrowserInfo()),u=JSON.stringify({eventSource:"apstag",eventCategory:r,eventName:o,eventTime:String(Date.now()),eventProperties:y(y(y({},e.config),n),i)}),"DEBUG"===e.level&&console.info("<analytics> ",JSON.parse(u)),"TAHOE"===e.level&&fetch(e.TAHOE_PROD_URL,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":e.TAHOE_PROD},body:JSON.stringify({Data:window.btoa(u),PartitionKey:String(Date.now())})}),t(!0))}catch(n){t(!1)}})));case 3:case"end":return n.stop()}}),n)}));var n,r=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){b(i,r,o,a,c,"next",t)}function c(t){b(i,r,o,a,c,"throw",t)}a(void 0)}))};return function(t,e){return r.apply(this,arguments)}}()),l.a.getState());this.config=n.config,this.timings=[],this.log=function(t,n,r){try{e.timings.push({time:performance.now(),key:"".concat(t,"/").concat(n)}),r&&e.trackEvent(t,n,{},r)}catch(t){}}}return h(t,[{key:"getBrowserInfo",value:function(){try{var t,e=navigator.connection;return{connection:{effectiveType:null==e?void 0:e.effectiveType,rtt:null==e?void 0:e.rtt,downlink:null==e?void 0:e.downlink},screen:Object(i.f)(window),userAgent:null==(t=navigator)?void 0:t.userAgent}}catch(t){return{}}}}],[{key:"get",value:function(){return null===this._analytics&&(this._analytics=new t),this._analytics}}]),t}();O(P,"_analytics",null),O(P,"getDefaultSamplingRate",(function(){var t=Object(u.c)("APS_ANALYTICS_RATE",.1);try{return Number(t)}catch(t){return.1}}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return L}));var r=n(13),o=n(0),i=n(1),a=(e=n(14),n(4));function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g(r.key),r)}}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:n):r.value}).apply(this,arguments)}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=y(t);n=e?(n=y(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===c(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return p(r)}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e,n){(e=g(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function g(t){return t=function(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==c(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===c(t)?t:String(t)}var h=function(t){var e=r;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t);var n=b(r);function r(t){var e;if(this instanceof r)return e={slotID:t.targetId,slotName:Object(o.j)(t,"invCode")?t.invCode:Object(o.j)(t,"tagId")?t.tagId:t.targetId},m(p(e=n.call(this,e)),"rawSlot",void 0),e.rawSlot=t,e;throw new TypeError("Cannot call a class as a function")}return e=r,(t=[{key:"mediaType",get:function(){return a.a.DISPLAY}},{key:"sizes",get:function(){try{return this.rawSlot.sizes}catch(t){return this.reportError(t,"sizes"),[]}}},{key:"aaxSlot",get:function(){try{var t=u(u({},f(y(r.prototype),"aaxSlot",this)),{},{sd:this.slotID,s:this.sizes.filter(o.h).map((function(t){return t.join("x")}))});return this.slotID!==this.slotName&&(t.sn=this.slotName),t}catch(t){return{sd:"",s:[],kv:{}}}}},{key:"reportError",value:function(t,e,n){Object(i.b)(t,"ApnSlot-".concat(e),n)}},{key:"isValid",value:function(){return!(!f(y(r.prototype),"isValid",this).call(this)||0===this.sizes.length&&(this.reportIsValidMessages(["'sizes' must have at least 1 valid item"],!0),1))}},{key:"initKeywords",value:function(){try{Object(o.j)(this.rawSlot,"keywords")||(this.rawSlot.keywords={})}catch(t){this.reportError(t,"initKeywords")}}},{key:"setTargeting",value:function(t,e){try{this.initKeywords(),this.rawSlot.keywords[t]=e}catch(t){this.reportError(t,"setTargeting")}}},{key:"getTargeting",value:function(t){try{return this.initKeywords(),Object(o.j)(this.rawSlot.keywords,t)?[this.rawSlot.keywords[t]]:[]}catch(t){return this.reportError(t,"getTargeting"),[]}}},{key:"clearTargeting",value:function(t){try{this.initKeywords(),delete this.rawSlot.keywords[t]}catch(t){this.reportError(t,"clearTargeting")}}}])&&l(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),r}(e.a);function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,T(r.key),r)}}function j(t,e){return(j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function T(t){return t=function(t,e){if("object"!==O(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==O(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===O(t)?t:String(t)}var E=function(t){var e=r;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t);var n=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=w(t);n=e?(n=w(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===O(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return S(r)}}(r);function r(){var t=this,e=r;if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");for(var o,i,a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return e=S(t=n.call.apply(n,[this].concat(c))),i=!0,(o=T(o="isSupported"))in e?Object.defineProperty(e,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[o]=i,t}return e=r,(t=[{key:"reportError",value:function(t,e){Object(i.b)(t,"AppNexusAdServer-".concat(e))}},{key:"cmdQueuePush",value:function(t){try{window.apntag.anq.push(t)}catch(t){this.reportError(t,"cmdQueuePush")}}},{key:"setTargeting",value:function(t,e){try{Object(o.j)(window,"apntag")&&Object(o.j)(window.apntag,"requests")&&(Object(o.j)(window.apntag.requests,"keywords")||(window.apntag.requests.keywords={}),window.apntag.requests.keywords[t]=e)}catch(t){this.reportError(t,"setTargeting")}}},{key:"getTargeting",value:function(t){try{if(!Object(o.j)(window,"apntag")||!Object(o.j)(window.apntag,"requests"))return[];Object(o.j)(window.apntag.requests,"keywords")||(window.apntag.requests.keywords={});var e=window.apntag.requests.keywords[t];return void 0===e?[]:[e]}catch(t){return this.reportError(t,"getTargeting"),[]}}},{key:"clearTargeting",value:function(t){try{Object(o.j)(window,"apntag")&&Object(o.j)(window.apntag,"requests")&&Object(o.j)(window.apntag.requests,"keywords")&&delete window.apntag.requests.keywords[t]}catch(t){this.reportError(t,"clearTargeting")}}},{key:"hasAdServerObjectLoaded",value:function(){try{return Object(o.j)(window,"apntag")&&Object(o.j)(window.apntag,"loaded")&&!0===window.apntag.loaded}catch(t){return this.reportError(t,"hasAdServerObjectLoaded"),!1}}},{key:"isCommandQueueDefined",value:function(){try{return Object(o.j)(window,"apntag")&&Object(o.j)(window.apntag,"anq")}catch(t){return this.reportError(t,"isCommandQueueDefined"),!1}}},{key:"getSlots",value:function(){try{var t=[];return Object(o.j)(window,"apntag")&&Object(o.j)(window.apntag,"requests")&&Object(o.j)(window.apntag.requests,"tags")&&Object(o.i)(window.apntag.requests.tags)&&Object.keys(window.apntag.requests.tags).forEach((function(e){e=window.apntag.requests.tags[e],t.push(new h(e))})),t}catch(t){return this.reportError(t,"getSlots"),[]}}}])&&v(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),r}(r.a),D=n(26);function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,R(r.key),r)}}function P(t,e){return(P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function A(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function k(t,e,n){(e=R(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function R(t){return t=function(t,e){if("object"!==_(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==_(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===_(t)?t:String(t)}var z=function(t){var e=r;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t);var n=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C(t);n=e?(n=C(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===_(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return A(r)}}(r);function r(){var t=this,e=r;if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return k(A(t=n.call.apply(n,[this].concat(i))),"isSupported",!0),k(A(t),"needNewBidObject",!0),t}return e=r,(t=[{key:"reportError",value:function(t,e){Object(i.b)(t,"SmartAdServer-".concat(e))}},{key:"cmdQueuePush",value:function(t){try{window.sas.cmd.push(t)}catch(t){this.reportError(t,"cmdQueuePush")}}},{key:"hasAdServerObjectLoaded",value:function(){try{return Object(o.j)(window,"sas")&&Object(o.j)(window.sas,"__smartLoaded")&&!0===window.sas.__smartLoaded}catch(t){return this.reportError(t,"hasAdServerObjectLoaded"),!1}}},{key:"isCommandQueueDefined",value:function(){try{return Object(o.j)(window,"sas")&&Object(o.j)(window.sas,"cmd")}catch(t){return this.reportError(t,"isCommandQueueDefined"),!1}}}])&&I(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),r}(r.a);function L(t){var e=new r.a;try{switch(t){case"appnexus":e=new E;break;case"googletag":e=new D.a;break;case"sas":e=new z}}catch(t){Object(i.b)(t,"getDisplayAdServer")}return e}},function(t,e,n){"use strict";function r(t,e){try{var n=o(t,e)[0];if(void 0!==n)return n}catch(t){}return null}function o(t,e){try{return t.performance.getEntriesByType("resource").filter((function(t){return e.test(t.name)}))}catch(t){return[]}}n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o}))},function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return c}));var r=n(3),o=n(0),i=n(1);function a(t){try{return Object(o.j)(t,"debug")}catch(t){return Object(i.b)(t,"isApstagLibrary"),!1}}function c(t){try{return!!Object(o.j)(t,r.a)&&!0===t[r.a]}catch(t){return Object(i.b)(t,"hasApstagJsLoaded"),!1}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));e=n(14);var r=n(21);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p(r.key),r)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:n):r.value}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d(t);n=e?(n=d(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===o(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return f(r)}}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e,n){(e=p(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function p(t){return t=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==o(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===o(t)?t:String(t)}var y=function(t){var e=o;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t);var n=l(o);function o(t){if(this instanceof o)return b(f(t=n.call(this,t)),"_sizesDelegate",void 0),t._sizesDelegate=new r.a(t.rawSlot.sizes),t;throw new TypeError("Cannot call a class as a function")}return e=o,(t=[{key:"sizes",get:function(){return this._sizesDelegate.sizes}},{key:"aaxSizes",get:function(){return this._sizesDelegate.aaxSizes||[]}},{key:"aaxSlot",get:function(){var t={sd:this.slotID,s:this.aaxSizes};return this.slotID!==this.slotName&&(t.sn=this.slotName),a(a({},t),s(d(o.prototype),"aaxSlot",this))}},{key:"isValid",value:function(){return!(!s(d(o.prototype),"isValid",this).call(this)||0===this.sizes.length&&(this.reportIsValidMessages(["'sizes' must have at least 1 valid item"],!0),1))}}])&&c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),o}(e.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return c}));var r=n(2),o=n(1),i=n(0),a=n(8);function c(t){try{var e=r.a.getState().cfg.COOKIE_MATCH_DELAY;setTimeout((function(){try{if(Object(i.j)(t,"cmp")){var e=t.cmp;function n(t){try{var e;r.a.getState().cmpFired||(r.a.dispatch({type:"CMP_FIRED"}),(e=document.createElement("iframe")).style.display="none",e.src=t,document.body.appendChild(e))}catch(t){Object(o.b)(t,"_doCookieMatch-ready")}}try{"loading"===document.readyState?document.addEventListener&&document.addEventListener("DOMContentLoaded",(function(){n(e)}),!1):n(e)}catch(e){Object(o.b)(e,"_doCookieMatch")}}else Object(i.j)(t,"cmpjs")&&Object(a.b)(t.cmpjs)}catch(e){Object(o.b)(e,"_tryCookieMatch-setTimeout")}}),e)}catch(e){Object(o.b)(e,"_tryCookieMatch")}}function s(t,e){var n=e;return function(){var e={method:t,args:arguments};try{e.ts=Date.now(),r.a.dispatch({type:"LOG_EVENT",event:e})}catch(e){Object(o.b)(e,"_logEvent")}return n.apply(void 0,arguments)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(2),o=n(1),i=n(6),a=n(3);function c(t,e,n){try{var c,s=r.a.getState(),u=s.config,l=Object(i.c)("host",s.hosts.DEFAULT_CXM_HOST),f=s.cfg.LIB_CONFIG_PATH;try{if(0<=["http:","https:"].indexOf(t.protocol))c=t.protocol+"//"+t.hostname;else{if(!(0<=["http:","https:"].indexOf(e.protocol)))return null;c=e.protocol+"//"+e.hostname}}catch(t){if(t instanceof window.DOMException)return null;throw t}var d,b=(b=null==n?void 0:n.sourceID)||(u.isSelfServePub?a.s:u.pubID),p=null==n?void 0:n.publisherUUID,y=(p||u.isSelfServePub&&(p=u.pubID),{src:b,u:encodeURIComponent(c)});return p&&(y.pubid=p),!y.src||isNaN(Number(y.src))?null:(d=Object.keys(y).map((function(t){return"".concat(t.trim(),"=").concat(String(y[t]).trim())})).join("&"),"".concat(a.v).concat(l).concat(f,"?").concat(d))}catch(t){return Object(o.b)(t,"buildLibraryConfigUrl"),null}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(0);function o(t,e){var n,o,i;Object(r.i)(e.data)&&(Object(r.j)(e.data,"bidInfo")&&(Object(r.j)(e.data.bidInfo,"src")?(n=e.data.bidInfo.src,n=new URL(n).searchParams.get("b")):Object(r.j)(e.data.bidInfo,"jsonp")&&(i=e.data.bidInfo.jsonp,n=JSON.parse(i.substr(17,i.length-20)).amzniid)),Object(r.j)(e.data,"renderData"))&&(e=(i=e.data.renderData).id,Object(r.j)(i,"renderStart")||Object(r.j)(i,"renderEnd"))&&(o=i.renderStart,i=i.renderEnd,o?(t.renderTimes[e]={timeStamp:o},n&&(t.renderTimes[e].bidId=n)):i&&Object(r.j)(t.renderTimes,e)&&0!==t.renderTimes[e].timeStamp&&t.renderTimes[e].bidId&&t.renderTimes[e].bidId)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));e=n(14);var r=n(21),o=n(4),i=n(18);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:n):r.value}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p(t);n=e?(n=p(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===a(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return b(r)}}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e,n){(e=m(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function m(t){return t=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==a(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===a(t)?t:String(t)}var g=function(t){var e=a;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t);var n=d(a);function a(t){if(this instanceof a)return y(b(t=n.call(this,t)),"_sizesDelegate",void 0),t._sizesDelegate=new r.a(t.rawSlot.sizes),t;throw new TypeError("Cannot call a class as a function")}return e=a,(t=[{key:"mediaType",get:function(){return o.a.VIDEO}},{key:"aaxMediaType",get:function(){return i.a.VIDEO}},{key:"sizes",get:function(){return this._sizesDelegate.sizes}},{key:"aaxSizes",get:function(){return this._sizesDelegate.aaxSizes||[]}},{key:"aaxSlot",get:function(){var t=s(s({},l(p(a.prototype),"aaxSlot",this)),{},{id:this.slotID,mt:this.aaxMediaType});return 0<this.sizes.length&&(t.s=this.aaxSizes),t}}])&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),a}(e.a)},function(t,e,n){"use strict";function r(t){var e=new Image;return e.src=t,e}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return I}));e=n(14);var r=n(4),o=n(18),i=n(0),a=n(1),c=n(21);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}function l(t,e,n){(e=f(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function f(t){return t=function(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==s(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===s(t)?t:String(t)}var d=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=this,r=t;if(!(n instanceof r))throw new TypeError("Cannot call a class as a function");l(this,"_propertyConfig",void 0),l(this,"_sizesDelegate",void 0),this._propertyConfig=e,this._sizesDelegate=new c.a(null==e?void 0:e.sizes,!1,!0)}var e,n;return e=t,(n=[{key:"sizes",get:function(){return this._sizesDelegate.sizes}},{key:"validSizes",get:function(){return this._sizesDelegate.isValid()}},{key:"propertyConfig",get:function(){return this._propertyConfig}},{key:"aaxPropertyConfig",get:function(){var t={};return this.aaxSizes&&(t.s=this.aaxSizes),t}},{key:"aaxSizes",get:function(){return this._sizesDelegate.aaxSizes}},{key:"isValid",value:function(){return!Object(i.i)(this.propertyConfig)||Array.isArray(this.propertyConfig)?(Object(a.b)({name:"MultiFormatSlot-InvalidMultiFormatSlotProperty",message:"multiFormatProperty must be an object"},"MultiFormatSlotProperty-isValid",{makeVisibleToAllUsers:!0}),!1):!!this.validSizes}}])&&u(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function y(t,e,n){(e=m(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function m(t){return t=function(t,e){if("object"!==b(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==b(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===b(t)?t:String(t)}var g=function(){function t(e){var n=this;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");y(this,"_multiFormatProperties",void 0),e&&Object(i.i)(e)&&!Array.isArray(e)&&(this._multiFormatProperties={},this.toMultiFormatMediaTypes(e).forEach((function(t){n._multiFormatProperties&&(n._multiFormatProperties[t]=new d(e[t]))})))}var e,n;return e=t,(n=[{key:"convertMultiFormatMediaType",value:function(t){var e;return y(e={},r.a.VIDEO,o.a.VIDEO),y(e,r.a.DISPLAY,o.a.DISPLAY),e[t]}},{key:"isMultiFormatMediaType",value:function(t){return Boolean(this.convertMultiFormatMediaType(t))}},{key:"toMultiFormatMediaTypes",value:function(t){var e=this;return Object.keys(t).filter((function(t){return e.isMultiFormatMediaType(t)}))}},{key:"multiFormatMediaTypes",get:function(){return this._multiFormatProperties?this.toMultiFormatMediaTypes(this._multiFormatProperties):[]}},{key:"aaxMultiFormatProperties",get:function(){var t,e=this;return this._multiFormatProperties?(t={},this.multiFormatMediaTypes.forEach((function(n){var r=e.convertMultiFormatMediaType(n);r&&(t[r]=null==(r=e._multiFormatProperties[n])?void 0:r.aaxPropertyConfig)})),t):{}}},{key:"isValid",value:function(){var t=this,e=!0;return this._multiFormatProperties?(this.multiFormatMediaTypes.forEach((function(n){t._multiFormatProperties[n].isValid()||(e=!1)})),e):(Object(a.b)({name:"MultiFormatSlot-InvalidMultiFormatProperties",message:"multiFormatProperties must be an object"},"MultiFormatProperties-isValid",{makeVisibleToAllUsers:!0}),!1)}}])&&p(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){D(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_(r.key),r)}}function S(){return(S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=E(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:n):r.value}).apply(this,arguments)}function w(t,e){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function T(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function D(t,e,n){(e=_(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function _(t){return t=function(t,e){if("object"!==h(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==h(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===h(t)?t:String(t)}var I=function(t){var e=i;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t);var n=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=E(t);n=e?(n=E(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===h(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return T(r)}}(i);function i(t){var e;if(this instanceof i)return D(T(e=n.call(this,t)),"_multiFormatPropertiesDelegate",void 0),e._multiFormatPropertiesDelegate=new g(t.multiFormatProperties),e;throw new TypeError("Cannot call a class as a function")}return e=i,(t=[{key:"mediaType",get:function(){return r.a.MULTI_FORMAT}},{key:"aaxMediaType",get:function(){return o.a.MULTI_FORMAT}},{key:"aaxMultiFormatProperties",get:function(){return this._multiFormatPropertiesDelegate.aaxMultiFormatProperties}},{key:"multiFormatPropertiesIsValid",get:function(){return this._multiFormatPropertiesDelegate.isValid()}},{key:"aaxSlot",get:function(){return v(v({},S(E(i.prototype),"aaxSlot",this)),{},{id:this.slotID,sd:this.slotID,sn:this.slotName||this.slotID,mt:this.aaxMediaType,mfp:this.aaxMultiFormatProperties})}},{key:"isValid",value:function(){return S(E(i.prototype),"isValid",this).call(this)&&this.multiFormatPropertiesIsValid}}])&&j(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),i}(e.a)},function(t,e,n){t.exports=n(15)}]);
