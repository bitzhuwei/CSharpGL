var sas=window.sas||{};sas.nativeAd||(sas.nativeAd=function(e){this.d=document,this.w=window,this.c=e;var t=this;this.logOn=!1,this.tracking=function(e){e&&((new Image).src=e)},this.log=function(){this.logOn&&console.log(arguments)},this.checkElementVisibility=function(e){var t=100;if(null!==e){var i=e.getBoundingClientRect(),a=i.bottom-i.top,c=this.getViewportSize().height,n=0;i.top>0?n=i.top+i.height>c?a-(i.top+i.height-c):a:(n=i.top+a)>c&&(n=c),t=n>0?100*n/a:0}return Math.round(t)},this.getViewportSize=function(){return null!==this.w.innerWidth?{width:this.w.innerWidth,height:this.w.innerHeight}:"CSS1Compat"===this.d.compatMode?{width:this.d.documentElement.clientWidth,height:this.d.documentElement.clientHeight}:{width:this.d.body.clientWidth,height:this.d.body.clientWidth}},this.findPlaceForAd=function(){var e,t=[];if(!this.c.placeOfAd.elementName)return null;""===(t=this.c.placeOfAd.elementName.split(";"))[t.length-1]&&t.splice(t.length-1,1);for(var i=0;i<t.length;i++){var a=t[i].replace(/^\s+|\s+$/g,"");if("Specified id"===this.c.placeOfAd.place||"automatically in article (by id)"===this.c.placeOfAd.place?e=this.d.getElementById(a):(e=this.d.getElementsByClassName(a)).length&&(e=e[0]),("Specified id"===this.c.placeOfAd.place||"Specified class"===this.c.placeOfAd.place)&&e&&e.tagName)return e;if(("automatically in article (by id)"===this.c.placeOfAd.place||"automatically in article (by class)"===this.c.placeOfAd.place)&&e&&e.tagName){var c=this.d.createElement("div");c.id="sas_intextContainer_"+this.c.insertionId;var n=e.getElementsByTagName(this.c.placeOfAd.paragraphType);if(0!==n.length&&n.length<100)for(var r=n.length-1;r>=0;r--)if(this.checkElementVisibility(n[r])>0||0===r)return n[r].parentNode.insertBefore(c,n[r].nextSibling),c}}return null},this.renderAd=function(){var e=this.c.userParams.domCode;e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/\[native_title\]/g,this.c.userParams.title)).replace(/\[native_description\]/g,this.c.userParams.description)).replace(/\[native_backgroundColor\]/g,this.c.userParams.backgroundColor)).replace(/\[native_clickTarget\]/g,this.c.creative.clickTarget)).replace(/\[native_clickUrl\]/g,this.c.creative.clickUrl)).replace(/\[native_imageUrl\]/g,this.c.creative.url)).replace(/\[native_clickTarget1\]/g,this.c.creative1.clickTarget)).replace(/\[native_clickUrl1\]/g,this.c.creative1.clickUrl)).replace(/\[native_imageUrl1\]/g,this.c.creative1.url)).replace(/\[native_clickTarget2\]/g,this.c.creative2.clickTarget)).replace(/\[native_clickUrl2\]/g,this.c.creative2.clickUrl)).replace(/\[native_imageUrl2\]/g,this.c.creative2.url)).replace(/\[native_clickUrl3\]/g,this.c.creative3.clickUrl)).replace(/\[native_imageUrl3\]/g,this.c.creative3.url)).replace(/\[native_clickTarget3\]/g,this.c.creative3.clickTarget)).replace(/\[native_customField\]/g,this.c.userParams.customField)).replace(/\[native_customField1\]/g,this.c.userParams.customField1)).replace(/\[native_customField2\]/g,this.c.userParams.customField2)).replace(/\[native_customField3\]/g,this.c.userParams.customField3);var i="";"top left"===this.c.userParams.sponsorLabelPosition?i="top:0;left:0":"top right"===this.c.userParams.sponsorLabelPosition?i="top:0;right:0":"bottom left"===this.c.userParams.sponsorLabelPosition?i="bottom:0;left:0":"bottom right"===this.c.userParams.sponsorLabelPosition&&(i="bottom:0;right:0"),e=(e=e.replace(/\[native_sponsorLabel\]/g,this.c.userParams.sponsorLabel)).replace(/\[native_sponsorLabelPosition\]/g,i);var a=this.d.getElementById(this.c.tagId);if(sas.debugMode&&sas.debugMode.addBanner&&sas.debugMode.addBanner({adSlot:a,adInfo:{"Creative ID":[this.c.creative.id,this.c.creative1.id,this.c.creative2.id,this.c.creative3.id].filter((function(e,t,i){return i.indexOf(e)===t})),"Insertion ID":this.c.insertionId}}),!a&&"undefined"!=typeof inDapIF&&window.inDapIF){var c=window.frameElement;(a=this.d.createElement("DIV")).setAttribute("id",this.c.tagId),c.parentNode.insertBefore(a,c)}if("Smart tag"!==this.c.placeOfAd.place){var n=this.findPlaceForAd();if(this.log("parent",n),!n)return void this.log("no place for ad");n.insertBefore(a,n.firstChild)}a.insertAdjacentHTML("beforeend",e),t.viewabilityCount(a)},t.viewabilityCount=function(e){var i={};i[t.c.creative1.id]={viewable:[t.c.viewability.viewUrl],notviewable:[],undetermined:[t.c.viewability.errorUrl]};var a={};a[t.c.creative1.id]={viewable:[t.c.viewability.impressionsOnePx]};var c={area:1e-4};sas.utils.loadScriptCdn("diff/templates/ts/dist/viewability/sas-viewability-1.1.js",{onLoad:function(){(new window.Viewability).init(e,a,c),(new window.Viewability).init(e,i)}})},this.addReadyFunc=function(){!function(e,i){"use strict";e=e||"docReady",i=i||t.w;var a=[],c=!1,n=!1;function r(){if(!c){c=!0;for(var e=0;e<a.length;e++)a[e].fn.call(t.w,a[e].ctx);a=[]}}function s(){"complete"===t.d.readyState&&r()}i[e]=function(e,i){c?setTimeout((function(){e(i)}),1):(a.push({fn:e,ctx:i}),"complete"===t.d.readyState||!t.d.attachEvent&&"interactive"===t.d.readyState?setTimeout(r,1):n||(t.d.addEventListener?(t.d.addEventListener("DOMContentLoaded",r,!1),t.w.addEventListener("load",r,!1)):(t.d.attachEvent("onreadystatechange",s),t.w.attachEvent("onload",r)),n=!0))}}("docReady",t)},this.init=function(){"undefined"!=typeof inDapIF&&window.inDapIF&&(this.d=window.parent.document,this.w=window.parent),"Smart tag"===this.c.placeOfAd.place?this.renderAd():(this.addReadyFunc(),this.docReady((function(){t.log("document is ready"),t.renderAd()}))),this.c.trackingUrl&&this.tracking(this.c.trackingUrl)}});