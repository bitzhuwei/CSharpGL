(function(e){if(e.wpcom_proxy_request){return}var t,n=window.location.protocol+"//"+window.location.hostname,r="https://public-api.wordpress.com",o=false,i=true,a=false,s=true,l=[],f={},p={},u=true,c=function(t){s="object"===typeof t.originalEvent.data;e(window).unbind("message",c);d()},d=function(){if(!a){e(window).bind("message",y)}else{pm.bind("proxy",function(e){y(e)})}t=document.createElement("iframe");t.src="https://public-api.wordpress.com/wp-admin/rest-proxy/#"+n;t.style.display="none";e(t).bind("load",function(){var e;o=true;while(e=l.shift()){h(e)}});e(document).ready(function(){e(document.body).append(t)})},y=function(e){var t,n,o,i,l;if(!a){t=e.originalEvent;if(t.origin!==r){return}n=s?t.data:JSON.parse(t.data)}else{n=e}if(!n||!n.length){return}o=n[n.length-1];if("undefined"===typeof f[o]){return}i=f[o];delete f[o];l=p[o];if(l){i.resolveWith.call(i,l,n.slice(0,-1));delete p[o]}else{i.resolve.apply(i,n.slice(0,-1))}},w=function(){var e=_.apply(null,arguments);h(e);return f[e.callback].promise()},m=function(){var e=_.apply(null,arguments);l.push(e);return f[e.callback].promise()},h=function(e){var t=v(e),n=s?e:JSON.stringify(e);if(u&&t.has_files){b(e,t)}else{try{g(n)}catch(n){if(t.has_files){u=true;b(e,t)}else{throw n}}}},g=function(e){if(!a){t.contentWindow.postMessage(e,r)}else if(window.pm){pm({data:e,type:"proxy",target:t.contentWindow,url:"https://public-api.wordpress.com/wp-admin/rest-proxy/#"+n,origin:r})}},b=function(n,o){if(!o.has_files)return;e.each(o.file_keys,function(e,o){var i=new FileReader,a=n.formData[o][0],s=n.formData[o][1];i.onload=function(e){n.formData[o]=[a,{fileContents:e.target.result,fileName:s.name,mimeType:s.type}];var i=v(n);if(!i.has_files){t.contentWindow.postMessage(n,r)}};i.readAsArrayBuffer(s)})},v=function(t){var n={has_files:false,file_keys:[]};if(!s||!t.formData||t.formData.length<=0)return n;e.each(t.formData,function(e,t){var r=t[1];if("object"==typeof r&&"[object File]"==Object.prototype.toString.call(r)){n.has_files=true;n.file_keys.push(e)}});return n},_=function(){var e=jQuery.makeArray(arguments),t=e.pop(),n=e.pop(),r=new jQuery.Deferred,o;if(jQuery.isFunction(t)){r.done(t);t=n;n=e.pop()}if("string"===typeof t){t={path:t}}if(n){t.path=n}do{o=Math.random()}while("undefined"!==typeof f[o]);f[o]=r;if(t.context){p[o]=t.context;t=jQuery.extend({},t);delete t.context}t.callback=o;t.supports_args=true;if(t.hasOwnProperty("signal")){t.signal.addEventListener("abort",()=>{delete f[o];g({abort:true,callback:o});r.reject(new DOMException("AbortError","AbortError"))});delete t.signal}return t};if(jQuery.inArray(typeof window.postMessage,["function","object"])!=-1){e(window).bind("message",c);window.postMessage({},n)}else if(window.pm){a=true;d()}else{i=false}e.wpcom_proxy_request=function(){if(!i){throw"Browser does not support window.postMessage"}if(o){return w.apply(null,arguments)}else{return m.apply(null,arguments)}};e.wpcom_proxy_rebuild=function(){if(!o)return;o=false;e(t).remove();d()}})(jQuery);